{"version":3,"sources":["node_modules/curvature/form/multiField/FormWrapper.js","node_modules/curvature/form/multiField/Wrapper.js","app/database.html","app/form.html","app/home.html","app/initialize.js","app/stream-index.html","app/streams.html"],"names":["Config","set","location","host","document","addEventListener","fetch","get","routes","view","View","from","require","args","links","home","streams","database","columns","backend","bindTo","v","k","t","d","vv","kk","tt","dd","console","log","JSON","stringify","children","wait","createTable","event","preventDefault","target","action","method","body","FormData","headers","Accept","then","response","text","newColumn","push","streamName","url","options","json","openStream","path","newStream","Router","go","received","eventLog","eventBuffer","onServerEvent","unshift","data","parse","id","lastEventId","onNextFrame","splice","eventSource","EventSource","credentials","onRemove","close","removeEventListener","inputCanHaveHeaders","substr","publishMessage","input","String","fromCharCode","inputType","inputHeaders","output","status","toJson","x","outputCanHaveHeaders","submitRequest","outputType","outputHeaders","RuleSet","add","apply","listen"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA;AAAA;AAAA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AAAA;AAAA;;;;ACAA;;AACA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","file":"docs/app.js","sourcesContent":["\nrequire.register(\"curvature/form/multiField/FormWrapper.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FormWrapper = void 0;\n\nvar _Repository = require(\"../../base/Repository\");\n\nvar _Form = require(\"../../form/Form\");\n\nvar _Toast = require(\"../../toast/Toast\");\n\nvar _ToastAlert = require(\"../../toast/ToastAlert\");\n\nvar _View2 = require(\"../../base/View\");\n\nvar _Router = require(\"../../base/Router\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar FormWrapper = /*#__PURE__*/function (_View) {\n  _inherits(FormWrapper, _View);\n\n  var _super = _createSuper(FormWrapper);\n\n  function FormWrapper(args, path) {\n    var _this;\n\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n    var customFields = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, FormWrapper);\n\n    _this = _super.call(this, args);\n    _this.path = path;\n    _this.args.method = method;\n    _this.args.action = _this.args.action || null;\n    _this.args.form = null;\n    _this.args.title = null;\n    _this.args[\"class\"] = '';\n    _this.template = \"\\n\\t\\t\\t<div class = \\\"form constrict [[class]]\\\">\\n\\t\\t\\t\\t<div cv-if = \\\"title\\\"><label>[[title]]</label></div>\\n\\t\\t\\t\\t[[form]]\\n\\t\\t\\t</div>\\n\\t\\t\";\n    _this._onLoad = [];\n    _this._onSubmit = [];\n    _this._onRender = [];\n    _this._onRequest = [];\n    _this._onError = [];\n    _this._onResponse = [];\n\n    if (path instanceof _Form.Form) {\n      _this.loadForm(form, customFields);\n    } else {\n      _Repository.Repository.request(path).then(function (resp) {\n        if (!resp || !resp.meta || !resp.meta.form || !(resp.meta.form instanceof Object)) {\n          console.error('Cannot render form with ', resp); // Router.go('/');\n\n          return;\n        }\n\n        _this.loadForm(new _Form.Form(resp.meta.form, customFields));\n\n        _this.onLoad(_this.args.form, resp.body);\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(FormWrapper, [{\n    key: \"loadForm\",\n    value: function loadForm(form) {\n      var _this2 = this;\n\n      this.args.form = form;\n      this.args.form.addEventListener('submit', function (event) {\n        if (event) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        var formElement = form.tags.formTag.element;\n\n        var uri = formElement.getAttribute('action') || _this2.args.action || _this2.path;\n\n        var method = formElement.getAttribute('method') || _this2.args.method;\n\n        var query = form.args.flatValue;\n        method = method.toUpperCase(); // console.log(method, uri);\n\n        if (method == 'GET') {\n          var _query = {};\n\n          if (_this2.args.content && _this2.args.content.args) {\n            _this2.args.content.args.page = 0;\n          }\n\n          _query.page = 0;\n\n          for (var i in query) {\n            if (i === 'api') {\n              continue;\n            }\n\n            _query[i] = query[i];\n          }\n\n          var promises = _this2.onRequest(_query);\n\n          promises.then(function () {\n            _this2.onResponse({});\n\n            _Router.Router.go(uri + '?' + _Router.Router.queryToString(_query));\n\n            _this2.update(_query);\n          })[\"catch\"](function (error) {\n            _this2.onRequestError(error);\n          });\n        } else if (method == 'POST') {\n          var formData = form.formData();\n\n          var _iterator = _createForOfIteratorHelper(formData.entries()),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {// console.log(pair[0]+ ', ' + pair[1]);\n\n              var pair = _step.value;\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          var _promises = _this2.onRequest(formData);\n\n          if (_promises) {\n            _promises.then(function () {\n              _Repository.Repository.request(uri, {\n                api: 'json'\n              }, formData, false, {\n                progressDown: function progressDown(event) {\n                  _this2.progressDown(event);\n                },\n                progressUp: function progressUp(event) {\n                  _this2.progressUp(event);\n                }\n              }).then(function (response) {\n                _this2.onResponse(response);\n              })[\"catch\"](function (error) {\n                _this2.onRequestError(error);\n              });\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"onRequest\",\n    value: function onRequest(requestData) {\n      var promises = [];\n\n      for (var i in this._onRequest) {\n        var onReq = this._onRequest[i](requestData, this);\n\n        if (onReq) {\n          promises.push(onReq);\n        }\n      }\n\n      if (promises.length == 0) {\n        return Promise.resolve();\n      }\n\n      return Promise.all(promises);\n    }\n  }, {\n    key: \"onRequestError\",\n    value: function onRequestError(error) {\n      for (var i in this._onError) {\n        this._onError[i](error, this);\n      }\n\n      if (error.messages) {\n        for (var _i in error.messages) {\n          _Toast.Toast.instance().alert(error.body && error.body.id ? 'Success!' : 'Error!', error.messages[_i], 3500);\n        }\n      }\n    }\n  }, {\n    key: \"onResponse\",\n    value: function onResponse(response) {\n      for (var i in this._onResponse) {\n        this._onResponse[i](response, this);\n      }\n\n      if (response.messages) {\n        for (var _i2 in response.messages) {\n          _Toast.Toast.instance().alert(response.body && response.body.id ? 'Success!' : 'Error!', response.messages[_i2], 3500);\n        }\n      }\n    }\n  }, {\n    key: \"onLoad\",\n    value: function onLoad(form, model) {\n      for (var i in this._onLoad) {\n        this._onLoad[i](this, form, model);\n      }\n    } // onSubmit(form, event)\n    // {\n    // \tfor(let i in this._onSubmit)\n    // \t{\n    // \t\tthis._onSubmit[i](this, event);\n    // \t}\n    // }\n    // postRender()\n    // {\n    // \tfor(let i in this._onRender)\n    // \t{\n    // \t\tthis._onRender[i](this.args.form);\n    // \t}\n    // }\n\n  }, {\n    key: \"customFields\",\n    value: function customFields() {\n      return {};\n    }\n  }, {\n    key: \"submit\",\n    value: function submit() {// console.log(this);\n    }\n  }, {\n    key: \"progressUp\",\n    value: function progressUp(event) {\n      console.log(event.loaded, event.total, event.loaded / event.total);\n    }\n  }, {\n    key: \"progressDown\",\n    value: function progressDown(event) {\n      console.log(event.loaded, event.total, event.loaded / event.total);\n    }\n  }]);\n\n  return FormWrapper;\n}(_View2.View);\n\nexports.FormWrapper = FormWrapper;\n  })();\n});","\nrequire.register(\"curvature/form/multiField/Wrapper.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Wrapper = void 0;\n\nvar _Config = require(\"../../base/Config\");\n\nvar _View2 = require(\"../../base/View\");\n\nvar _Repository = require(\"../../base/Repository\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar Wrapper = /*#__PURE__*/function (_View) {\n  _inherits(Wrapper, _View);\n\n  var _super = _createSuper(Wrapper);\n\n  function Wrapper(args) {\n    var _this;\n\n    _classCallCheck(this, Wrapper);\n\n    _this = _super.call(this, args);\n    _this.template = \"\\n\\t\\t\\t<div\\n\\t\\t\\t\\tclass = \\\"wrapped-field [[classes]]\\\"\\n\\t\\t\\t\\tcv-on = \\\"click:editRecord(event, key)\\\"\\n\\t\\t\\t\\ttitle = \\\"[[fieldName]]: [[id]]\\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\tcv-on = \\\"click:deleteImage(event, key)\\\"\\n\\t\\t\\t\\t\\tstyle = \\\"display: inline; cursor:pointer;\\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t[[icon]]\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class = \\\"field-content\\\">\\n\\t\\t\\t\\t\\t[[title]]\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div style = \\\"display:none\\\">[[field]]</div>\\n\\t\\t\"; // console.log(this.args.field);\n\n    _this.args.field = _this.args.field || '!';\n    _this.args.keyword = '';\n    _this.args.title = '';\n    _this.args.record = {};\n    _this.args.key = _this.args.field.key;\n    _this.args.classes = '';\n    _this.args.icon = '×';\n    _this.deleted = false;\n\n    _this.args.field.args.bindTo('fieldName', function (v) {\n      _this.args.fieldName = v;\n    });\n\n    _this.args.fieldName = _this.args.field.args.name;\n    _this.args.id = _this.args.field.args.value.id;\n\n    _this.args.bindTo('id', function (v) {\n      _this.args.field.args.value.id = v;\n    });\n\n    _this.args.field.args.value.bindTo('id', function (v, k) {\n      if (!v) {\n        return;\n      }\n\n      _Repository.Repository.request(_this.backendPath(), {\n        id: v\n      }).then(function (response) {\n        _this.args.id = v;\n        var record = response.body[0];\n\n        if (!record) {\n          _this.args.publicId = null;\n          _this.args.title = null;\n          return;\n        }\n\n        _this.refresh(record);\n      });\n    }, {\n      wait: 0\n    });\n\n    _this.args.field.args.value.bindTo('keyword', function (v) {\n      _this.args.keyword = v;\n    });\n\n    return _this;\n  }\n\n  _createClass(Wrapper, [{\n    key: \"editRecord\",\n    value: function editRecord() {\n      this.args.parent.editRecord(this.args.record, this);\n    }\n  }, {\n    key: \"deleteImage\",\n    value: function deleteImage(event, index) {\n      event.stopPropagation();\n\n      if (!this.deleted) {\n        this.args.icon = '↺';\n        this.args.parent.deleteImage(index);\n        this.deleted = true;\n      } else {\n        this.args.icon = '×';\n        this.args.parent.undeleteImage(index);\n        this.deleted = false;\n      }\n    }\n  }, {\n    key: \"backendPath\",\n    value: function backendPath() {\n      var backend = _Config.Config.get('backend') || '//';\n      return backend + this.args.parent.args.attrs['data-endpoint'];\n    }\n  }, {\n    key: \"getRecordTitle\",\n    value: function getRecordTitle(record) {\n      if (record._titleField) {\n        return record[record._titleField];\n      }\n\n      return record.title || record.publicId || record.id;\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh(model) {\n      for (var i in model) {\n        this.args[i] = model[i];\n      }\n\n      this.args.record = model;\n      this.args.title = this.getRecordTitle(model);\n    }\n  }]);\n\n  return Wrapper;\n}(_View2.View);\n\nexports.Wrapper = Wrapper;\n  })();\n});","module.exports = \"<h1>Database</h1>\\n\\n<p><a cv-link = \\\"/\\\">home</a></p>\\n\\nCreate a new table:\\n\\n<div class = \\\"row\\\" style = \\\"max-width: 20em;\\\">\\n\\t<form method = \\\"POST\\\" action = \\\"[[backend]]/createScaffold\\\" cv-on = \\\"submit:createTable(event)\\\">\\n\\t\\t<input name = \\\"tableName\\\" cv-bind = \\\"newTable\\\" placeholder = \\\"enter a table name\\\">\\n\\t\\t<input type = \\\"submit\\\" value = \\\"open stream\\\">\\n\\t</form>\\n</div>\\n\\n\\n<div class = \\\"column inline db-columns\\\">\\n\\t<div class = \\\"column\\\" cv-each = \\\"columns:column:c\\\"><input cv-bind = \\\"column\\\"></div>\\n\\t<button cv-on = \\\"click:newColumn(event)\\\">+</button>\\n</div>\\n\"","module.exports = \"<h1>Content-Type changer</h1>\\n\\n<p><a cv-link = \\\"/\\\">home</a></p>\\n\\n<!-- <div class = \\\"url-bar row\\\">\\n\\t<label class = \\\"bordered column\\\">\\n\\t\\tendpoint\\n\\t\\t<div class = \\\"row input-row\\\">\\n\\t\\t\\t<input cv-bind = \\\"urlPath\\\" />\\n\\t\\t\\t<button>GET</button>\\n\\t\\t</div>\\n\\t</label>\\n</div> -->\\n\\n<label class = \\\"bordered column\\\">\\n\\tinput\\n\\t<textarea cv-bind = \\\"input\\\" class = \\\"input\\\"></textarea>\\n</label>\\n\\n<div class = \\\"mid-bar\\\">\\n\\n\\t<div class = \\\"left-bar\\\">\\n\\n\\t\\t<label cv-if = \\\"inputCanHaveHeaders\\\">\\n\\t\\t\\tinput has headers\\n\\t\\t\\t<input type = \\\"checkbox\\\" cv-bind = \\\"inputHeaders\\\" value = \\\"1\\\" />\\n\\t\\t</label>\\n\\n\\t</div>\\n\\n\\t<div class = \\\"center-bar\\\">\\n\\n\\t\\t<select cv-bind = \\\"inputType\\\">\\n\\t\\t\\t<option value = \\\"text/plain\\\">text/plain</option>\\n\\t\\t\\t<option value = \\\"text/csv\\\">text/csv</option>\\n\\t\\t\\t<option value = \\\"text/tsv\\\">text/tsv</option>\\n\\t\\t\\t<option value = \\\"text/json\\\">text/json</option>\\n\\t\\t\\t<!-- <option value = \\\"text/yaml\\\">text/yaml</option> -->\\n\\t\\t</select>\\n\\n\\t\\t<button cv-on = \\\"click:submitRequest(event)\\\"> → </button>\\n\\n\\t\\t<select cv-bind = \\\"outputType\\\">\\n\\t\\t\\t<option value = \\\"text/plain\\\">text/plain</option>\\n\\t\\t\\t<option value = \\\"text/csv\\\">text/csv</option>\\n\\t\\t\\t<option value = \\\"text/tsv\\\">text/tsv</option>\\n\\t\\t\\t<option value = \\\"text/json\\\">text/json</option>\\n\\t\\t\\t<!-- <option value = \\\"text/yaml\\\">text/yaml</option> -->\\n\\t\\t</select>\\n\\n\\t</div>\\n\\n\\t<div class = \\\"right-bar\\\">\\n\\t\\t<label class = \\\"wide\\\" cv-if = \\\"outputCanHaveHeaders\\\">\\n\\t\\t\\t<input type = \\\"checkbox\\\" cv-bind = \\\"outputHeaders\\\" value = \\\"1\\\" />\\n\\t\\t\\toutput has headers\\n\\t\\t</label>\\n\\t\\t<button cv-on = \\\"click:switch(event)\\\">⇅</button>\\n\\t</div>\\n\\n</div>\\n\\n<label class = \\\"bordered column\\\">\\n\\t<textarea cv-bind = \\\"output\\\" class = \\\"output\\\" readonly=\\\"readonly\\\"></textarea>\\n\\toutput\\n</label>\\n\\n<div class = \\\"bordered status-bar\\\">\\n\\t[[status]]\\n</div>\\n\"","module.exports = \"<h1>Index of /</h1>\\n\\n<ul cv-each = \\\"links:link:title\\\">\\n\\t<li>\\n\\t\\t<a cv-link = \\\"[[link]]\\\">[[title]]</a>\\n\\t</li>\\n</ul>\\n\\n\"","import { Router   } from 'curvature/base/Router';\nimport { RuleSet }  from 'curvature/base/RuleSet';\nimport { Config }   from 'curvature/base/Config';\nimport { Model }    from 'curvature/model/Model';\nimport { View }     from 'curvature/base/View';\n\nimport { Form } from 'curvature/form/Form';\nimport { View as MultiField } from 'curvature/form/multiField/View';\n\nConfig.set('backend-origin', '//seanmorris-warehouse.herokuapp.com');\n\nif(location.host == 'localhost:3333')\n{\n\tConfig.set('backend-origin', '//localhost:2020');\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n\tfetch(Config.get('backend-origin'));\n\n\tconst routes = {\n\n\t\t'': () => {\n\n\t\t\tconst view = View.from(require('./home.html'));\n\n\t\t\tview.args.links = {\n\n\t\t\t\thome: '/'\n\n\t\t\t\t, 'type changer': 'type-changer'\n\n\t\t\t\t, streams: 'streams'\n\n\t\t\t\t// , database: 'database'\n\n\t\t\t};\n\n\t\t\treturn view;\n\t\t}\n\n\t\t, database: () => {\n\n\t\t\treturn false;\n\n\t\t\tconst view = View.from(require('./database.html'));\n\n\t\t\tview.args.columns = ['a','b'];\n\t\t\tview.args.backend = Config.get('backend-origin');\n\n\t\t\tview.args.bindTo('columns', (v,k,t,d,vv,kk,tt,dd) => {\n\t\t\t\tconsole.log(JSON.stringify(tt));\n\t\t\t}, {children:true,wait:0});\n\n\t\t\tview.createTable = event => {\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tconsole.log(event.target);\n\n\t\t\t\tfetch(event.target.action, {\n\t\t\t\t\tmethod: event.target.method\n\t\t\t\t\t, body: new FormData(event.target)\n\t\t\t\t\t, headers: {Accept: 'text/csv', 'Ids-Output-Headers': true}\n\t\t\t\t}).then(response => response.text()).then(response => {\n\n\t\t\t\t\tconsole.log(response);\n\n\t\t\t\t});\n\n\t\t\t};\n\n\t\t\tview.newColumn = () => {\n\t\t\t\tview.args.columns.push('');\n\t\t\t};\n\n\t\t\treturn view;\n\t\t}\n\n\t\t, 'streams': ({streamName}) => {\n\n\t\t\tconst view = View.from(require('./stream-index.html'));\n\n\t\t\tview.args.streams = [];\n\n\t\t\tconst url = Config.get('backend-origin') + '/activeStreams';\n\t\t\tconst options = {headers: {Accept: 'text/json'}};\n\n\t\t\tfetch(url, options).then(response => response.json()).then(streams => {\n\t\t\t\tview.args.streams = streams;\n\t\t\t});\n\n\t\t\tview.openStream = event => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst path = `streams/${view.args.newStream}`;\n\t\t\t\tconsole.log(path);\n\t\t\t\tRouter.go(path, false);\n\t\t\t};\n\n\t\t\treturn view;\n\t\t}\n\n\t\t, 'streams/%streamName': ({streamName}) => {\n\t\t\tconst view = View.from(require('./streams.html'));\n\n\n\t\t\tview.args.streamName = streamName;\n\n\t\t\tview.args.received = 0;\n\t\t\tview.args.eventLog = [];\n\n\t\t\tconst eventBuffer  = [];\n\n\t\t\tconst onServerEvent = event => {\n\t\t\t\tview.args.received++;\n\n\t\t\t\teventBuffer.unshift({\n\t\t\t\t\tclass:  'ServerEvent'\n\t\t\t\t\t, data: JSON.parse(event.data)\n\t\t\t\t\t, id:   event.lastEventId\n\t\t\t\t});\n\n\t\t\t\tview.onNextFrame(()=>{\n\t\t\t\t\tview.args.eventLog.unshift(...eventBuffer.splice(0));\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst url = Config.get('backend-origin') + '/subscribe/' + streamName;\n\n\t\t\tconst eventSource = new EventSource(url, {credentials:'include'});\n\n\t\t\tview.onRemove(()=>eventSource.close());\n\n\t\t\teventSource.addEventListener('ServerEvent', onServerEvent);\n\n\t\t\tview.onRemove(()=>{\n\t\t\t\teventSource.removeEventListener('happened', onServerEvent);\n\t\t\t});\n\n\t\t\tview.args.bindTo('inputType', v =>\n\t\t\t\tview.args.inputCanHaveHeaders = v && v.substr(-2,2) === 'sv'\n\t\t\t);\n\n\t\t\tview.publishMessage = (event) => {\n\t\t\t\tfetch(Config.get('backend-origin') + '/publish/' + streamName, {\n\t\t\t\t\tcredentials: 'include'\n\t\t\t\t\t, method:    'POST'\n\t\t\t\t\t, body:      view.args.input ?? String.fromCharCode(0x0)\n\t\t\t\t\t, headers: {\n\t\t\t\t\t\t'Content-Type': view.args.inputType\n\t\t\t\t\t\t, 'Ids-Input-Headers':  view.args.inputHeaders  ? 'true' : 'false'\n\t\t\t\t\t}\n\t\t\t\t}).then(response => response.text()).then(response => {\n\t\t\t\t\tview.args.output = response;\n\t\t\t\t\tview.args.status = 'ready.';\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tview.toJson = x => JSON.stringify(x);\n\n\t\t\treturn view;\n\t\t}\n\n\t\t, 'type-changer': () => {\n\n\t\t\tconst view = View.from(require('./form.html'));\n\n\t\t\tview.args.status = 'ready.';\n\n\t\t\tview.args.bindTo('inputType', v =>\n\t\t\t\tview.args.inputCanHaveHeaders = v && v.substr(-2,2) === 'sv'\n\t\t\t);\n\n\t\t\tview.args.bindTo('outputType', v =>\n\t\t\t\tview.args.outputCanHaveHeaders = v && v.substr(-2,2) === 'sv'\n\t\t\t);\n\n\t\t\tview.submitRequest = event => {\n\n\t\t\t\tview.args.status = 'executing request...';\n\n\t\t\t\tfetch(Config.get('backend-origin') + '/changeTypes', {\n\t\t\t\t\tmethod:    'POST'\n\t\t\t\t\t, body:    view.args.input\n\t\t\t\t\t, headers: {\n\t\t\t\t\t\t'Content-Type': view.args.inputType\n\t\t\t\t\t\t, 'Accept':     view.args.outputType\n\t\t\t\t\t\t, 'Ids-Output-Headers': view.args.outputHeaders ? 'true' : 'false'\n\t\t\t\t\t\t, 'Ids-Input-Headers':  view.args.inputHeaders  ? 'true' : 'false'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(response => response.text())\n\t\t\t\t.then(response => {\n\t\t\t\t\tview.args.output = response;\n\t\t\t\t\tview.args.status = 'ready.';\n\t\t\t\t})\n\t\t\t};\n\n\t\t\tview.switch = event => {\n\t\t\t\tconst outputHeaders = view.args.outputHeaders;\n\t\t\t\tconst inputHeaders  = view.args.inputHeaders;\n\n\t\t\t\tconst outputType = view.args.outputType;\n\t\t\t\tconst inputType  = view.args.inputType;\n\n\t\t\t\tview.args.outputType = inputType;\n\t\t\t\tview.args.inputType  = outputType;\n\n\t\t\t\tview.args.outputHeaders = inputHeaders;\n\t\t\t\tview.args.inputHeaders  = outputHeaders;\n\n\t\t\t\t[view.args.input, view.args.output] = [view.args.output, view.args.input];\n\t\t\t};\n\n\t\t\treturn view;\n\t\t}\n\t};\n\n\tconst view = View.from('[[content]]');\n\n\tRuleSet.add('body', view);\n\tRuleSet.apply();\n\tRouter.listen(view, routes);\n});\n","module.exports = \"<h1>Streams</h1>\\n\\n<p><a cv-link = \\\"/\\\">home</a></p>\\n\\nOpen stream by name:\\n\\n<div class = \\\"row\\\" style = \\\"max-width: 20em;\\\">\\n\\t<form cv-on = \\\"submit:openStream(event)\\\">\\n\\t\\t<input cv-bind = \\\"newStream\\\" placeholder = \\\"enter a stream name\\\">\\n\\t\\t<input type = \\\"submit\\\" class = \\\"createStream\\\" value = \\\"open stream\\\">\\n\\t</form>\\n</div>\\n\\n<h2>Active Streams</h2>\\n\\n<ul cv-each = \\\"streams:stream\\\">\\n\\t<li><a cv-link = \\\"/streams/[[stream]]\\\">[[stream]]</a></li>\\n</ul>\\n\"","module.exports = \"<h1>[[streamName]]</h1>\\n\\n<p><a cv-link = \\\"/streams\\\">back</a></p>\\n\\n<label class = \\\"bordered column\\\">\\n\\tinput\\n\\t<textarea cv-bind = \\\"input\\\" class = \\\"input\\\"></textarea>\\n</label>\\n\\n<div class = \\\"mid-bar\\\">\\n\\n\\t<div class = \\\"left-bar\\\">\\n\\n\\t\\t<label cv-if = \\\"inputCanHaveHeaders\\\">\\n\\t\\t\\tinput has headers\\n\\t\\t\\t<input type = \\\"checkbox\\\" cv-bind = \\\"inputHeaders\\\" value = \\\"1\\\" />\\n\\t\\t</label>\\n\\n\\t</div>\\n\\n\\t<div class = \\\"center-bar\\\">\\n\\n\\t\\t<select cv-bind = \\\"inputType\\\">\\n\\t\\t\\t<option value = \\\"text/plain\\\">text/plain</option>\\n\\t\\t\\t<option value = \\\"text/csv\\\">text/csv</option>\\n\\t\\t\\t<option value = \\\"text/tsv\\\">text/tsv</option>\\n\\t\\t\\t<option value = \\\"text/json\\\">text/json</option>\\n\\t\\t\\t<!-- <option value = \\\"text/yaml\\\">text/yaml</option> -->\\n\\t\\t</select>\\n\\n\\t\\t<button cv-on = \\\"click:publishMessage(event)\\\"> publishMessage → </button>\\n\\t</div>\\n\\n</div>\\n\\n<label class = \\\"bordered column\\\">\\n\\n\\t<ul class = \\\"event-log\\\" cv-each = \\\"eventLog:event:i\\\">\\n\\t\\t<li cv-with = \\\"event\\\" cv-carry = \\\"i\\\">\\n\\t\\t\\tid: [[id]] user: [[data.user]] payload: [[data.payload|toJson]]\\n\\t\\t</li>\\n\\t</ul>\\n\\n\\t<div class = \\\"bottom\\\">output ([[received]] messages)</div>\\n\\n</label>\\n\""]}
!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,u=o.length;a<u;a++)".."===(n=o[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,r){var o,i={id:t,exports:{},hot:p&&p.createHot(t)};return n[t]=i,r(i.exports,(o=t,function(t){var n=a(u(o),t);return e.require(n,o)}),i),i.exports},c=function(e){var t=r[e];return t&&e!==t?c(t):e},l=function(e,r){null==r&&(r="/");var i=c(e);if(o.call(n,i))return n[i].exports;if(o.call(t,i))return s(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};l.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,i){if(e&&"object"==typeof e)for(var a in e)o.call(e,a)&&l.register(a,e[a]);else t[e]=i,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");o.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(v.test(e)){var n=e.replace(v,"");o.call(r,n)||(r[n]=e)}}(e)},l.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var p=e._hmr&&new e._hmr(function(e,t){return c(a(u(e),t))},l,t,n);l._cache=n,l.hmr=p&&p.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},o=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var i=n.split("/"),a=i.lastIndexOf("node_modules"),u=i.slice(0,a).join("/");return o(t,u)}}return r};return function(i){if(i in t&&(i=t[i]),i){if("."!==i[0]&&n){var a=o(i,n);if(a!==r)return a}return e(i)}}};require.register("curvature/base/Bag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var r=n("./Bindable"),o=n("./Mixin"),i=n("../mixin/EventTargetMixin");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=c(t);if(n){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,o.Mixin["with"](i.EventTargetMixin));var t,n,c,l=s(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=l.call(this)).meta=Symbol("meta"),e.content=new Map,e.list=r.Bindable.makeBindable([]),e.current=0,e.type=void 0,e.length=0,e.changeCallback=t,e}return t=f,(n=[{key:"has",value:function(e){return this.content.has(e)}},{key:"add",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var n,r=(n=this.current++,Number(n));this.content.set(e,r),this.list[r]=e,this.changeCallback&&this.changeCallback(e,this.meta,f.ITEM_ADDED,r);var o=new CustomEvent("added",{detail:{item:e,id:r}});this.dispatchEvent(o),this.length=this.size}}}},{key:"remove",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var n=this.content.get(e);delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,f.ITEM_REMOVED,n);var r=new CustomEvent("removed",{detail:{item:e,id:n}});return this.dispatchEvent(r),this.length=this.size,e}}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&a(t.prototype,n),c&&a(t,c),f}();t.Bag=l,Object.defineProperty(l,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(l,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,r,o){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var l=Symbol("ref"),f=Symbol("original"),v=Symbol("deck"),p=Symbol("binding"),d=Symbol("subBinding"),h=Symbol("bindingAll"),y=Symbol("isBindable"),b=Symbol("wrapping"),m=Symbol("Names"),g=Symbol("executing"),w=Symbol("stack"),_=(Symbol("object"),Symbol("wrapped")),O=Symbol("unwrapped"),j=Symbol("getProto"),k=Symbol("onGet"),S=Symbol("onAllGet"),P=Symbol("bindChain"),R=Symbol("Descriptors"),T=Symbol("NoGetters"),A=Object.getPrototypeOf(Int8Array),E=Set.prototype[Symbol.iterator],C=Map.prototype[Symbol.iterator],x=globalThis,B=[x.Node,x.File,x.Map,x.Set,x.WeakMap,x.WeakSet,x.ArrayBuffer,x.ResizeObserver,x.MutationObserver,x.PerformanceObserver,x.IntersectionObserver].filter(function(e){return"function"==typeof e}),N=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,a;return n=t,a=[{key:"isBindable",value:function(e){return!(!e||!e[y])&&e[y]===t}},{key:"onDeck",value:function(e,t){return e[v][t]||!1}},{key:"ref",value:function(e){return e[l]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,n){n=n||new Map;var r={};if(e instanceof A||e instanceof ArrayBuffer){var o=e.slice(0);return n.set(e,o),o}var i=Object.keys(e);for(var a in i){var s=i[a];if("___"!==s.substring(0,3)){var c=n.get(e[s]);if(c)r[s]=c;else if(e[s]!==e){if(e[s]&&"object"===u(e[s])){var l=e[s];t.isBindable(e[s])&&(l=e[s][f]),r[s]=this.shuck(l,n)}else r[s]=e[s];n.set(e[s],r[s])}else n.set(e[s],r),r[s]=r}}return t.isBindable(e)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(n){var i=this;if(!n||!["function","object"].includes(u(n)))return n;if(B.filter(function(e){return n instanceof e}).length||Object.isSealed(n)||!Object.isExtensible(n))return n;if(n[l])return n[l];if(n[p])return n;Object.defineProperty(n,l,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(n,f,{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(n,v,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,p,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,d,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,h,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,y,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(n,g,{enumerable:!1,writable:!0}),Object.defineProperty(n,b,{enumerable:!1,writable:!0}),Object.defineProperty(n,w,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,_,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,O,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,R,{configurable:!1,enumerable:!1,writable:!1,value:new Map});Object.defineProperty(n,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!1;if(Array.isArray(r)){var c=r.map(function(t){return e(t,o,a)});return function(){return c.map(function(e){return e()})}}if(r instanceof Function&&(a=o||{},o=r,s=!0),a.delay>=0&&(o=i.wrapDelayCallback(o,a.delay)),a.throttle>=0&&(o=i.wrapThrottleCallback(o,a.throttle)),a.wait>=0&&(o=i.wrapWaitCallback(o,a.wait)),a.frame&&(o=i.wrapFrameCallback(o,a.frame)),a.idle&&(o=i.wrapIdleCallback(o)),s){var l=n[h].length;if(n[h].push(o),!("now"in a)||a.now)for(var f in n)o(n[f],f,n,!1);return function(){delete n[h][l]}}if(n[p][r]||(n[p][r]=new Set),a.children){var v=o;o=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=r[0],s=n[d].get(v);if(s&&(n[d].delete(v),s()),"object"===u(i)){var c=t.make(i);t.isBindable(c)&&n[d].set(v,c.bindTo(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,r.concat(t))},Object.assign({},a,{children:!1}))),v.apply(void 0,r)}else v.apply(void 0,r)}}n[p][r].add(o),"now"in a&&!a.now||o(n[r],r,n,!1);var y=function(){var e=n[d].get(o);e&&(n[d].delete(o),e()),n[p][r]&&n[p][r].has(o)&&n[p][r].delete(o)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove(function(){return y}),y}});Object.defineProperty(n,P,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var r=e.split("."),o=r.shift(),a=r.slice(0),u=[];return u.push(n.bindTo(o,function(e,n,r,o){var s=a.join(".");0!==a.length?(void 0===e&&(e=r[n]=i.makeBindable({})),u=u.concat(e[P](s,t))):t(e,n,r,o)})),function(){return u.map(function(e){return e()})}}}),Object.defineProperty(n,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n.___before___.length;n.___before___.push(e);var r=!1;return function(){r||(r=!0,delete n.___before___[t])}}}),Object.defineProperty(n,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n.___after___.length;n.___after___.push(e);var r=!1;return function(){r||(r=!0,delete n.___after___[t])}}});if(Object.defineProperty(n,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in n[h])if(n[h][e])return!0;for(var t in n[p])for(var r in n[p][t])if(n[p][t][r])return!0;return!1}}),!n[T]){var a=function(e){n[e]&&n[e]instanceof Object&&!n[e]instanceof Promise&&(B.filter(function(t){return n[e]instanceof t}).length||!Object.isExtensible(n[e])||Object.isSealed(n[e])||(n[e]=t.make(n[e])))};for(var s in n)a(s)}var c=n[R],x=n[_],N=n[w],F={get:function(r,i){if(x.has(i))return x.get(i);if(i===l||i===f||"apply"===i||"isBound"===i||"bindTo"===i||"__proto__"===i||"constructor"===i)return n[i];var a;if(c.has(i)?a=c.get(i):(a=Object.getOwnPropertyDescriptor(n,i),c.set(i,a)),a&&!a.configurable&&!a.writable)return n[i];if(S in n)return n[S](i);if(k in n&&!(i in n))return n[k](i);if(a&&!a.configurable&&!a.writable)return x.set(i,n[i]),n[i];if("function"==typeof n[i]){if(m in n[i])return n[i];Object.defineProperty(n[O],i,{configurable:!1,enumerable:!1,writable:!1,value:n[i]});var u=Object.getPrototypeOf(n)[i]===n[i],s="function"==typeof Promise&&n instanceof Promise||"function"==typeof Map&&n instanceof Map||"function"==typeof Set&&n instanceof Set||"function"==typeof C&&n.prototype===C||"function"==typeof E&&n.prototype===E||"function"==typeof E&&n.prototype===E||"function"==typeof WeakMap&&n instanceof WeakMap||"function"==typeof WeakSet&&n instanceof WeakSet||"function"==typeof Date&&n instanceof Date||"function"==typeof A&&n instanceof A||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"function"==typeof EventTarget&&n instanceof EventTarget||"function"==typeof ResizeObserver&&n instanceof ResizeObserver||"function"==typeof MutationObserver&&n instanceof MutationObserver||"function"==typeof PerformanceObserver&&n instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&n instanceof IntersectionObserver||"function"==typeof n[Symbol.iterator]&&"next"===i?n:n[l],v=function(){n[g]=i,N.unshift(i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var c,l,f=o(n.___before___);try{for(f.s();!(c=f.n()).done;)(0,c.value)(n,i,N,n,r)}catch(e){f.e(e)}finally{f.f()}if(new.target)l=e(n[O][i],r);else{var v=n[O][i];l=u?v.apply(s||n,r):v.apply(void 0,r)}var p,d=o(n.___before___);try{for(d.s();!(p=d.n()).done;)(0,p.value)(n,i,N,n,r)}catch(e){d.e(e)}finally{d.f()}return n[g]=null,N.shift(),l};(v[m]=v[m]||new WeakMap).set(n,i),v[S]=function(e){var t=v[m].get(n);return n[t][e]};var p=t.make(v);return x.set(i,p),p}return n[i]},set:function(e,r,i){if(r===f)return!0;if(void 0!==n[v][r]&&n[v][r]===i)return!0;if("string"==typeof r&&"___"===r.substring(0,3)&&"___"===r.slice(-3))return!0;if(e[r]===i)return!0;for(var a in i&&i instanceof Object&&(B.filter(function(e){return n instanceof e}).length||!Object.isExtensible(n)||Object.isSealed(n)||n[T]||(i=t.makeBindable(i))),n[v][r]=i,n[h])n[h][a]&&n[h][a](i,r,e,!1);var u=!1;if(r in n[p]){var s,c=o(n[p][r]);try{for(c.s();!(s=c.n()).done;)!1===(0,s.value)(i,r,e,!1,e[r])&&(u=!0)}catch(e){c.e(e)}finally{c.f()}}if(delete n[v][r],!u){var l=Object.getOwnPropertyDescriptor(e,r);e instanceof File&&"lastModifiedDate"==r||l&&!l.writable||e[r]!==i||(e[r]=i)}var d=Reflect.set(e,r,i);if(Array.isArray(e)&&n[p].length)for(var y in n[p].length)(0,n[p].length[y])(e.length,"length",e,!1,e.length);return d},construct:function(o,i){var a="constructor";for(var u in o.___before___)o.___before___[u](o,a,n[w],void 0,i);var s=t.make(e(o[f],r(i)));for(var c in o.___after___)o.___after___[c](o,a,n[w],s,i);return s},getPrototypeOf:function(e){return j in n?n[j]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){if(!(t in e))return!0;if(c.has(t)){var r=c.get(t);if(r&&!r.configurable)return!1;c.delete(t)}for(var o in n[h])n[h][o](void 0,t,e,!0,e[t]);if(t in n[p])for(var i in n[p][t])n[p][t][i]&&n[p][t][i](void 0,t,e,!0,e[t]);return delete e[t],!0}};return n[T]&&delete F.get,Object.defineProperty(n,l,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(n,F)}),n[l]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)})(e[_],e[p],e[h],e.___after___,e.___before___)}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.split("."),i=o[0];o.length;){if(r&&1===o.length)return[e.NoGetters?this.make(e):e,o.shift(),i];!(!(n=o.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=e.NoGetters?this.make(e[n]):e[n]}return[this.make(e),n,i]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,o)},t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}],(i=null)&&s(n.prototype,i),a&&s(n,a),t}();t.Bindable=N,c(N,"waiters",new WeakMap),c(N,"throttles",new WeakMap),Object.defineProperty(N,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:k}),Object.defineProperty(N,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.defineProperty(N,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:j}),Object.defineProperty(N,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:S})}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,o;return n=t,o=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",o=0;n&&(o=1e3*n+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[r]||(this.bucket[r]={}),this.bucket[r][e]={expiration:o,value:t}}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[n]&&this.bucket[n][e]&&(0==this.bucket[n][e].expiration||this.bucket[n][e].expiration>(new Date).getTime())?this.bucket[n][e].value:t}}],(r=null)&&e(n.prototype,r),o&&e(n,o),t}();t.Cache=n}()}),require.register("curvature/base/Config.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r={};try{r=n("/Config").Config||{}}catch(e){!0===window.devMode&&console.error(e)}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,o;return n=t,o=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var o=t[r];for(var i in"string"==typeof o&&(o=JSON.parse(o)),o){var a=o[i];return this.configs[i]=a}}return this}}],(r=null)&&e(n.prototype,r),o&&e(n,o),t}();t.Config=o,Object.defineProperty(o,"configs",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,o;return n=t,o=[{key:"mapTags",value:function(e,t,n,r,o){var i=[],a=!0;r&&(a=!1);var u=!1,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return o&&e===o&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;s.nextNode();)i.push(n(s.currentNode,s));return i}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,function(e){e.dispatchEvent(n)})}}],(r=null)&&e(n.prototype,r),o&&e(n,o),t}();t.Dom=n}()}),require.register("curvature/base/Mixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=n("./Bindable");function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=Symbol("constructor"),y=(Symbol("mixinList"),function(){function t(){p(this,t)}var n,a,u;return n=t,u=[{key:"from",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var a=c(u);function u(){var e;p(this,u);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];var v,d=e=a.call.apply(a,[this].concat(s)),h=i(r);try{for(h.s();!(v=h.n()).done;){var y=v.value;switch(y[t.Constructor]&&y[t.Constructor].apply(f(e)),o(y)){case"object":t.mixObject(y,f(e))}}}catch(e){h.e(e)}finally{h.f()}return l(e,d)}return u}()}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.map(function(n){switch(o(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[Object].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=i(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;"function"!=typeof e[o]?t[o]=e[o]:t[o]=e[o].bind(t)}}catch(e){r.e(e)}finally{r.f()}var a,u=i(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=i(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var o=n.value;t.prototype[o]=e.prototype[o].bind(t.prototype)}}catch(e){r.e(e)}finally{r.f()}var a,u=i(Object.getOwnPropertySymbols(e.prototype));try{for(u.s();!(a=u.n()).done;){var s=a.value;t.prototype[s]=e.prototype[s].bind(t.prototype)}}catch(e){u.e(e)}finally{u.f()}var c,l=i(Object.getOwnPropertyNames(e));try{var f=function(){var n=c.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(l.s();!(c=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}var v,p=i(Object.getOwnPropertySymbols(e));try{var d=function(){var n=v.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(p.s();!(v=p.n()).done;)d()}catch(e){p.e(e)}finally{p.f()}}},{key:"mix",value:function(t){for(var n={},o={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),s=/^(before|after)__(.+)/,c=i(Object.getOwnPropertyNames(e));try{var l=function(){var o=t.value,i=o.match(s);if(i){switch(i[1]){case"before":a.___before(function(t,n,a,u,s){if(n===i[2])return e[o].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(t,n,a,u,s){if(n===i[2])return e[o].bind(u).apply(void 0,r(s))})}return"continue"}return n[o]?"continue":"function"!=typeof e[o]?"continue":void(n[o]=e[o])};for(c.s();!(t=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}var f,v=i(u);try{var p=function(){var t=f.value,n=t.match(s);if(n){switch(n[1]){case"before":a.___before(function(o,i,a,u,s){if(i===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(o,i,a,u,s){if(i===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))})}return"continue"}return o[t]?"continue":"function"!=typeof e.prototype[t]?"continue":void(o[t]=e.prototype[t])};for(v.s();!(f=v.n()).done;)p()}catch(e){v.e(e)}finally{v.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var c in n)t[c]=n[c].bind(t);var l=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o[e].apply(this,n)}};for(var f in o)l(f);return a}}],(a=null)&&d(n.prototype,a),u&&d(n,u),t}());t.Mixin=y,y.Constructor=h}()}),require.register("curvature/base/Model.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=n("./Cache"),r=n("./Bindable");n("./Repository");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.repository=e}var n,i,a;return n=t,(i=[{key:"consume",value:function(n){for(var o in n){var i=n[o];if(n[o]instanceof Object&&n[o].class&&n[o].publicId){var a="".concat(n[o].class,"::").concat(n[o].publidId),u=e.Cache.load(a,!1,"model-type-repo");i=r.Bindable.makeBindable(new t(this.repository)),u&&(i=u),i.consume(n[o]),e.Cache.store(a,i,0,"model-type-repo")}this[o]=i}}}])&&o(n.prototype,i),a&&o(n,a),t}();t.Model=i}()}),require.register("curvature/base/Repository.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Repository=void 0;var e=n("./Bindable"),r=n("./Router"),o=n("./Cache"),i=n("./Model"),a=n("./Bag"),u=n("../form/Form"),s=n("../form/multiField/FormWrapper");function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e}var n,f,v;return n=t,v=[{key:"loadPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(this.uri,e).then(function(e){return e})}},{key:"domCache",value:function(e,t){}},{key:"load",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][e]?Promise.resolve(this.objects[this.uri][e]):this.request(this.uri+"/"+e).then(function(e){})}},{key:"form",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.uri+"/create";return e&&(t=this.uri+"/"+e+"/edit"),this.request(t).then(function(e){return e})}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var r in n||(n=new FormData),e){var o=r;t&&(o="".concat(t,"[").concat(o,"]")),e[r]&&"object"!==c(e[r])?n.append(o,e[r]):this.encode(e[r],o,n)}return n}},{key:"onResponse",value:function(e){return this._onResponse||(this._onResponse=new a.Bag),this._onResponse.add(e)}},{key:"request",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s="GET",c=null,l={};r&&(l=r),this._onResponse||(this._onResponse=new a.Bag),this.runningRequests||(this.runningRequests={}),l.api=l.api||"json",t=Object.keys(l).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(l[e])}).join("&");var f;if(f=e+"?"+t,!o&&this.runningRequests[f])return this.runningRequests[f];o&&(i=!1,s="POST",c=o instanceof FormData?o:this.encode(o));var v=new XMLHttpRequest;if("responseType"in u&&(v.responseType=u.responseType),!o&&i&&this.cache&&this.cache[f])return Promise.resolve(this.cache[f]);var p='script[data-uri="'+f+'"]',d=document.querySelector(p);if(!o&&i&&d){var h=JSON.parse(d.innerText);return Promise.resolve(h)}v.withCredentials=!("withCredentials"in u)||u.withCredentials,document.createElement("a").href=f,o||(v.timeout=u.timeout||15e3,this.xhrs[f]=v);var y=new Promise(function(e,t){if(o&&"progressUp"in u&&(v.upload.onprogress=u.progressUp),"progressDown"in u&&(v.onprogress=u.progressDown),v.onreadystatechange=function(){var r;if(4===v.readyState)if(delete n.xhrs[f],delete n.runningRequests[f],n.cache||(n.cache={}),"application/json"==v.getResponseHeader("Content-Type")||"application/json; charset=utf-8"==v.getResponseHeader("Content-Type")||"text/json"==v.getResponseHeader("Content-Type")||"text/json; charset=utf-8"==v.getResponseHeader("Content-Type"))if((r=JSON.parse(v.responseText))&&0==r.code){var o=document.querySelector('script[data-uri="'+f+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,o||((o=document.createElement("script")).type="text/json",o.setAttribute("data-hack","application/ld+json-NOT!"),o.setAttribute("data-uri",f),document.head.appendChild(o)),o.innerText=JSON.stringify(r));var i=n._onResponse.items();for(var a in i)i[a](r,!0);r._http=v.status,200===v.status?e(r):t(r)}else{var u=n._onResponse.items();for(var s in u)u[s](r,!0);t(r)}else{var c=n._onResponse.items();for(var l in c)c[l](v,!0);200===v.status?e(v):t(v)}},v.open(s,f,!0),u.headers)for(var r in u.headers)v.setRequestHeader(r,u.headers[r]);v.send(c)});return o||(this.runningRequests[f]=y),y}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/^.$/;for(var t in this.xhrs)this.xhrs[t]&&t.match(e)&&(this.xhrs[t].abort(),delete this.xhrs[t])}}],(f=[{key:"get",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=this.uri+"/"+e,s=o.Cache.load(u+r.Router.queryToString(r.Router.queryOver(a),!0),!1,"model-uri-repo");return!i&&s?Promise.resolve(s):t.request(u,a).then(function(e){return n.extractModel(e.body)})}},{key:"page",value:function(){var e=this,n=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1?arguments[1]:void 0);return t.request(this.uri,n).then(function(t){var n=[];for(var r in t.body){var o=t.body[r];n.push(e.extractModel(o))}return t.body=n,t})}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.uri+"/create";return e&&(o=this.uri+"/"+e+"/edit"),n?t.request(o,{api:"json"},n).then(function(e){return e.body}):t.request(o).then(function(e){var t=new u.Form(e.meta.form,r);return new s.FormWrapper(t,o,"POST",r)})}},{key:"extractModel",value:function(t){var n=e.Bindable.makeBindable(new i.Model(this));n.consume(t);this.uri,n.publicId;if(n.class){var r="".concat(n.class,"::").concat(n.publidId);o.Cache.load(r,!1,"model-type-repo")}return n}}])&&l(n.prototype,f),v&&l(n,v),t}();t.Repository=f,f.xhrs=[]}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e=n("./View"),r=(n("./Cache"),n("./Config")),o=n("./Routes");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Symbol("NotFound"),c=Symbol("Internal"),l=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a,c;return n=t,c=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){for(var r in n.preventDefault(),n.state&&"routedId"in n.state?n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e),t.query)delete t.query[r];Object.assign(t.query,t.queryOver({}))};window.addEventListener("popstate",r),window.addEventListener("cvUrlChanged",r);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash),this.go(!1!==o?o:"/")}},{key:"go",value:function(e,t){var n=r.Config.get("title");for(var o in n&&(document.title=n),"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState({routedId:this.routeCount,prev:this.prevPath,url:location.pathname},null,e):location.pathname!==e&&history.pushState({routedId:++this.routeCount,prev:this.prevPath,url:location.pathname},null,e),t||(!1===t&&(this.path=null),"#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged"))),this.query)delete this.query[o];Object.assign(this.query,this.queryOver({})),this.prevPath=e}},{key:"match",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==t||i){this.queryString=location.search,this.path=t;var a=this.prevPath,u=n.args.content,c=this.routes||n.routes||o.Routes.dump();new URLSearchParams(location.search);for(var l in this.query)delete this.query[l];Object.assign(this.query,this.queryOver({}));var f={},v=!1,p="";for(var d in t=t.substr(1).split("/"),this.query)f[d]=this.query[d];e:for(var h in c){var y=h.split("/");if(!(y.length<t.length&&"*"!==y[y.length-1])){for(var b in y)if("%"==y[b].substr(0,1)){var m=null,g=/^%(\w+)\??/.exec(y[b]);if(g&&g[1]&&(m=g[1]),!m)throw new Error("".concat(y[b],' is not a valid argument segment in route "').concat(h,'"'));if(t[b])f[m]=t[b];else{if("?"!=y[b].substr(y[b].length-1,1))continue e;f[m]=""}}else if("*"!==y[b]&&t[b]!==y[b])continue e;v=h,p=c[h],"*"===y[y.length-1]&&(f.pathparts=t.slice(y.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:a,root:n,selected:v,routes:c}});if(document.dispatchEvent(w)){if(!i&&n&&u&&p instanceof Object&&u instanceof p&&!(p instanceof Promise)&&u.update(f))return n.args.content=u,!0;try{v in c||(c[v]=c[s]);var _=function(t){return"function"==typeof c[t]?c[t].prototype instanceof e.View?new c[t](f):c[t](f):c[t]};return!1===(p=_(v))&&(p=_(s)),p instanceof Promise?p.then(function(e){r.update(n,t,e,c,v,f,i)}).catch(function(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:c,selected:v}})),r.update(n,t,window.devMode?String(e):"Error: 500",c,v,f,i),e}):this.update(n,t,p,c,v,f,i)}catch(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:c,selected:v}})),this.update(n,t,window.devMode?String(e):"Error: 500",c,v,f,i),e}}}}},{key:"update",value:function(t,n,r,o,i,a,u){if(t){var s=this.prevPath,c=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:o,selected:i}});!1!==r&&(t.args.content instanceof e.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(c)&&(t.args.content=r),r instanceof e.View&&(r.pause(!1),r.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:o,selected:i}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={},o=i(new URLSearchParams(location.search));try{for(o.s();!(e=o.n()).done;){var a=e.value;r[a[0]]=a[1]}}catch(e){o.e(e)}finally{o.f()}return delete(n=Object.assign(n,r,t)).api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var o in t||(r=this.queryOver(e)),r)""!==r[o]&&n.push(o+"="+encodeURIComponent(r[o]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var o=this.queryToString(r,!0);this.go(location.pathname+(o?"?"+o:""),n)}}],(a=null)&&u(n.prototype,a),c&&u(n,c),t}();t.Router=l,Object.defineProperty(l,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(l,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(l,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(l,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:c}),Object.defineProperty(l,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:s})}()}),require.register("curvature/base/Routes.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var r={};try{Object.assign(r,n("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,o;return n=t,o=[{key:"get",value:function(e){return this.routes[e]}},{key:"dump",value:function(){return this.routes}}],(r=null)&&e(n.prototype,r),o&&e(n,o),t}();t.Routes=o,Object.defineProperty(o,"routes",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;n("./Dom");var e=n("./Tag"),r=n("./View");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,u;return n=t,u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i,a=this.globalRules[n][r],u=this.wrap(e,a,t),s=o(e.querySelectorAll(n));try{for(s.s();!(i=s.n()).done;){u(i.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(n=function(e){return function(){return e}}(n)),function(t){for(var i in void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:[]}),t.___cvApplied___)if(n==t.___cvApplied___[i])return;var a,u;o&&(a=u=o,o.viewList&&(u=o.viewList.parent)),u&&u.onRemove(function(){return t.___cvApplied___.splice(0)});var s,c=new e.Tag(t,u,null,void 0,a),l=c.element.parentNode,f=c.element.nextSibling,v=n(c);if(!1!==v&&t.___cvApplied___.push(n),v instanceof HTMLElement&&(v=new e.Tag(v)),v instanceof e.Tag){if(!v.element.contains(c.element)){for(;c.element.firstChild;)v.element.appendChild(c.element.firstChild);c.remove()}f?l.insertBefore(v.element,f):l.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof r.View&&(v=new v({},o)),v instanceof r.View&&(o&&(o.cleanup.push((s=v,function(){s.remove()})),o.cleanup.push(o.args.bindTo(function(e,t,n){n[t]=e,v.args[t]=e})),o.cleanup.push(v.args.bindTo(function(e,t,n,r){n[t]=e,o.args[t]=e}))),c.clear(),v.render(c.element))}}}],(i=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var i in this.rules[r]){var a,u=this.rules[r][i],s=t.wrap(e,u,n),c=o(e.querySelectorAll(r));try{for(c.s();!(a=c.n()).done;){s(a.value)}}catch(e){c.e(e)}finally{c.f()}}}}])&&a(n.prototype,i),u&&a(n,u),t}();t.RuleSet=u}()}),require.register("curvature/base/SetMap.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,r,o){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=void 0;var u=function(){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n="_map",r=new Map,n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var n,i,u;return n=t,(i=[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}(this.get(e));try{for(n.s();!(t=n.n()).done;){return t.value}}catch(e){n.e(e)}finally{n.f()}}},{key:"add",value:function(e,t){var n=this._map.get(e);return n||this._map.set(e,n=new Set),n.add(t)}},{key:"remove",value:function(e,t){var n=this._map.get(e);if(n){var r=n.delete(t);return n.size||this._map.delete(e),r}}},{key:"values",value:function(){return e(Set,r(r(this._map.values()).map(function(e){return r(e.values())})))}}])&&a(n.prototype,i),u&&a(n,u),t}();t.SetMap=u}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function t(n,r,o,i,a){var u,s=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n){var c=document.createRange().createContextualFragment(n);n=c.firstChild}return this.element=e.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=a,this.ref=o,this.index=i,this.cleanup=[],this[e.Bindable.OnAllGet]=function(e){return"function"==typeof s[e]?s[e]:s.node&&"function"==typeof s.node[e]?function(){var t;return(t=s.node)[e].apply(t,arguments)}:s.node&&e in s.node?s.node[e]:s[e]},this.style=(u=this,e.Bindable.make(function(e){if(u.node)for(var t in e)"-"===t[0]?u.node.style.setProperty(t,e[t]):u.node.style[t]=e[t]})),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t){s.element.style[t]=e}),this.proxy.bindTo(function(e,t){return t in n&&(n[t]=e),!1}),this.proxy}var n,o,i;return n=t,(o=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t])}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var o=function(){r.removeEventListener(e,t,n)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return i()}),i}}])&&r(n.prototype,o),i&&r(n,i),t}();t.Tag=o}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var r=n("./Bindable"),o=n("./ViewList"),i=n("./Router"),a=n("./Dom"),u=n("./Tag"),s=n("./Bag"),c=n("./RuleSet"),l=n("./Mixin"),f=(n("../mixin/PromiseMixin"),n("../mixin/EventTargetMixin"));function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function h(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=_(t);if(n){var i=_(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return w(t)}(this,r)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=Symbol("dontParse"),j=Symbol("expandBind"),k=Symbol("uuid"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(S,l.Mixin["with"](f.EventTargetMixin));var t,h,y,_=g(S);function S(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),e=_.call(this,t,n),Object.defineProperty(w(e),"args",{value:r.Bindable.make(t)}),Object.defineProperty(w(e),k,{value:e.constructor.uuid()}),Object.defineProperty(w(e),"nodesAttached",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(w(e),"nodesDetached",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(w(e),"_onRemove",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(w(e),"cleanup",{value:[]}),Object.defineProperty(w(e),"parent",{value:n}),Object.defineProperty(w(e),"views",{value:new Map}),Object.defineProperty(w(e),"viewLists",{value:new Map}),Object.defineProperty(w(e),"withViews",{value:new Map}),Object.defineProperty(w(e),"tags",{value:r.Bindable.make({})}),Object.defineProperty(w(e),"nodes",{value:r.Bindable.make([])}),Object.defineProperty(w(e),"timeouts",{value:new Map}),Object.defineProperty(w(e),"intervals",{value:[]}),Object.defineProperty(w(e),"frames",{value:[]}),Object.defineProperty(w(e),"ruleSet",{value:new c.RuleSet}),Object.defineProperty(w(e),"preRuleSet",{value:new c.RuleSet}),Object.defineProperty(w(e),"subBindings",{value:{}}),Object.defineProperty(w(e),"templates",{value:{}}),Object.defineProperty(w(e),"eventCleanup",{value:[]}),Object.defineProperty(w(e),"unpauseCallbacks",{value:new Map}),Object.defineProperty(w(e),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(w(e),"rendered",{value:new Promise(function(t,n){return Object.defineProperty(w(e),"renderComplete",{value:t})})}),e.template="",e.firstNode=null,e.lastNode=null,e.viewList=null,e.mainView=null,e.preserve=!1,e.removed=!1,e}return t=S,h=[{key:"_id",get:function(){return this[k]}},{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0};return requestAnimationFrame(function(){return function r(o){t.removed||n||(t.paused||e(Date.now()),requestAnimationFrame(r))}(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},o=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},i=setTimeout(o,e);return r.callback=o,r.timeout=i,this.timeouts.set(r.timeout,r),i}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,n=d(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),o=(r[0],r[1]);clearTimeout(o.timeout),this.timeouts.delete(o.timeout)}}catch(e){n.e(e)}finally{n.f()}})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,n=d(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),o=(r[0],r[1]);o.fired?this.timeouts.delete(o.timeout):(clearTimeout(o.timeout),o.paused=!0,o.time=Math.max(0,o.time-(Date.now()-o.created)))}}catch(e){n.e(e)}finally{n.f()}for(var i in this.intervals)clearInterval(this.intervals[i].timeout)}else{var a,u=d(this.timeouts);try{for(u.s();!(a=u.n()).done;){var s=p(a.value,2),c=(s[0],s[1]);c.paused&&(c.fired?this.timeouts.delete(c.timeout):(c.timeout=setTimeout(c.callback,c.time),c.paused=!1))}}catch(e){u.e(e)}finally{u.f()}for(var l in this.intervals)this.intervals[l].timeout.paused&&(this.intervals[l].timeout.paused=!1,this.intervals[l].timeout=setInterval(this.intervals[l].callback,this.intervals[l].time));var f,v=d(this.unpauseCallbacks);try{for(v.s();!(f=v.n()).done;){(0,p(f.value,2)[1])()}}catch(e){v.e(e)}finally{v.f()}this.unpauseCallbacks.clear()}var h,y=d(this.viewLists);try{for(y.s();!(h=y.n()).done;){var b=p(h.value,2);b[0];b[1].pause(!!e)}}catch(e){y.e(e)}finally{y.f()}for(var m in this.tags)if(Array.isArray(this.tags[m]))for(var g in this.tags[m])this.tags[m][g].pause(!!e);else this.tags[m].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof S&&(n=n.firstNode.parentNode),r instanceof S&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);this.dispatchEvent(new CustomEvent("render"));var o=this.template instanceof DocumentFragment?this.template.cloneNode(!0):S.templates.has(this.template),i=o?this.template instanceof DocumentFragment?o:S.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(o||this.template instanceof DocumentFragment||S.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(v(Array.from(i.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var a=n.getRootNode(),u=!1;if(a.isConnected&&("external",u=!0),r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(i,this.lastNode),0,u)this.attached(a,n),this.dispatchAttached(a,n);else{n.addEventListener("cvDomAttached",function e(r){r.target.isConnected&&(t.attached(a,n),t.dispatchAttached(a,n),n.removeEventListener("cvDomAttached",e))})}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:n||this,node:t,root:e,mainView:this}}));var r=this.nodesAttached.items();for(var o in r)r[o](e,t);this.dispatchDomAttached(n)}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).map(function(n){n.matches&&(a.Dom.mapTags(n,!1,function(n,r){n.matches&&n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}}))}),n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.nodesDetached.items();for(var o in r)r[o]()}if(n.append.apply(n,v(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=e.getRootNode();i.isConnected&&(this.attached(i,e),this.dispatchAttached(i,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;a.Dom.mapTags(e,!1,function(e,n){e[O]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)})}},{key:"mapExpandableTag",value:function(e){var t=e[j];t&&(t(),e[j]=!1);var n=p(r.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),o=n[0],i=n[1];return e.removeAttribute("cv-expand"),o[i]||(o[i]={}),o[i]=r.Bindable.make(o[i]),this.onRemove(e[j]=o[i].bindTo(function(t,n,r,o,i){o||void 0===t?e.removeAttribute(n,t):null!==t?e.setAttribute(n,t):e.setAttribute(n,"")})),e}},{key:"compileExpandableTag",value:function(e){return function(t){var n=e.cloneNode(!0),o=n.getAttribute("cv-expand"),i=r.Bindable.make(t.args[o]||{});n.removeAttribute("cv-expand");var a=function(e){if("name"===e||"type"===e)return"continue";var o=i.bindTo(e,function(e,t){return function(n){e.setAttribute(t,n)}}(n,e));t.onRemove(function(){o(),i.isBound()&&r.Bindable.clearBindings(i)})};for(var u in i)a(u);return n}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(e){var t=e.getAttribute("cv-attr").split(",").map(function(e){return e.split(":")});return e.removeAttribute("cv-attr"),function(n){var o=e.cloneNode(!0),i=function(e){var i=t[e][1]||t[e][0],a=p(r.Bindable.resolve(n.args,i,!0),2),u=a[0],s=a[1],c=t[e][0];n.onRemove(u.bindTo(s,function(e,t,n,r){r||void 0===e?o.removeAttribute(c,e):null!==e?o.setAttribute(c,e):o.setAttribute(c,"")}))};for(var a in t)i(a);return o}}},{key:"mapInterpolatableTag",value:function(e){var t=this,n=this.interpolateRegex;if(e.nodeType===Node.TEXT_NODE){var o=e.nodeValue;if(!this.interpolatable(o))return e;for(var i,a=0,s=function(){var n=i[2],s=!1,c=!1,l=n.split("|"),f=!1;if(l.length>1&&(f=t.stringTransformer(l.slice(1)),n=l[0]),"$$"===n.substr(0,2)&&(s=!0,c=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(s=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var v=o.substring(a,i.index);a=i.index+i[1].length;var d=document.createTextNode(v);d[O]=!0,e.parentNode.insertBefore(d,e);var h=void 0;(h=s?document.createElement("div"):document.createTextNode(""))[O]=!0;var y=t.args,b=n;if(n.match(/\./)){var m=p(r.Bindable.resolve(t.args,n,!0),2);y=m[0],b=m[1]}e.parentNode.insertBefore(h,e);var g=y.bindTo(b,function(n,r,o){if(o[r]!==n&&(o[r]instanceof S||o[r]instanceof Node||o[r]instanceof u.Tag)&&(o[r].preserve||o[r].remove()),h.nodeValue="",c&&!(n instanceof S)){var i=n;(n=new S(t.args,t)).template=i}if(f&&(n=f(n)),n instanceof S){var a=function(e,r){n.dispatchDomAttached(t)};t.nodesAttached.add(a),n.render(e.parentNode,h);var l=function(){n.preserve||n.remove()};t.onRemove(l),n.onRemove(function(){t.nodesAttached.remove(a),t._onRemove.remove(l)})}else n instanceof Node?(e.parentNode.insertBefore(n,h),t.onRemove(function(){return n.remove()})):n instanceof u.Tag?(e.parentNode.insertBefore(n.node,h),t.onRemove(function(){return n.remove()})):(n instanceof Object&&n.__toString instanceof Function&&(n=n.__toString()),s?h.innerHTML=n:h.nodeValue=n);h[O]=!0});t.onRemove(g)};i=n.exec(o);)s();var c=o.substring(a),l=document.createTextNode(c);l[O]=!0,e.parentNode.insertBefore(l,e),e.nodeValue=""}else if(e.nodeType===Node.ELEMENT_NODE)for(var f=function(o){if(!t.interpolatable(e.attributes[o].value))return"continue";for(var i=0,a=void 0,u=e.attributes[o].value,s=e.attributes[o],c={},l=[];a=n.exec(u);)l.push(u.substring(i,a.index)),c[a[2]]||(c[a[2]]=[]),c[a[2]].push(l.length),l.push(a[1]),i=a.index+a[1].length;l.push(u.substring(i));var f=function(n){var o=t.args,i=n,a=n.split("|"),u=!1,f=n;if(a.length>1&&(u=t.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var v=p(r.Bindable.resolve(t.args,i,!0),2);o=v[0],i=v[1]}c[f];t.onRemove(o.bindTo(i,function(n,r,o,a){for(var v in u&&(n=u(n)),c)for(var p in c[f])l[c[f][p]]=o[v],r===i&&(l[c[f][p]]=n);t.paused?t.unpauseCallbacks.set(s,function(){return e.setAttribute(s.name,l.join(""))}):e.setAttribute(s.name,l.join(""))})),t.onRemove(function(){o.isBound()||r.Bindable.clearBindings(o)})};for(var v in c)f(v)},v=0;v<e.attributes.length;v++)f(v);return e}},{key:"mapRefTag",value:function(e){var t=p(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],o=void 0===r?null:r,i=t[2],a=void 0===i?null:i,s=u.Tag;o&&(s=this.stringToClass(o)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var l=new s(e,this,n,void 0,this);for(e.___tag___=l,this.tags[n]=l;c;){c.parent;var f=this.args[a];void 0!==f?(c.tags[n]||(c.tags[n]=[]),c.tags[n][f]=l):c.tags[n]=l,c=c.parent}return e}},{key:"mapBindTag",value:function(e){var t=this,n=e.getAttribute("cv-bind"),o=this.args,i=n,s=null;if(n.match(/\./)){var c=p(r.Bindable.resolve(this.args,n,!0),3);o=c[0],i=c[1],s=c[2]}o!==this.args&&(this.subBindings[n]=this.subBindings[n]||[],this.onRemove(this.args.bindTo(s,function(){for(;t.subBindings.length;)t.subBindings.shift()()})));var l=!1;"$"===i.substr(0,1)&&(i=i.substr(1),l=!0);var f=o.bindTo(i,function(n,r,o,i,s){(s instanceof S||s instanceof Node||s instanceof u.Tag)&&s!==n&&s.remove();var c=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var f=e.getAttribute("type");if(f&&"checkbox"===f.toLowerCase())e.checked=!!n,e.dispatchEvent(c);else if(f&&"radio"===f.toLowerCase())e.checked=n==e.value,e.dispatchEvent(c);else if("file"!==f){if("SELECT"===e.tagName){var v=function(){for(var t=0;t<e.options.length;t++){e.options[t].value==n&&(e.selectedIndex=t)}};v(),t.nodesAttached.add(v)}else e.value=null==n?"":n;e.dispatchEvent(c)}}else if(n instanceof S){var p,h=d(e.childNodes);try{for(h.s();!(p=h.n()).done;){p.value.remove()}}catch(e){h.e(e)}finally{h.f()}var y=function(e){n.dispatchDomAttached(t)};t.nodesAttached.add(y),n.render(e),n.onRemove(function(){return t.nodesAttached.remove(y)})}else if(n instanceof Node)e.insert(n);else if(n instanceof u.Tag)e.append(n.node);else if(l){if(e.innerHTML!==n){if(n=String(n),e.innerHTML===n.substring(0,e.innerHTML.length))e.innerHTML+=n.substring(e.innerHTML.length);else{var b,m=d(e.childNodes);try{for(m.s();!(b=m.n()).done;){b.value.remove()}}catch(e){m.e(e)}finally{m.f()}e.innerHTML=n}a.Dom.mapTags(e,!1,function(e){return e[O]=!0})}}else if(e.textContent!==n){var g,w=d(e.childNodes);try{for(w.s();!(g=w.n()).done;){g.value.remove()}}catch(e){w.e(e)}finally{w.f()}e.textContent=n}});o!==this.args&&this.subBindings[n].push(f),this.onRemove(f);var v=e.getAttribute("type"),h=e.getAttribute("multiple"),y=function(t){if(t.target===e)if(v&&"checkbox"===v.toLowerCase())e.checked?o[i]=t.target.getAttribute("value"):o[i]=!1;else if(t.target.matches("[contenteditable=true]"))o[i]=t.target.innerHTML;else if("file"===v&&h){var n=Array.from(t.target.files),a=o[i]||r.Bindable.onDeck(o,i);if(a&&n.length){var u=function(e){if(n[e]!==a[e])return n[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},a[e]=n[e],"break"};for(var s in n){if("break"===u(s))break}}else o[i]=n}else if("file"!==v||h)o[i]=t.target.value;else{var c=t.target.files.item(0);c.toJSON=function(){return{name:c.name,size:c.size,type:c.type,date:c.lastModified}},o[i]=c}};return"file"===v||"radio"===v?e.addEventListener("change",y):(e.addEventListener("input",y),e.addEventListener("change",y),e.addEventListener("value-changed",y)),this.onRemove(function(){"file"===v||"radio"===v?e.removeEventListener("change",y):(e.removeEventListener("input",y),e.removeEventListener("change",y),e.removeEventListener("value-changed",y))}),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).map(function(n){var r,o=(n=n.map(function(e){return e.trim()})).length,i=String(n.shift()).trim(),a=String(n.shift()||i).trim(),u=String(n.shift()||"").trim(),s=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);c?(a=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(s=c[2].split(",").map(function(e){return e.trim()})),c.length):s.push("$event"),i&&1!==o||(i=a);for(var l=t;l;){if("function"==typeof l[a])if("break"===function(){var e=l,t=a;return r=function(){e[t].apply(e,arguments)},"break"}())break;if(!l.parent)break;l=l.parent}var f=function(n){var o=s.map(function(r){var o;return Number(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(o=/^['"]([\w-]+?)["']$/.exec(r))?o[1]:void 0});if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r.apply(void 0,v(o))},p={};switch(u.includes("p")?p.passive=!0:u.includes("P")&&(p.passive=!1),u.includes("c")?p.capture=!0:u.includes("C")&&(p.capture=!1),u.includes("o")?p.once=!0:u.includes("O")&&(p.once=!1),i){case"_init":f();break;case"_attach":t.nodesAttached.add(f);break;case"_detach":t.nodesDetached.add(f);break;default:e.addEventListener(i,f,p),t.onRemove(function(){e.removeEventListener(i,f,p)})}return[i,a,s]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(n){var r=e.cloneNode(!0);return r.setAttribute("href",t),r}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(e){var t=this,n=e.getAttribute("cv-with"),o=e.getAttribute("cv-carry"),i=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var a=i?this.stringToClass(i):S,u=new DocumentFragment;v(e.childNodes).map(function(e){return u.appendChild(e)});var s=[];o&&(s=o.split(",").map(function(e){return e.trim()}));var c=this.args.bindTo(n,function(n,o,i,c){for(t.withViews.has(e)&&t.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var l=new a({},t);t.onRemove(function(e){return function(){e.remove()}}(l)),l.template=u;var f=function(e){var n=t.args.bindTo(s[e],function(e,t){l.args[t]=e});l.onRemove(n),t.onRemove(function(){n(),l.remove()})};for(var v in s)f(v);var p=function(e){var o=n.bindTo(e,function(e,t){l.args[t]=e});l.args.bindTo(e,function(e,t){n[t]=e});t.onRemove(function(){o(),n.isBound()||r.Bindable.clearBindings(n),l.remove()}),l.onRemove(function(){o(),n.isBound()||r.Bindable.clearBindings(n)})};for(var d in n)p(d);l.render(e),t.withViews.set(e,l)});return this.onRemove(function(){t.withViews.delete(e),c()}),e}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var r=new DocumentFragment;v(e.childNodes).map(function(e){return r.appendChild(e)});var o=n.split(":"),i=o.pop()?this.stringToClass(n):S,a=o.shift(),u=new i(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=r,u.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,n=e.getAttribute("cv-each"),r=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var i=r?this.stringToClass(r):S,a=new DocumentFragment;Array.from(e.childNodes).map(function(e){return a.appendChild(e)});var u=p(n.split(":"),3),s=u[0],c=u[1],l=u[2],f=this.args.bindTo(s,function(n,r,u,s,f){t.viewLists.has(e)&&t.viewLists.get(e).remove();var v=new o.ViewList(a,c,n,t,l,i),p=function(){return v.remove()};t.onRemove(p),v.onRemove(function(){return t._onRemove.remove(p)});var d=t.args.bindTo(function(e,t,n,r){"_id"!==t&&(r&&delete v.subArgs[t],v.subArgs[t]=e)}),h=v.args.bindTo(function(e,n,r,o,i){"_id"!==n&&"value"!==n&&"___"!==n.substring(0,3)&&(o&&delete t.args[n],n in t.args&&(t.args[n]=e))});for(v.onRemove(d),v.onRemove(h),t.onRemove(d),t.onRemove(h);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,v),v.render(e)});return this.onRemove(f),e}},{key:"mapIfTag",value:function(e){var t=this,n=e,o=n.getAttribute("cv-view"),i=n.getAttribute("cv-if"),a=n.getAttribute("cv-is"),u=!1,s=!1;n.removeAttribute("cv-view"),n.removeAttribute("cv-if"),n.removeAttribute("cv-is");var c=o?this.stringToClass(o):S;"!"===i.substr(0,1)&&(i=i.substr(1),u=!0),"?"===i.substr(0,1)&&(i=i.substr(1),s=!0);var l=new DocumentFragment;Array.from(n.childNodes).map(function(e){return l.appendChild(e)});var f=this,v=new DocumentFragment,d=new c(this.args,f);this.onRemove(d.tags.bindTo(function(e,n){t.tags[n]=e})),d.template=l;var h=f.args,y=i;if(i.match(/\./)){var b=p(r.Bindable.resolve(f.args,i,!0),2);h=b[0],y=b[1]}d.render(v);var m=h.bindTo(y,function(t,n){var r=t;s&&(t=null!==t&&void 0!==t),Array.isArray(t)&&(t=!!t.length),u&&(t=!t),t?null!==a&&r==a?e.appendChild(v):null===a&&e.appendChild(v):d.nodes.map(function(e){return v.appendChild(e)})},{wait:0,children:Array.isArray(h[y])});f.onRemove(m);var g=function(){h.isBound()||r.Bindable.clearBindings(h)};return f.onRemove(function(){m(),g(),f._onRemove.remove(m),f._onRemove.remove(g)}),this.onRemove(function(){d.remove(),f!==t&&f.remove()}),e}},{key:"compileIfTag",value:function(e){var t=e.getAttribute("cv-if"),n=!1;e.removeAttribute("cv-if"),"!"===t.substr(0,1)&&(t=t.substr(1),n=!0);var o=new DocumentFragment;return Array.from(e.childNodes).map(function(e){return o.appendChild(e.cloneNode(!0))}),function(i){var a=e.cloneNode(),u=new DocumentFragment,s=new S({},i);s.template=o,i.syncBind(s);var c=i.args,l=t;if(t.match(/\./)){var f=p(r.Bindable.resolve(i.args,t,!0),2);c=f[0],l=f[1]}var v=!1,d=c.bindTo(l,function(e,t){if(!v){var r=i.args[l]||n?a:u;return s.render(r),void(v=!0)}Array.isArray(e)&&(e=!!e.length),n&&(e=!e),e?a.appendChild(u):s.nodes.map(function(e){return u.appendChild(e)})});i.onRemove(d);var h=function(){c.isBound()||r.Bindable.clearBindings(c)};return s.onRemove(function(){d(),h(),i._onRemove.remove(d),i._onRemove.remove(h)}),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var o=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(o),e}},{key:"syncBind",value:function(e){var t=this,n=this.args.bindTo(function(t,n,r,o){"_id"!==n&&e.args[n]!==t&&(e.args[n]=t)}),r=e.args.bindTo(function(e,n,r,o,i){if("_id"!==n){var a=e,u=i;a instanceof S&&(a=a.___ref___),u instanceof S&&(u=u.___ref___),a!==u&&u instanceof S&&i.remove(),n in t.args&&(t.args[n]=e)}});this.onRemove(n),this.onRemove(r),e.onRemove(function(){t._onRemove.remove(n),t._onRemove.remove(r)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].map(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t():requestAnimationFrame(t);var n,r,o=d(this._onRemove.items());try{for(o.s();!(n=o.n()).done;){var i=n.value;this._onRemove.remove(i),i()}}catch(e){o.e(e)}finally{o.f()}for(;r=this.cleanup.shift();)r&&r();var a,u=d(this.viewLists);try{for(u.s();!(a=u.n()).done;){var s=p(a.value,2);s[0];s[1].remove()}}catch(e){u.e(e)}finally{u.f()}this.viewLists.clear();var c,l=d(this.timeouts);try{for(l.s();!(c=l.n()).done;){var f=p(c.value,2),v=(f[0],f[1]);clearTimeout(v.timeout),this.timeouts.delete(v.timeout)}}catch(e){l.e(e)}finally{l.f()}for(var h in this.intervals)clearInterval(this.intervals[h].timeout),delete this.intervals[h];for(var h in this.frames)this.frames[h](),delete this.frames[h];this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new u.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new u.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return v(t.querySelectorAll(e))}).flat().map(function(e){return new u.Tag(e,t,void 0,void 0,t)})}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var o=t,i=e[r];o&&!o[i];)o=o.parent;if(!o)return;n=o[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(S.refClasses.has(e))return S.refClasses.get(e);var t=e.split("/"),r=t[t.length-1],o=n(e);return S.refClasses.set(e,o[r]),o[r]}},{key:"preventParsing",value:function(e){e[O]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,n,r){var o=this;if("string"==typeof e&&(r=n,n=t,t=e,e=this),e instanceof S)return this.listen(e.nodes,t,n,r);if(Array.isArray(e)){var i=e.map(function(e){return o.listen(e,t,n,r)});return function(){return i.map(function(e){return e()})}}if(e instanceof u.Tag)return this.listen(e.element,t,n,r);e.addEventListener(t,n,r);var a=function(){return e.removeEventListener(t,n,r)},s=function(){a(),a=function(){}};return this.onRemove(function(){return s()}),s}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],y=[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}},{key:"isView",value:function(){return S}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}}],h&&b(t.prototype,h),y&&b(t,y),S}();t.View=S,Object.defineProperty(S,"templates",{value:new Map}),Object.defineProperty(S,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./SetMap"),o=n("./View"),i=n("./Bag");function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function t(n,r,a,u){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(a||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f||o.View,this._onRemove=new i.Bag,this.template=n,this.subProperty=r,this.keyProperty=l,this.tag=null,this.paused=!1,this.parent=u,this.rendered=new Promise(function(e,t){Object.defineProperty(c,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,n,r,o){"bindTo"!=t&&(c.paused=!0)}),this.args.___after(function(e,t,n,r,o){"bindTo"!=t&&(c.paused=n.length>1,c.reRender())});var v=this.args.value.bindTo(function(e,t,n,r){if(!c.paused){var o=t;if("symbol"!==s(t))if(isNaN(t)&&(o="_"+t),r)for(var i in c.views[o]&&c.views[o].remove(),delete c.views[o],c.views)console.log(i),isNaN(i)?c.views[i].args[c.keyProperty]=i.substr(1):c.views[i].args[c.keyProperty]=i;else c.views[o]||c.willReRender?c.views[o]&&c.views[o].args&&(c.views[o].args[c.keyProperty]=t,c.views[o].args[c.subProperty]=e):(cancelAnimationFrame(c.willReRender),c.willReRender=requestAnimationFrame(function(){c.reRender()}))}});this._onRemove.add(v)}var n,u,l;return n=t,(u=[{key:"render",value:function(e){var t,n=this,r=[],o=a(this.views);try{var i=function(){var n=t.value;n.render(e),r.push(n.rendered.then(function(){return n}))};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}this.tag=e,Promise.all(r).then(function(e){return n.renderComplete(e)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],n=new r.SetMap;for(var o in this.views){var i=this.views[o],a=i.args[this.subProperty];n.add(a,i),t[o]=i}var u=[],s=new Set;this.upDebind&&this.upDebind.map(function(e){return e&&e()}),this.downDebind&&this.downDebind.map(function(e){return e&&e()}),this.upDebind=[],this.downDebind=[];var c=1/0,l=1/0,f=function(t){var r=!1,o=t;if(isNaN(o)?o="_"+t:String(o).length&&(o=Number(o)),void 0!==e.args.value[t]&&n.has(e.args.value[t])){var i=n.getOne(e.args.value[t]);i&&(i.args[e.keyProperty]=t,u[o]=i,s.add(i),r=!0,isNaN(o)||(c=Math.min(c,o),o>0&&(l=Math.min(l,o))),n.remove(e.args.value[t],i))}if(!r){var a={},f=u[o]=new e.viewClass(a,e.parent);isNaN(o)||(c=Math.min(c,o),o>0&&(l=Math.min(l,o))),u[o].template=(e.template,Object,e.template),u[o].viewList=e,u[o].args[e.keyProperty]=t,u[o].args[e.subProperty]=e.args.value[t],e.upDebind[o]=a.bindTo(e.subProperty,function(t,n,r,o){var i=a[e.keyProperty];o?delete e.args.value[i]:e.args.value[i]=t}),e.downDebind[o]=e.subArgs.bindTo(function(e,t,n,r){r?delete a[t]:a[t]=e}),f.onRemove(function(){e.upDebind[o]&&e.upDebind[o](),e.downDebind[o]&&e.downDebind[o](),delete e.downDebind[o],delete e.upDebind[o]}),e._onRemove.add(function(){e.upDebind.filter(function(e){return e}).map(function(e){return e()}),e.upDebind.splice(0)}),e._onRemove.add(function(){e.downDebind.filter(function(e){return e}).map(function(e){return e()}),e.downDebind.splice(0)}),a[e.subProperty]=e.args.value[t]}};for(var v in this.args.value)f(v);for(var p in t)s.has(t[p])||t[p].remove();if(Array.isArray(this.args.value)){var d=0===c&&void 0!==u[1]&&u.length>1||l===1/0?c:l;this.rendered=function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=u.length-n-1;r>d&&void 0===u[r];)r--;return r<d?Promise.resolve():u[r]===e.views[r]?u[r].firstNode?t(Number(n)+1):(u[r].render(e.tag,u[r+1]),u[r].rendered.then(function(){return t(Number(n)+1)})):(u[r].render(e.tag,u[r+1]),e.views.splice(r,0,u[r]),u[r].rendered.then(function(){return t(Number(n)+1)}))}()}else{var h=[],y=Object.assign({},u),b=function(t){if(delete y[t],u[t].firstNode&&u[t]===e.views[t])return"continue";u[t].render(e.tag),h.push(u[t].rendered.then(function(){return u[t]}))};for(var m in u)b(m);for(var g in y)delete this.args.views[g],y.remove();this.rendered=Promise.all(h)}for(var w in this.views=u,u)isNaN(w)?u[w].args[this.keyProperty]=w.substr(1):u[w].args[this.keyProperty]=w;this.willReRender=!1,this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&c(n.prototype,u),l&&c(n,l),t}();t.ViewList=l}()}),require.register("curvature/form/ButtonField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonField=void 0;var r=n("./Field");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=u(t);if(n){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,r.Field);var t,n,u,s=a(c);function c(e,t,n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=s.call(this,e,t,n,r)).args.title=o.args.title||o.args.value,o._onClick=[];var i=o.args.attrs||{};return i.type=i.type||o.args.type,o.args.name=i.name=o.args.name||r,o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\ttype      = "').concat(i.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),o}return t=c,(n=[{key:"clicked",value:function(e){this._onClick.map(function(t){return!1===t(e)}).filter(function(e){return e}).length?"submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation()):"submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})))}},{key:"onClick",value:function(e){this._onClick.push(e)}}])&&o(t.prototype,n),u&&o(t,u),c}();t.ButtonField=s}()}),require.register("curvature/form/Field.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;var r=n("../base/View");n("../base/Bindable");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=u(t);if(n){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,r.View);var t,n,u,s=a(c);function c(e,t,n,r){var o,i,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var l=Object.assign({},e);(u=s.call(this,l,n)).args.title=null!==(o=u.args.title)&&void 0!==o?o:r,u.args.value=null!==(i=u.args.value)&&void 0!==i?i:"",u.value=null!==(a=u.args.value)&&void 0!==a?a:"",u.skeleton=l,u.disabled=null,u.args.valueString="",u.form=t,u.key=r,u.ignore=u.args.attrs&&u.args.attrs["data-cv-ignore"]||!1;var f="",v=u.args.attrs||{};v.type=v.type||l.type||null,u.args.name=v.name=v.name||u.args.name||r,"checkbox"==v.type&&(f='value = "1"'),u.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(u.getName(),'"\n\t\t\t\tdata-type     = "').concat(v.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(u.getName(),'"\n\t\t\t\t\ttype      = "').concat(v.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(f,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var p=null;return u.args.bindTo("value",function(e,t){if(!isNaN(e)&&e.length&&e==Number(e)&&e.length===String(Number(e)).length&&(e=Number(e)),u.value=e,p!=t){if(p=r,u.args.valueString=JSON.stringify(e||"",null,4),u.valueString=u.args.valueString,"file"==v.type&&u.tags.input&&u.tags.input.element.files&&u.tags.input.element.length)if(v.multiple){var n=Array.from(u.tags.input.element.files);if(u.parent.args.value[t]&&n.length){for(var o in n)n[o]!==u.parent.args.value[r][o]&&(u.parent.args.value[r]=n);u.parent.args.value.splice(n.length)}else u.parent.args.value[r]=n}else u.parent.args.value[r]=u.tags.input.element.files[0];else u.parent.args.value||(u.parent.args.value={}),u.parent.args.value[r]=e;u.args.errors=[],p=null}}),u.parent.args.value[u.key]=u.args.value,u.parent.args.value.bindTo(r,function(e,t){if(p!=t){if(p=t,"file"==v.type)if(u.tags.input&&u.tags.input.element.files&&u.tags.input.element.files.length)if(v.multiple){var n=Array.from(u.tags.input.element.files);if(u.parent.args.value[r]&&n.length){for(var o in n)n[o]!==u.parent.args.value[r][o]&&(u.parent.args.value[r]=n);u.parent.args.value[r].splice(n.length)}else u.parent.args.value[r]=n}else u.parent.args.value[r]=u.tags.input.element.files[0];else u.args.value=e;else u.args.value=e;p=null}}),u}return t=c,(n=[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.tags.input)return this.tags.input.element.getAttribute("name");var t=this.key;if(e){for(var n=this.parent,r=[t];n&&n.array&&void 0!==n.key;)r.unshift(n.key),n=n.parent;t=r.shift(),r.length&&(t+="[".concat(r.join("]["),"]"))}return t}}])&&o(t.prototype,n),u&&o(t,u),c}();t.Field=s}()}),require.register("curvature/form/FieldSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSet=void 0;var r=n("./Field"),o=n("./Form");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=c(t);if(n){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return s(t)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,r.Field);var t,n,c,l=u(f);function f(e,t,n,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var a=(i=l.call(this,e,t,n,r)).args.attrs||{};return a.type=a.type||"fieldset",i.array=!1,(e.array||a["data-array"]||a["data-multi"])&&(i.array=a["data-array"]=!0),i.args.value={},i.args.fields=o.Form.renderFields(e.children,s(i)),i.fields=i.args.fields,i.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(i.getName(),'"\n\t\t\t\tdata-type  = "').concat(a.type,'"\n\t\t\t\tdata-multi = "').concat(a["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(i.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),i}return t=f,(n=[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(e){return e}}])&&i(t.prototype,n),c&&i(t,c),f}();t.FieldSet=l}()}),require.register("curvature/form/Form.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var r=n("../base/View"),o=n("./Field"),i=n("./FieldSet"),a=n("./SelectField"),u=n("./RadioField"),s=n("./HtmlField"),c=n("./HiddenField"),l=n("./ButtonField"),f=n("./TextareaField"),v=n("./multiField/View"),p=n("../base/Bindable");function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?m(t):n}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(_,r.View);var t,n,g,w=y(_);function _(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(t=w.call(this,{})).args.flatValue=t.args.flatValue||{},t.args.value=t.args.value||{},t.args.method=e._method||"GET",t.args.classes=t.args.classes||[],t.skeleton=e,t.args.bindTo("classes",function(e){t.args._classes=e.join(" ")}),t.action="",t.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',t.args.fields=_.renderFields(e,m(t),n),t.fields=t.args.fields;var r=p.Bindable.makeBindable(m(t));return t.args.bindTo("value",function(e){r.value=e}),t.args.bindTo("valueString",function(e){r.json=e}),b(t,r)}return t=_,g=[{key:"renderFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={},p=function(p){if(r[p])return"continue";if("_"==p.substr(0,1))return"continue";var d=null,h=null;if(t&&(h=t instanceof _?t:t.form),n&&e[p].name in n)d=new n[e[p].name](e[p],h,t,p);else switch(e[p].type){case"fieldset":d=e[p].attrs&&e[p].attrs["data-multi"]?new v.View(e[p],h,t,p):new i.FieldSet(e[p],h,t,p);break;case"select":d=new a.SelectField(e[p],h,t,p);break;case"radios":d=new u.RadioField(e[p],h,t,p);break;case"html":d=new s.HtmlField(e[p],h,t,p);break;case"submit":case"button":d=new l.ButtonField(e[p],h,t,p);break;case"hidden":d=new c.HiddenField(e[p],h,t,p);break;case"textarea":d=new f.TextareaField(e[p],h,t,p);break;default:d=new o.Field(e[p],h,t,p)}r[p]=d;var y=d.key;d.args.bindTo("value",function(e,n,r,o){if(!isNaN(e)&&e.length&&e==Number(e)&&e.length===String(Number(e)).length&&(e=Number(e)),("html"!=r.type||r.contentEditable)&&"fieldset"!=r.type)if(r.disabled)delete h.args.flatValue[y];else{r.attrs=r.attrs||{};r.attrs.multiple;var i=Array.isArray(e),a=t.args.value[y];if(r.attrs.multiple&&i&&Array.isArray(a))for(var u in e)e[u]!==t.args.value[y][u]&&(t.args.value[y][u]=e[u]),t.args.value[y].splice(e.length);else t.args.value[y]=e;h.args.flatValue[y]=e,h.args.valueString=JSON.stringify(h.args.value,null,4),console.log()}})};for(var d in e)p(d);return r}},{key:"_updateFields",value:function(e,t){for(var n in e.args.fields){var r=e.args.fields[n];t[n]&&(t[n].value&&(r.args.value=t[n].value),t[n].errors&&(r.args.errors=t[n].errors),t[n].title&&(r.args.title=t[n].title),t[n].options&&(r.args.options=t[n].options),t[n].attrs&&(r.args.attrs=t[n].attrs),r.children&&t[n].children&&this._updateFields(r,t[n].children))}}}],(n=[{key:"submit",value:function(e){this.args.valueString=JSON.stringify(this.args.value,null,4),this.dispatchEvent(new CustomEvent("submit",{details:{view:this}}))||(e.preventDefault(),e.stopPropagation())}},{key:"buttonClick",value:function(e){}},{key:"formData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e||(e=new FormData),t||(t=this);for(var r in t.args.fields)if(!t.args.fields[r]||!t.args.fields[r].disabled){var o=n.slice(0);if(o.push(r),t.args.fields[r]&&t.args.fields[r].hasChildren())this.formData(e,t.args.fields[r],o);else if(t.args.fields[r]){var i=t.args.fields[r].getName();if("file"==t.args.fields[r].args.type&&t.args.fields[r].tags.input.element.files&&t.args.fields[r].tags.input.element.files.length)if(t.args.fields[r].args.attrs.multiple)for(var a=t.args.fields[r].tags.input.element.files,u=0;u<a.length;u++)a[u]&&e.append(i+"[]",a[u]);else t.args.fields[r].tags.input.element.files[0]&&e.append(i,t.args.fields[r].tags.input.element.files[0]);else("file"!==t.args.fields[r].args.type||t.args.fields[r].args.value)&&e.append(i,void 0===t.args.fields[r].args.value?"":t.args.fields[r].args.value)}}return e}},{key:"queryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in this.args.flatValue)e[n]=e[n]||this.args.flatValue[n];for(var r in e)t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}},{key:"populate",value:function(e){for(var t in e)this.args.value[t]=e[t]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}])&&d(t.prototype,n),g&&d(t,g),_}();t.Form=w}()}),require.register("curvature/form/HiddenField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenField=void 0;var r=n("./Field");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=a(t);if(n){var i=a(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,r.Field);var t=i(n);function n(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e.type="hidden";var u=(a=t.call(this,e,r,o,i)).args.attrs||{};return a.args.type=u.type="hidden",a.args.name=u.name=u.name||a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}return n}();t.HiddenField=u}()}),require.register("curvature/form/HtmlField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlField=void 0;var r=n("./Field");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=u(t);if(n){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,r.Field);var t,n,u,s=a(c);function c(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=s.call(this,e,t,n,r)).key=r,o.args.tagName=o.args.tagName||"div",o.args.displayValue=o.args.value,o.args.attrs=o.args.attrs||{},o.ignore=o.args.attrs["data-cv-ignore"]||!1,o.args.contentEditable=o.args.attrs.contenteditable||!1,o.args.bindTo("value",function(e){o.tags.input&&o.tags.input.element!==document.activeElement&&(o.args.displayValue=e)}),o.template="<".concat(o.args.tagName,'\n\t\t\tname            = "').concat(o.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(o.args.tagName,">"),o}return t=c,(n=[{key:"inputProvided",value:function(e){this.args.value=e.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}])&&o(t.prototype,n),u&&o(t,u),c}();t.HtmlField=s}()}),require.register("curvature/form/RadioField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RadioField=void 0;var r=n("./Field");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=u(t);if(n){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,r.Field);var t,n,u,s=a(c);function c(e,t,n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var i=(o=s.call(this,e,t,n,r)).args.attrs||{};return o.args.name=i.name=i.name||o.args.name||r,o.args.value=o.args.value||"",o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(o.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),o}return t=c,(n=[{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}},{key:"changed",value:function(e){this.args.value=e.target.value}}])&&o(t.prototype,n),u&&o(t,u),c}();t.RadioField=s}()}),require.register("curvature/form/SelectField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectField=void 0;var r=n("./Field");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=c(t);if(n){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,r.Field);var t,n,i,c=s(l);function l(e,t,n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var i=(o=c.call(this,e,t,n,r)).args.attrs||{};return o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),o}return t=l,(n=[{key:"postRender",value:function(){var e=this;this.args.bindTo("value",function(t){return e.selectOptionByValue(t)}),this.args.options.bindTo(function(t){return e.selectOptionByValue(e.args.value)},{frame:1})}},{key:"selectOptionByValue",value:function(e){var t,n=this.tags.input.element,r=o(n.options);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.value==e&&(n.selectedIndex=i.index)}}catch(e){r.e(e)}finally{r.f()}}},{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}}])&&a(t.prototype,n),i&&a(t,i),l}();t.SelectField=l}()}),require.register("curvature/form/TextareaField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextareaField=void 0;var r=n("./Field");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=a(t);if(n){var i=a(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,r.Field);var t=i(n);function n(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var u=(a=t.call(this,e,r,o,i)).args.attrs||{};return u.type=u.type||"textarea",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}return n}();t.TextareaField=u}()}),require.register("curvature/form/multiField/CreateForm.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateForm=void 0;var r=n("./FormWrapper");n("../../form/HiddenField");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=s(t);if(n){var i=s(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,r.FormWrapper);var t,n,c,l=u(f);function f(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=l.call(this,e,t,"POST",r||{})).creating=!!e.publicId,n}return t=f,(n=[{key:"onLoad",value:function(e){for(var t in e.args.fields)if(e.args.fields[t].tags.input&&"hidden"!=e.args.fields[t].args.attrs.type){e.args.fields[t].tags.input.element.focus();break}i(s(f.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return this.args.view.args.loading=!0,this.args.view.args.classes+=" loading",i(s(f.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){this.args.view.args.loading=!1,this.args.view.args.classes="",e.body?(this.args.wrapper?this.args.wrapper.refresh(e.body):this.args.view.addRecord(e.body),this.args.view.args.creating="",i(s(f.prototype),"onResponse",this).call(this,e)):i(s(f.prototype),"onResponse",this).call(this,e)}}])&&o(t.prototype,n),c&&o(t,c),f}();t.CreateForm=c}()}),require.register("curvature/form/multiField/FormWrapper.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FormWrapper=void 0;var r=n("../../base/Repository"),o=n("../../form/Form"),i=n("../../toast/Toast"),a=(n("../../toast/ToastAlert"),n("../../base/View")),u=n("../../base/Router");function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=p(t);if(n){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,a.View);var t,n,c,p=v(d);function d(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(n=p.call(this,e)).path=t,n.args.method=i,n.args.action=n.args.action||null,n.args.form=null,n.args.title=null,n.args.class="",n.template='\n\t\t\t<div class = "form constrict [[class]]">\n\t\t\t\t<div cv-if = "title"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t',n._onLoad=[],n._onSubmit=[],n._onRender=[],n._onRequest=[],n._onError=[],n._onResponse=[],t instanceof o.Form?n.loadForm(form,a):r.Repository.request(t).then(function(e){e&&e.meta&&e.meta.form&&e.meta.form instanceof Object?(n.loadForm(new o.Form(e.meta.form,a)),n.onLoad(n.args.form,e.body)):console.warn("Cannot render form with ",e)}),n}return t=d,(n=[{key:"loadForm",value:function(e){var t=this;this.args.form=e,this.args.form.addEventListener("submit",function(n){n&&(n.preventDefault(),n.stopPropagation());var o=e.tags.formTag.element,i=o.getAttribute("action")||t.args.action||t.path,a=o.getAttribute("method")||t.args.method,c=e.args.flatValue;if("GET"==(a=a.toUpperCase())){var l={};for(var f in t.args.content&&t.args.content.args&&(t.args.content.args.page=0),l.page=0,c)"api"!==f&&(l[f]=c[f]);t.onRequest(l).then(function(){t.onResponse({}),u.Router.go(i+"?"+u.Router.queryToString(l)),t.update(l)}).catch(function(e){t.onRequestError(e)})}else if("POST"==a){var v,p=e.formData(),d=s(p.entries());try{for(d.s();!(v=d.n()).done;)v.value}catch(e){d.e(e)}finally{d.f()}var h=t.onRequest(p);h&&h.then(function(){r.Repository.request(i,{api:"json"},p,!1,{progressDown:function(e){t.progressDown(e)},progressUp:function(e){t.progressUp(e)}}).then(function(e){t.onResponse(e)}).catch(function(e){t.onRequestError(e)})})}})}},{key:"onRequest",value:function(e){var t=[];for(var n in this._onRequest){var r=this._onRequest[n](e,this);r&&t.push(r)}return 0==t.length?Promise.resolve():Promise.all(t)}},{key:"onRequestError",value:function(e){for(var t in this._onError)this._onError[t](e,this);if(e.messages)for(var n in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[n],3500)}},{key:"onResponse",value:function(e){for(var t in this._onResponse)this._onResponse[t](e,this);if(e.messages)for(var n in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[n],3500)}},{key:"onLoad",value:function(e,t){for(var n in this._onLoad)this._onLoad[n](this,e,t)}},{key:"customFields",value:function(){return{}}},{key:"submit",value:function(){}},{key:"progressUp",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}},{key:"progressDown",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}}])&&l(t.prototype,n),c&&l(t,c),d}();t.FormWrapper=d}()}),require.register("curvature/form/multiField/SearchForm.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchForm=void 0;var r=n("../../base/Config"),o=n("./FormWrapper"),i=n("../../form/HiddenField"),a=n("../../base/Repository");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=f(t);if(n){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=r.Config.get("backend")||"//",p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,o.FormWrapper);var t,n,r,p=l(d);function d(e,t){var n;arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(n=p.call(this,e,t,"POST",{search:i.HiddenField})).superTemplate=n.template,n.args.records=[],n.selected=null,n.template="\n\t\t\t".concat(n.superTemplate,'\n\t\t\t<div cv-each = "records:record:r" class = "dropdown-results">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = "click:select(event)"\n\t\t\t\t\tdata-index    = "[[r]]"\n\t\t\t\t\tdata-publicId = "[[record.publicId]]"\n\t\t\t\t\tclass         = "[[record.classes]]"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),n}return t=d,(n=[{key:"onLoad",value:function(e){var t=this;for(var n in e.args.fields)if(e.args.fields[n].tags.input&&"hidden"!=e.args.fields[n].args.attrs.type){e.args.fields[n].tags.input.element.focus();break}e.args.flatValue.bindTo("keyword",function(e){t.args.records=[],t.selected=null,e&&(console.log(t.path,e),a.Repository.request(v+t.path,{keyword:e}).then(function(n){console.log(n.body),n.body&&(t.args.records=n.body.map(function(n){return n.classes="",n.title==e&&(n.classes="selected",t.selected=n),n}))}))}),s(f(d.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return s(f(d.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){s(f(d.prototype),"onResponse",this).call(this,e)}},{key:"select",value:function(e){var t=e.target.getAttribute("data-index"),n=(e.target.getAttribute("data-publicId"),this.args.records[t]);console.log(n),this.args.view.addRecord(n),this.args.view.addButtonClicked()}},{key:"onSubmit",value:function(e,t){return t.preventDefault(),t.stopPropagation(),this.selected&&(this.args.view.addRecord(this.selected),this.args.view.addButtonClicked()),!1}}])&&u(t.prototype,n),r&&u(t,r),d}();t.SearchForm=p}()}),require.register("curvature/form/multiField/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("../../base/Config"),r=n("../../form/Form"),o=n("../../form/FieldSet"),i=n("./CreateForm"),a=n("./SearchForm"),u=(n("./FormWrapper"),n("./Wrapper"));function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(y,o.FieldSet);var n,p,d,h=f(y);function y(e,t,n,r){var o;for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(o=h.call(this,e,t,n,r)).args._fields=[],o.dragging=!1,o.dropping=!1,o.args.fields)o.args._fields[Number(i)+1]=o.wrapSubfield(o.args.fields[i]);return o.args.fields[-1].disable(),o.args._fields[0].addEventListener("attach",function(e){return e.preventDefault()}),o.args.creating="",o.args.fieldType="",o.args.createForm=o.args.createForm||"",o.args.searchForm=o.args.searchForm||"",o.args.createFormReady=!1,o.setCreateForm({view:v(o)}),o.args.loader="...",o.args.addIcon="&#215;",o.args.addIcon="a",o.args.addIcon="+",o.args.draggable="true",o.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(o.args.name,'"\n\t\t\t\tdata-type  = "').concat(o.args.attrs.type,'"\n\t\t\t\tdata-multi = "').concat(o.args.attrs["data-multi"]?"true":"false",'"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = "').concat(o.args.name,'"\n\t\t\t\t\tclass = "multi-field [[creating]] [[fieldType]]"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = "record-list" cv-each = "_fields:field:f">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = "single-record"\n\t\t\t\t\t\t\tdata-for  = "[[f]]"\n\t\t\t\t\t\t>[[field]]</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay create">\n\t\t\t\t\t\t<div class = "form constrict">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\t\tclass = "bubble bottom left-margin close"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay loading">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = "createFormReady" class="add-button-holder">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\tclass = "bubble bottom left-margin add"\n\t\t\t\t\t\t\ttab-index = "0"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t'),o}return n=y,(p=[{key:"setCreateForm",value:function(t){var n=this,r="";e.Config.get("backend")&&(r=e.Config.get("backend")),!1!==this.args.attrs["data-create-endpoint"]&&void 0!==this.args.attrs["data-create-endpoint"]?(this.args.createForm=new i.CreateForm(Object.assign({},t),this.args.attrs["data-create-endpoint"]?r+this.args.attrs["data-create-endpoint"]:t.publicId?r+"".concat(this.args.attrs["data-endpoint"],"/").concat(t.publicId,"/edit"):r+"".concat(this.args.attrs["data-endpoint"],"/create")),this.args.createForm._onLoad.push(function(e,t){n.args.createFormReady=!0})):this.args.createFormReady=!0,this.args.attrs["data-endpoint"]&&(this.args.searchForm=new a.SearchForm(Object.assign({},t),r+this.args.attrs["data-endpoint"]))}},{key:"wrapSubfield",value:function(e){return new u.Wrapper({field:e,parent:this})}},{key:"addButtonClicked",value:function(){this.args.creating||(this.args.creating="creating")}},{key:"addRecord",value:function(e){for(var t in this.args.creating="",Array.isArray(e)||(e=[e]),e){this.args.fields[-1].constructor;var n,o=Object.assign({},this.args.fields[-1].skeleton),i=Object.values(this.args.fields).length-1;o=this.cloneSkeleton(o),(o=this.correctNames(o,i)).attrs=null!==(n=o.attrs)&&void 0!==n?n:{},o.attrs["data-array"]=!0;var a={};a[i]=o;var u=r.Form.renderFields(a,this)[i];this.args.fields[i]=u;var s=this.wrapSubfield(u);u.args.value.id=e[t].id||"",u.args.value.class=e[t].class||"",u.args.value.title=e[t].title||"",u.args.value.key=this.args._fields.length,console.log(this.args._fields),this.args._fields.push(s),s.refresh(e[t])}}},{key:"editRecord",value:function(e,t){this.setCreateForm({view:this,publicId:e.publicId,wrapper:t}),this.args.creating=this.args.creating?"":"creating"}},{key:"deleteImage",value:function(e){console.log(e,this.args.fields),this.args.fields[e].disable(),this.args._fields[e].args.classes="deleted"}},{key:"undeleteImage",value:function(e){this.args.fields[e].enable(),this.args._fields[e].args.classes=""}},{key:"cloneSkeleton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};for(var r in Array.isArray(e)&&(n=[]),e)"fields"!=r&&(e[r]&&"object"===s(e[r])?n[r]=Object.assign({},this.cloneSkeleton(e[r],t+1)):n[r]=e[r]);return n}},{key:"correctNames",value:function(e,t){if(e.name=e.name.replace(/\[-1\]/,"[".concat(t,"]")),e.attrs.name=e.name,"children"in e)for(var n in e.children)e.children[n]=this.correctNames(e.children[n],t);return e}},{key:"drag",value:function(e){this.dragging=e.target}},{key:"dragOver",value:function(e){if(!this.dragging)return!1;for(var t=e.target;t&&!t.matches('[draggable="true"]');)t=t.parentNode;t&&(this.dropping=t,e.preventDefault())}},{key:"drop",value:function(e){e.stopPropagation();var t=this.dragging.querySelector("label"),n=this.dropping.querySelector("label"),r=t.getAttribute("for"),o=n.getAttribute("for"),i=this.extractIndex(r),a=this.extractIndex(o);if(i==a||i==a-1)return this.dragging=!1,void(this.dropping=!1);var u,s,c=t.querySelectorAll('[name^="'+r+'"]'),l=t.querySelectorAll('[for^="'+r+'"]'),f=n.querySelectorAll('[name^="'+o+'"]'),v=n.querySelectorAll('[for^="'+o+'"]'),p=this.dropping,d=0;for(var h in this.args.fields){var y=this.args.fields[h].tags.input.element,b=this.args.fields[h].tags.label.element,m=y.getAttribute("name");t==b&&(u=this.args.fields[h]),n==b&&(s=this.args.fields[h]);var g=this.extractIndex(m),w=!1;if(!(g<0)&&(i>a&&g>=a&&g<=i?(w=this.changeIndex(m,g+1),d=-1):i<a&&g<=a&&g>=i&&(w=this.changeIndex(m,g-1),d=0),!1!==w)){this.changeAttributePrefix(b,"for",m,w),this.args.fields[h].args.fieldName=w,this.changeAttributePrefix(y,"name",m,w);for(var _=y.parentNode.querySelectorAll('[name^="'+m+'"]'),O=0;O<_.length;O++)this.changeAttributePrefix(_[O],"name",m,w);for(var j=y.parentNode.querySelectorAll('[for^="'+m+'"]'),k=0;k<j.length;k++)this.changeAttributePrefix(j[k],"for",m,w)}}r=t.getAttribute("for"),o=n.getAttribute("for"),i=this.extractIndex(r),a=this.extractIndex(o),this.changeAttributePrefix(t,"for",r,this.changeIndex(r,a+d));for(var S=0;S<c.length;S++)this.changeAttributePrefix(c[S],"name",r,this.changeIndex(r,a+d));for(var P=0;P<l.length;P++)this.changeAttributePrefix(l[P],"for",r,this.changeIndex(r,a+d));u.args.fieldName=t.getAttribute("for"),this.changeAttributePrefix(n,"for",o,this.changeIndex(o,a+d+1));for(var R=0;R<f.length;R++)this.changeAttributePrefix(f[R],"name",o,this.changeIndex(o,a+d+1));for(var T=0;T<v.length;T++)this.changeAttributePrefix(v[T],"for",o,this.changeIndex(o,a+d+1));s.args.fieldName=n.getAttribute("for"),this.dragging.parentNode.insertBefore(this.dragging,p),this.dragging=!1,this.dropping=!1}},{key:"dragStop",value:function(){this.dragging=!1,this.dropping=!1}},{key:"changeAttributePrefix",value:function(e,t,n,r){e.getAttribute(t);var o=r+e.getAttribute(t).substring(n.length);e.setAttribute(t,o)}},{key:"extractIndex",value:function(e){var t;return!!(t=/\[(-?\d+)\]$/.exec(e))&&parseInt(t[1])}},{key:"changeIndex",value:function(e,t){return e.replace(/\[(-?\d+)\]$/,"["+t+"]")}},{key:"cancel",value:function(e){e.stopPropagation()}}])&&c(n.prototype,p),d&&c(n,d),y}();t.View=d}()}),require.register("curvature/form/multiField/Wrapper.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=void 0;var r=n("../../base/Config"),o=n("../../base/View"),i=n("../../base/Repository");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=c(t);if(n){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,o.View);var t,n,c,l=s(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=l.call(this,e)).template='\n\t\t\t<div\n\t\t\t\tclass = "wrapped-field [[classes]]"\n\t\t\t\tcv-on = "click:editRecord(event, key)"\n\t\t\t\ttitle = "[[fieldName]]: [[id]]"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = "click:deleteImage(event, key)"\n\t\t\t\t\tstyle = "display: inline; cursor:pointer;"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = "field-content">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = "display:none">[[field]]</div>\n\t\t',t.args.field=t.args.field||"!",t.args.keyword="",t.args.title="",t.args.record={},t.args.key=t.args.field.key,t.args.classes="",t.args.icon="×",t.deleted=!1,t.args.field.args.bindTo("fieldName",function(e){t.args.fieldName=e}),t.args.fieldName=t.args.field.args.name,t.args.id=t.args.field.args.value.id,t.args.bindTo("id",function(e){t.args.field.args.value.id=e}),t.args.field.args.value.bindTo("id",function(e,n){e&&i.Repository.request(t.backendPath(),{id:e}).then(function(n){t.args.id=e;var r=n.body[0];if(!r)return t.args.publicId=null,void(t.args.title=null);t.refresh(r)})},{wait:0}),t.args.field.args.value.bindTo("keyword",function(e){t.args.keyword=e}),t}return t=f,(n=[{key:"editRecord",value:function(){this.args.parent.editRecord(this.args.record,this)}},{key:"deleteImage",value:function(e,t){e.stopPropagation(),this.deleted?(this.args.icon="×",this.args.parent.undeleteImage(t),this.deleted=!1):(this.args.icon="↺",this.args.parent.deleteImage(t),this.deleted=!0)}},{key:"backendPath",value:function(){return(r.Config.get("backend")||"//")+this.args.parent.args.attrs["data-endpoint"]}},{key:"getRecordTitle",value:function(e){return e._titleField?e[e._titleField]:e.title||e.publicId||e.id}},{key:"refresh",value:function(e){for(var t in e)this.args[t]=e[t];this.args.record=e,this.args.title=this.getRecordTitle(e)}}])&&a(t.prototype,n),c&&a(t,c),f}();t.Wrapper=l}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var e,r=n("../base/Mixin");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Symbol("Target"),a=(o(e={},r.Mixin.Constructor,function(){try{this[i]=new EventTarget}catch(e){this[i]=document.createDocumentFragment()}}),o(e,"dispatchEvent",function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];(e=this[i]).dispatchEvent.apply(e,n);var a="on".concat(o.type[0].toUpperCase()+o.type.slice(1));return"function"==typeof this[a]&&this[a](o),o.returnValue}),o(e,"addEventListener",function(){var e;(e=this[i]).addEventListener.apply(e,arguments)}),o(e,"removeEventListener",function(){var e;(e=this[i]).removeEventListener.apply(e,arguments)}),e);t.EventTargetMixin=a}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,r=n("../base/Mixin");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Symbol("Promise"),a=Symbol("Accept"),u=Symbol("Reject"),s=(o(e={},r.Mixin.Constructor,function(){var e=this;this[i]=new Promise(function(t,n){e[a]=t,e[u]=n})}),o(e,"then",function(){var e;return(e=this[i]).then.apply(e,arguments)}),o(e,"catch",function(){var e;return(e=this[i]).catch.apply(e,arguments)}),o(e,"finally",function(){var e;return(e=this[i]).finally.apply(e,arguments)}),e);t.PromiseMixin=s,Object.defineProperty(s,"Reject",{value:u}),Object.defineProperty(s,"Accept",{value:a})}()}),require.register("curvature/model/Model.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=n("../base/Cache"),r=n("../base/Bindable");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Symbol("Saved"),c=Symbol("Changed"),l=function(){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,c,{value:r.Bindable.make({})}),Object.defineProperty(this,s,{writable:!0,value:!1}),r.Bindable.makeBindable(this)}var n,i,l;return n=t,l=[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(t){var n,r=this,i=this.prototype.constructor.keyProps,u=i.map(function(e){return t[e]}).join("::"),l="models-by-type-and-publicId",f=e.Cache.load(u,!1,l),v=f||new this,p=o(i);try{for(p.s();!(n=p.n()).done;){var d,h,y=n.value;v[y]=null!==(d=null!==(h=v[y])&&void 0!==h?h:t[y])&&void 0!==d?d:null}}catch(e){p.e(e)}finally{p.f()}if(v.consume(t),e.Cache.store(u,v,0,l),!f){var b=!1;v.bindTo(function(e,t,n){"symbol"!==a(t)&&e!==n[t]&&(v[c][t]=b,v[s]=!(b||!r[s]))}),b=!0}return v}}],(i=[{key:"consume",value:function(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.keyProps,u=function(t,n){if(n&&"object"===a(n)&&n.constructor.keyProps){var o=n.constructor.keyProps.map(function(e){return n[e]}).join("::"),i=e.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(n),n=i)}r[t]=n};for(var s in n)!o&&this[c][s]||i.includes(s)||u(s,n[s])}},{key:"changed",value:function(){this[s]=!1}},{key:"stored",value:function(){for(var e in this[c])this[c][e]=!1;this[s]=!0}},{key:"isSaved",value:function(){return this[s]}}])&&u(n.prototype,i),l&&u(n,l),t}();t.Model=l,Object.defineProperty(l,"Saved",{value:s}),Object.defineProperty(l,"Changed",{value:c})}()}),require.register("curvature/toast/Toast.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Toast=void 0;var r=n("../base/View"),o=n("../base/Bindable"),i=n("./ToastAlert");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=c(t);if(n){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,r.View);var t,n,c,l=s(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=l.call(this)).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',e.args.alerts=[],e}return t=f,c=[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}],(n=[{key:"pop",value:function(e){var t=this;this.args.alerts.length;this.args.alerts.push(e),e.decay(function(e){return function(){for(var n in t.args.alerts)if(o.Bindable.ref(t.args.alerts[n])===o.Bindable.ref(e))return e.remove(),void delete t.args.alerts[n]}}(e))}},{key:"alert",value:function(e,t,n){return this.pop(new i.ToastAlert({title:e,body:t,time:n}))}}])&&a(t.prototype,n),c&&a(t,c),f}();t.Toast=l}()}),require.register("curvature/toast/ToastAlert.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ToastAlert=void 0;var r=n("../base/View");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=u(t);if(n){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,r.View);var t,n,u,s=a(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).args.running=!1,t.args.time=t.args.time||16e3,t.init=t.args.time,t.args.title=t.args.title||"Standard alert",t.args.status="new",t.args.body=t.args.body||"This is a standard alert.",t.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',t}return t=c,(n=[{key:"decay",value:function(e){var t=this;this.args.running=!0,this.onTimeout(50,function(){t.args.status=""}),this.onTimeout(300,function(){t.args.status="decaying"}),this.onTimeout(2400,function(){t.args.status="imminent"}),this.onTimeout(3500,function(){t.remove()})}}])&&o(t.prototype,n),u&&o(t,u),c}();t.ToastAlert=s}()}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");

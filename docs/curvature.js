!function(){"use strict";var t="undefined"==typeof global?self:global;if("function"!=typeof t.require){var e={},n={},r={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(t,e){for(var n,r=[],o=(i.test(e)?t+"/"+e:e).split("/"),a=0,u=o.length;a<u;a++)".."===(n=o[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e,r){var o,i={id:e,exports:{},hot:d&&d.createHot(e)};return n[e]=i,r(i.exports,(o=e,function(e){var n=a(u(o),e);return t.require(n,o)}),i),i.exports},c=function(t){var e=r[t];return e&&t!==e?c(e):t},l=function(t,r){null==r&&(r="/");var i=c(t);if(o.call(n,i))return n[i].exports;if(o.call(e,i))return s(i,e[i]);throw new Error("Cannot find module '"+t+"' from '"+r+"'")};l.alias=function(t,e){r[e]=t};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;l.register=l.define=function(t,i){if(t&&"object"==typeof t)for(var a in t)o.call(t,a)&&l.register(a,t[a]);else e[t]=i,delete n[t],function(t){if(f.test(t)){var e=t.replace(f,"");o.call(r,e)&&r[e].replace(f,"")!==e+"/index"||(r[e]=t)}if(v.test(t)){var n=t.replace(v,"");o.call(r,n)||(r[n]=t)}}(t)},l.list=function(){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t};var d=t._hmr&&new t._hmr(function(t,e){return c(a(u(t),e))},l,e,n);l._cache=n,l.hmr=d&&d.wrap,l.brunch=!0,t.require=l}}(),function(){"undefined"==typeof window||window;var t=function(t,e,n){var r={},o=function(e,n){try{return t(n+"/node_modules/"+e)}catch(t){if(-1===t.toString().indexOf("Cannot find module"))throw t;if(-1!==n.indexOf("node_modules")){var i=n.split("/"),a=i.lastIndexOf("node_modules"),u=i.slice(0,a).join("/");return o(e,u)}}return r};return function(i){if(i in e&&(i=e[i]),i){if("."!==i[0]&&n){var a=o(i,n);if(a!==r)return a}return t(i)}}};require.register("curvature/base/Bag.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bag=void 0;var t=n("./Bindable");function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.meta=Symbol("meta"),this.content=new Map,this.list=t.Bindable.makeBindable({}),this.current=0,this.type=void 0,this.changeCallback=n}var n,o,i;return n=e,(o=[{key:"add",value:function(t){if(void 0===t||!(t instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(t instanceof this.type))throw console.error(this.type,t),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(t)){var n,r=(n=this.current++,Number(n).toString(36));this.content.set(t,r),this.list[r]=t,this.changeCallback&&this.changeCallback(t,this.meta,e.ITEM_ADDED,r)}}},{key:"remove",value:function(t){if(void 0===t||!(t instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(t instanceof this.type))throw console.error(this.type,t),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(t))return this.changeCallback&&this.changeCallback(t,this.meta,0,void 0),!1;var n=this.content.get(t);return delete this.list[n],this.content.delete(t),this.changeCallback&&this.changeCallback(t,this.meta,e.ITEM_REMOVED,n),t}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(t){return t[0]})}}])&&r(n.prototype,o),i&&r(n,i),e}();e.Bag=o,Object.defineProperty(o,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(o,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e,n){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Bindable=void 0;var u,s,c,l=Symbol("ref"),f=Symbol("original"),v=Symbol("deck"),d=Symbol("binding"),p=Symbol("subBinding"),h=Symbol("bindingAll"),y=Symbol("isBindable"),b=Symbol("executing"),g=Symbol("stack"),m=(Symbol("object"),Symbol("wrapped")),w=Symbol("getProto"),_=Symbol("onGet"),O=Symbol("onAllGet"),j=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,o,u;return n=e,u=[{key:"isBindable",value:function(t){return!(!t||!t[y])&&t[y]===e}},{key:"onDeck",value:function(t,e){return t[v][e]||!1}},{key:"ref",value:function(t){return t[l]||!1}},{key:"makeBindable",value:function(t){return this.make(t)}},{key:"make",value:function(n){var o=this;if(!n||!["function","object"].includes(i(n)))return n;var a=window||{};if([a.Node,a.Map,a.Set,a.ResizeObserver,a.MutationObserver,a.PerformanceObserver,a.IntersectionObserver].filter(function(t){return"function"==typeof t}).filter(function(t){return n instanceof t}).length||Object.isSealed(n)||!Object.isExtensible(n))return n;if(n[l])return n;if(n[d])return n;Object.defineProperty(n,l,{configurable:!0,enumerable:!1,writable:!0,value:n}),Object.defineProperty(n,v,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,p,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,h,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,y,{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(n,b,{enumerable:!1,writable:!0}),Object.defineProperty(n,g,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,m,{configurable:!1,enumerable:!1,writable:!1,value:{}});Object.defineProperty(n,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!1;if(Array.isArray(r)){var c=r.map(function(e){return t(e,a,u)});return function(){return c.map(function(t){return t()})}}if(r instanceof Function&&(u=a||{},a=r,s=!0),u.delay>=0&&(a=o.wrapDelayCallback(a,u.delay)),u.throttle>=0&&(a=o.wrapThrottleCallback(a,u.throttle)),u.wait>=0&&(a=o.wrapWaitCallback(a,u.wait)),u.frame&&(a=o.wrapFrameCallback(a,u.frame)),u.idle&&(a=o.wrapIdleCallback(a)),s){var l=n[h].length;if(n[h].push(a),!("now"in u)||u.now)for(var f in n)a(n[f],f,n,!1);return function(){delete n[h][l]}}n[d][r]||(n[d][r]=[]);var v=n[d][r].length;if(u.children){var y=a;a=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=r[0],s=n[p].get(y);if(s&&(n[p].delete(y),s()),"object"===i(a)){var c=e.make(a);e.isBindable(c)&&n[p].set(y,c.bindTo(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.apply(void 0,r.concat(e))},Object.assign({},u,{children:!1}))),y.apply(void 0,r)}else y.apply(void 0,r)}}n[d][r].push(a),"now"in u&&!u.now||a(n[r],r,n,!1);var b=!1,g=function(){var t=n[p].get(a);t&&(n[p].delete(a),t()),b||(b=!0,n[d][r]&&delete n[d][r][v])};return u.removeWith&&u.removeWith instanceof View&&u.removeWith.onRemove(function(){return g}),g}});Object.defineProperty(n,"bindChain",{configurable:!1,enumerable:!1,writable:!1,value:function(t,e){var r=t.split("."),i=r.shift(),a=r.slice(0),u=[];return u.push(n.bindTo(i,function(t,n,r,i){var s=a.join(".");0!==a.length?(void 0===t&&(t=r[n]=o.makeBindable({})),u=u.concat(t.bindChain(s,e))):e(t,n,r,i)})),function(){return u.map(function(t){return t()})}}}),Object.defineProperty(n,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(t){var e=n.___before___.length;n.___before___.push(t);var r=!1;return function(){r||(r=!0,delete n.___before___[e])}}}),Object.defineProperty(n,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(t){var e=n.___after___.length;n.___after___.push(t);var r=!1;return function(){r||(r=!0,delete n.___after___[e])}}});for(var u in Object.defineProperty(n,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var t in n[h])if(n[h][t])return!0;for(var e in n[d])for(var r in n[d][e])if(n[d][e][r])return!0;return!1}}),n)n[u]&&n[u]instanceof Object&&!n[u]instanceof Node&&!n[u]instanceof Promise&&(n[u]=e.make(n[u]));return Object.defineProperty(n,l,{configurable:!1,enumerable:!1,writable:!0,value:n[l]}),Object.defineProperty(n,f,{configurable:!1,enumerable:!1,writable:!1,value:n}),n[l]=new Proxy(n,{get:function(t,o){if(o===l||"isBound"===o||"bindTo"===o||"__proto__"===o)return t[o];var i=Object.getOwnPropertyDescriptor(n,o);return!i||i.configurable||i.writable?n[O]?n[O](o):!n[_]||o in n?t[o]instanceof Function?t[m][o]?e.make(t[m][o]):!i||i.configurable||i.writable?(t[m][o]=function(){t[b]=o,t[g].unshift(o);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];for(var u in t.___before___)t.___before___[u](t,o,t[g],n,i);var s=n instanceof Promise||n instanceof EventTarget||n instanceof MutationObserver||n instanceof IntersectionObserver||n instanceof MutationObserver||n instanceof PerformanceObserver||"function"==typeof ResizeObserver&&n instanceof ResizeObserver||n instanceof Map||n instanceof Set?n:n[l],c=new.target?r(t[o],i):t[o].apply(s||n,i);for(var f in t.___after___)t.___after___[f](t,o,t[g],n,i);return t[b]=null,t[g].shift(),c},t[m][o]):(t[m][o]=t[o],t[m][o]):(t[o]instanceof Object&&!t[o][l]&&e.make(t[o]),t[o]):n[_](o):t[o]},set:function(t,r,o){if(void 0!==n[v][r]&&n[v][r]===o)return!0;if("string"==typeof r&&"___"===r.substring(0,3)&&"___"===r.slice(-3))return!0;if(t[r]===o)return!0;for(var i in o&&o instanceof Object&&!(o instanceof Node)&&(e.isBindable(o)||(o=e.makeBindable(o))),n[v][r]=o,n[h])n[h][i]&&n[h][i](o,r,t,!1);var a=!1;if(r in n[d])for(var u in n[d][r])n[d][r]&&n[d][r][u]&&!1===n[d][r][u](o,r,t,!1,t[r])&&(a=!0);if(delete n[v][r],!a){var s=Object.getOwnPropertyDescriptor(t,r);t instanceof File&&"lastModifiedDate"==r||s&&!s.writable||t[r]!==o||(t[r]=o)}return Reflect.set(t,r,o)},construct:function(n,o){var i="constructor";for(var a in n.___before___)n.___before___[a](n,i,n[g],void 0,o);var u=e.make(r(n,t(o)));for(var s in n.___after___)n.___after___[s](n,i,n[g],u,o);return u},getPrototypeOf:function(t){return w in n?n[w]:Reflect.getPrototypeOf(t)},deleteProperty:function(t,e){if(!(e in t))return!0;for(var r in n[h])n[h][r](void 0,e,t,!0,t[e]);if(e in n[d])for(var o in n[d][e])n[d][e][o]&&n[d][e][o](void 0,e,t,!0,t[e]);return delete t[e],!0}}),n[l]}},{key:"clearBindings",value:function(t){var e;(e=function(t){return Object.keys(t).map(function(e){return delete t[e]})},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(e)})(t[m],t[d],t[h],t.___after___,t.___before___)}},{key:"resolve",value:function(t,e){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.split("."),i=o[0];o.length;){if(r&&1===o.length)return[this.makeBindable(t),o.shift(),i];!(!(n=o.shift())in t)&&t[n]&&t[n]instanceof Object||(t[n]={}),t=this.makeBindable(t[n])}return[this.makeBindable(t),n,i]}},{key:"wrapDelayCallback",value:function(t,e){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout(function(){return t.apply(void 0,r)},e)}}},{key:"wrapThrottleCallback",value:function(t,e){var n=this;return this.throttles.set(t,!1),function(t){return function(){n.throttles.get(t,!0)||(t.apply(void 0,arguments),n.throttles.set(t,!0),setTimeout(function(){n.throttles.set(t,!1)},e))}}(t)}},{key:"wrapWaitCallback",value:function(t,e){var n=!1;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n&&(clearTimeout(n),n=!1),n=setTimeout(function(){return t.apply(void 0,o)},e)}}},{key:"wrapFrameCallback",value:function(t,e){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];requestAnimationFrame(function(){return t.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return t.apply(void 0,n)})}}}],(o=null)&&a(n.prototype,o),u&&a(n,u),e}();e.Bindable=j,u=j,s="throttles",c=new WeakMap,s in u?Object.defineProperty(u,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[s]=c,Object.defineProperty(j,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:_}),Object.defineProperty(j,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:w}),Object.defineProperty(j,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:O})}()}),require.register("curvature/base/Cache.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var n=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r,o;return n=e,o=[{key:"store",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",o=0;n&&(o=1e3*n+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[r]||(this.bucket[r]={}),this.bucket[r][t]={expiration:o,value:e}}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[n]&&this.bucket[n][t]&&(0==this.bucket[n][t].expiration||this.bucket[n][t].expiration>(new Date).getTime())?this.bucket[n][t].value:e}}],(r=null)&&t(n.prototype,r),o&&t(n,o),e}();e.Cache=n}()}),require.register("curvature/base/Config.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var r={};try{r=n("/Config").Config||{}}catch(t){!0===window.devMode&&console.error(t)}var o=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r,o;return n=e,o=[{key:"get",value:function(t){return this.configs[t]}},{key:"set",value:function(t,e){return this.configs[t]=e,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r in e){var o=e[r];for(var i in"string"==typeof o&&(o=JSON.parse(o)),o){var a=o[i];return this.configs[i]=a}}return this}}],(r=null)&&t(n.prototype,r),o&&t(n,o),e}();e.Config=o,Object.defineProperty(o,"configs",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/Dom.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var n=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r,o;return n=e,o=[{key:"mapTags",value:function(t,e,n,r,o){var i=[],a=!0;r&&(a=!1);var u=!1,s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(t,n){if(!a){if(t!==r)return NodeFilter.FILTER_SKIP;a=!0}return o&&t===o&&(u=!0),u?NodeFilter.FILTER_SKIP:e?t instanceof Element&&t.matches(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;s.nextNode();)i.push(n(s.currentNode,s));return i}},{key:"dispatchEvent",value:function(t,n){t.dispatchEvent(n),e.mapTags(t,!1,function(t){t.dispatchEvent(n)})}}],(r=null)&&t(n.prototype,r),o&&t(n,o),e}();e.Dom=n}()}),require.register("curvature/base/Mixin.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mixin=void 0;var t=n("./Bindable");function r(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;return l(t)}(this,n)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=Symbol("constructor"),h=(Symbol("mixinList"),function(){function e(){v(this,e)}var n,a,u;return n=e,u=[{key:"from",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var a=c(u);function u(){var t;v(this,u);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];t=a.call.apply(a,[this].concat(s));var f,d=i(r);try{for(d.s();!(f=d.n()).done;){var p=f.value;switch(p[e.Constructor]&&p[e.Constructor].apply(l(t)),o(p)){case"object":e.mixObject(p,l(t))}}}catch(t){d.e(t)}finally{d.f()}return t}return u}()}},{key:"with",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.from.apply(this,[Object].concat(e))}},{key:"mixObject",value:function(t,e){var n,r=i(Object.getOwnPropertyNames(t));try{for(r.s();!(n=r.n()).done;){var o=n.value;"function"!=typeof t[o]?e[o]=t[o]:e[o]=t[o].bind(e)}}catch(t){r.e(t)}finally{r.f()}var a,u=i(Object.getOwnPropertySymbols(t));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof t[s]?e[s]=t[s]:e[s]=t[s].bind(e)}}catch(t){u.e(t)}finally{u.f()}}},{key:"mixClass",value:function(t,e){var n,r=i(Object.getOwnPropertyNames(t.prototype));try{for(r.s();!(n=r.n()).done;){var o=n.value;e.prototype[o]=t.prototype[o].bind(e.prototype)}}catch(t){r.e(t)}finally{r.f()}var a,u=i(Object.getOwnPropertySymbols(t.prototype));try{for(u.s();!(a=u.n()).done;){var s=a.value;e.prototype[s]=t.prototype[s].bind(e.prototype)}}catch(t){u.e(t)}finally{u.f()}var c,l=i(Object.getOwnPropertyNames(t));try{var f=function(){var n=c.value;if("function"!=typeof t[n])return"continue";var r=e[n]||!1,o=t[n].bind(e);e[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(l.s();!(c=l.n()).done;)f()}catch(t){l.e(t)}finally{l.f()}var v,d=i(Object.getOwnPropertySymbols(t));try{var p=function(){var n=v.value;if("function"!=typeof t[n])return"continue";var r=e[n]||!1,o=t[n].bind(e);e[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(d.s();!(v=d.n()).done;)p()}catch(t){d.e(t)}finally{d.f()}}},{key:"mix",value:function(e){for(var n={},o={},a=t.Bindable.makeBindable(e),u=function(t){var e,u=Object.getOwnPropertyNames(t.prototype),s=/^(before|after)__(.+)/,c=i(Object.getOwnPropertyNames(t));try{var l=function(){var o=e.value,i=o.match(s);if(i){switch(i[1]){case"before":a.___before(function(e,n,a,u,s){if(n===i[2])return t[o].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(e,n,a,u,s){if(n===i[2])return t[o].bind(u).apply(void 0,r(s))})}return"continue"}return n[o]?"continue":"function"!=typeof t[o]?"continue":void(n[o]=t[o])};for(c.s();!(e=c.n()).done;)l()}catch(t){c.e(t)}finally{c.f()}var f,v=i(u);try{var d=function(){var e=f.value,n=e.match(s);if(n){switch(n[1]){case"before":a.___before(function(o,i,a,u,s){if(i===n[2])return t.prototype[e].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(o,i,a,u,s){if(i===n[2])return t.prototype[e].bind(u).apply(void 0,r(s))})}return"continue"}return o[e]?"continue":"function"!=typeof t.prototype[e]?"continue":void(o[e]=t.prototype[e])};for(v.s();!(f=v.n()).done;)d()}catch(t){v.e(t)}finally{v.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var c in n)e[c]=n[c].bind(e);var l=function(t){e.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return o[t].apply(this,n)}};for(var f in o)l(f);return a}}],(a=null)&&d(n.prototype,a),u&&d(n,u),e}());e.Mixin=h,h.Constructor=p}()}),require.register("curvature/base/Model.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var t=n("./Cache"),r=n("./Bindable");n("./Repository");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.repository=t}var n,i,a;return n=e,(i=[{key:"consume",value:function(n){for(var o in n){var i=n[o];if(n[o]instanceof Object&&n[o].class&&n[o].publicId){var a="".concat(n[o].class,"::").concat(n[o].publidId),u=t.Cache.load(a,!1,"model-type-repo");i=r.Bindable.makeBindable(new e(this.repository)),u&&(i=u),i.consume(n[o]),t.Cache.store(a,i,0,"model-type-repo")}this[o]=i}}}])&&o(n.prototype,i),a&&o(n,a),e}();e.Model=i}()}),require.register("curvature/base/Repository.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Repository=void 0;var t=n("./Bindable"),r=n("./Router"),o=n("./Cache"),i=n("./Model"),a=n("./Bag"),u=n("../form/Form"),s=n("../form/multiField/FormWrapper");function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.uri=t}var n,f,v;return n=e,v=[{key:"loadPage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(this.uri,t).then(function(t){return t})}},{key:"domCache",value:function(t,e){}},{key:"load",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][t]?Promise.resolve(this.objects[this.uri][t]):this.request(this.uri+"/"+t).then(function(t){})}},{key:"form",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.uri+"/create";return t&&(e=this.uri+"/"+t+"/edit"),this.request(e).then(function(t){return t})}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var r in n||(n=new FormData),t){var o=r;e&&(o="".concat(e,"[").concat(o,"]")),t[r]&&"object"!==c(t[r])?n.append(o,t[r]):this.encode(t[r],o,n)}return n}},{key:"onResponse",value:function(t){return this._onResponse||(this._onResponse=new a.Bag),this._onResponse.add(t)}},{key:"request",value:function(t){var e,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s="GET",c=null,l={};r&&(l=r),this._onResponse||(this._onResponse=new a.Bag),this.runningRequests||(this.runningRequests={}),l.api=l.api||"json",e=Object.keys(l).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(l[t])}).join("&");var f;if(f=t+"?"+e,!o&&this.runningRequests[f])return this.runningRequests[f];o&&(i=!1,s="POST",c=o instanceof FormData?o:this.encode(o));var v=new XMLHttpRequest;if("responseType"in u&&(v.responseType=u.responseType),!o&&i&&this.cache&&this.cache[f])return Promise.resolve(this.cache[f]);var d='script[data-uri="'+f+'"]',p=document.querySelector(d);if(!o&&i&&p){var h=JSON.parse(p.innerText);return Promise.resolve(h)}v.withCredentials=!("withCredentials"in u)||u.withCredentials,document.createElement("a").href=f,o||(v.timeout=u.timeout||15e3,this.xhrs[f]=v);var y=new Promise(function(t,e){if(o&&"progressUp"in u&&(v.upload.onprogress=u.progressUp),"progressDown"in u&&(v.onprogress=u.progressDown),v.onreadystatechange=function(){var r;if(4===v.readyState)if(delete n.xhrs[f],delete n.runningRequests[f],n.cache||(n.cache={}),"application/json"==v.getResponseHeader("Content-Type")||"application/json; charset=utf-8"==v.getResponseHeader("Content-Type")||"text/json"==v.getResponseHeader("Content-Type")||"text/json; charset=utf-8"==v.getResponseHeader("Content-Type"))if((r=JSON.parse(v.responseText))&&0==r.code){var o=document.querySelector('script[data-uri="'+f+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,o||((o=document.createElement("script")).type="text/json",o.setAttribute("data-hack","application/ld+json-NOT!"),o.setAttribute("data-uri",f),document.head.appendChild(o)),o.innerText=JSON.stringify(r));var i=n._onResponse.items();for(var a in i)i[a](r,!0);r._http=v.status,200===v.status?t(r):e(r)}else{var u=n._onResponse.items();for(var s in u)u[s](r,!0);e(r)}else{var c=n._onResponse.items();for(var l in c)c[l](v,!0);200===v.status?t(v):e(v)}},v.open(s,f,!0),u.headers)for(var r in u.headers)v.setRequestHeader(r,u.headers[r]);v.send(c)});return o||(this.runningRequests[f]=y),y}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/^.$/;for(var e in this.xhrs)this.xhrs[e]&&e.match(t)&&(this.xhrs[e].abort(),delete this.xhrs[e])}}],(f=[{key:"get",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=this.uri+"/"+t,s=o.Cache.load(u+r.Router.queryToString(r.Router.queryOver(a),!0),!1,"model-uri-repo");return!i&&s?Promise.resolve(s):e.request(u,a).then(function(t){return n.extractModel(t.body)})}},{key:"page",value:function(){var t=this,n=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1?arguments[1]:void 0);return e.request(this.uri,n).then(function(e){var n=[];for(var r in e.body){var o=e.body[r];n.push(t.extractModel(o))}return e.body=n,e})}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.uri+"/create";return t&&(o=this.uri+"/"+t+"/edit"),n?e.request(o,{api:"json"},n).then(function(t){return t.body}):e.request(o).then(function(t){var e=new u.Form(t.meta.form,r);return new s.FormWrapper(e,o,"POST",r)})}},{key:"extractModel",value:function(e){var n=t.Bindable.makeBindable(new i.Model(this));n.consume(e);this.uri,n.publicId;if(n.class){var r="".concat(n.class,"::").concat(n.publidId);o.Cache.load(r,!1,"model-type-repo")}return n}}])&&l(n.prototype,f),v&&l(n,v),e}();e.Repository=f,f.xhrs=[]}()}),require.register("curvature/base/Router.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var t=n("./View"),r=(n("./Cache"),n("./Config")),o=n("./Routes");function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=Symbol("NotFound"),c=Symbol("Internal"),l=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,a,c;return n=e,c=[{key:"wait",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){e.listen(t)})}},{key:"listen",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.routes=n,Object.assign(this.query,this.queryOver({}));var r=function(n){for(var r in n.preventDefault(),n.state&&"routedId"in n.state?n.state.routedId<=e.routeCount?(e.history.splice(n.state.routedId),e.routeCount=n.state.routedId):n.state.routedId>e.routeCount&&(e.history.push(n.state.prev),e.routeCount=n.state.routedId):null!==e.prevPath&&e.prevPath!==location.pathname&&e.history.push(e.prevPath),"null"!==location.origin?e.match(location.pathname,t):e.match(e.nextPath,t),e.query)delete e.query[r];Object.assign(e.query,e.queryOver({}))};window.addEventListener("popstate",r),window.addEventListener("cvUrlChanged",r);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash),this.go(!1!==o?o:"/")}},{key:"go",value:function(t,e){var n=r.Config.get("title");for(var o in n&&(document.title=n),"null"===location.origin?this.nextPath=t:2===e&&location.pathname!==t?history.replaceState({routedId:this.routeCount,prev:this.prevPath,url:location.pathname},null,t):location.pathname!==t&&history.pushState({routedId:++this.routeCount,prev:this.prevPath,url:location.pathname},null,t),e||(!1===e&&(this.path=null),"#"===t.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged"))),this.query)delete this.query[o];Object.assign(this.query,this.queryOver({})),this.prevPath=t}},{key:"match",value:function(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==e||i){this.queryString=location.search,this.path=e;var a=this.prevPath,u=n.args.content,c=this.routes||n.routes||o.Routes.dump();new URLSearchParams(location.search);for(var l in this.query)delete this.query[l];Object.assign(this.query,this.queryOver({}));var f={},v=!1,d="";for(var p in e=e.substr(1).split("/"),this.query)f[p]=this.query[p];t:for(var h in c){var y=h.split("/");if(!(y.length<e.length&&"*"!==y[y.length-1])){for(var b in y)if("%"==y[b].substr(0,1)){var g=null,m=/^%(\w+)\??/.exec(y[b]);if(m&&m[1]&&(g=m[1]),!g)throw new Error("".concat(y[b],' is not a valid argument segment in route "').concat(h,'"'));if(e[b])f[g]=e[b];else{if("?"!=y[b].substr(y[b].length-1,1))continue t;f[g]=""}}else if("*"!==y[b]&&e[b]!==y[b])continue t;v=h,d=c[h],"*"===y[y.length-1]&&(f.pathparts=e.slice(y.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:a,root:n,selected:v,routes:c}});if(document.dispatchEvent(w)){if(!i&&n&&u&&d instanceof Object&&u instanceof d&&!(d instanceof Promise)&&u.update(f))return n.args.content=u,!0;try{v in c||(c[v]=c[s]);var _=function(e){return"function"==typeof c[e]?c[e].prototype instanceof t.View?new c[e](f):c[e](f):c[e]};return!1===(d=_(v))&&(d=_(s)),d instanceof Promise?d.then(function(t){r.update(n,e,t,c,v,f,i)}).catch(function(t){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:t,path:e,prev:a,view:n,routes:c,selected:v}})),r.update(n,e,window.devMode?String(t):"Error: 500",c,v,f,i),t}):this.update(n,e,d,c,v,f,i)}catch(t){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:t,path:e,prev:a,view:n,routes:c,selected:v}})),this.update(n,e,window.devMode?String(t):"Error: 500",c,v,f,i),t}}}}},{key:"update",value:function(e,n,r,o,i,a,u){if(e){var s=this.prevPath,c=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:n,prev:s,view:e,routes:o,selected:i}});!1!==r&&(e.args.content instanceof t.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(c)&&(e.args.content=r),r instanceof t.View&&(r.pause(!1),r.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:n,prev:s,view:e,routes:o,selected:i}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={},o=i(new URLSearchParams(location.search));try{for(o.s();!(t=o.n()).done;){var a=t.value;r[a[0]]=a[1]}}catch(t){o.e(t)}finally{o.f()}return delete(n=Object.assign(n,r,e)).api,n}},{key:"queryToString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=t;for(var o in e||(r=this.queryOver(t)),r)""!==r[o]&&n.push(o+"="+encodeURIComponent(r[o]));return n.join("&")}},{key:"setQuery",value:function(t,e,n){var r=this.queryOver();r[t]=e,void 0===e&&delete r[t];var o=this.queryToString(r,!0);this.go(location.pathname+(o?"?"+o:""),n)}}],(a=null)&&u(n.prototype,a),c&&u(n,c),e}();e.Router=l,Object.defineProperty(l,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(l,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(l,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(l,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:c}),Object.defineProperty(l,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:s})}()}),require.register("curvature/base/Routes.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Routes=void 0;var r={};try{Object.assign(r,n("Routes").Routes||{})}catch(t){!0===window.devMode&&console.warn(t)}var o=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r,o;return n=e,o=[{key:"get",value:function(t){return this.routes[t]}},{key:"dump",value:function(){return this.routes}}],(r=null)&&t(n.prototype,r),o&&t(n,o),e}();e.Routes=o,Object.defineProperty(o,"routes",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/RuleSet.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleSet=void 0;n("./Dom");var t=n("./Tag"),r=n("./View");function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,i,u;return n=e,u=[{key:"add",value:function(t,e){return this.globalRules=this.globalRules||{},this.globalRules[t]=this.globalRules[t]||[],this.globalRules[t].push(e),this}},{key:"apply",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i,a=this.globalRules[n][r],u=this.wrap(t,a,e),s=o(t.querySelectorAll(n));try{for(s.s();!(i=s.n()).done;){u(i.value)}}catch(t){s.e(t)}finally{s.f()}}}},{key:"wait",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(e,n){return function(){return n.removeEventListener(e,r),t.apply()}}(e,n);n.addEventListener(e,r)}},{key:"wrap",value:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(n=function(t){return function(){return t}}(n)),function(e){for(var i in void 0===e.___cvApplied___&&Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!1,value:[]}),e.___cvApplied___)if(n==e.___cvApplied___[i])return;var a,u;o&&(a=u=o,o.viewList&&(u=o.viewList.parent)),u&&u.onRemove(function(){return e.___cvApplied___.splice(0)});var s,c=new t.Tag(e,u,null,void 0,a),l=c.element.parentNode,f=c.element.nextSibling,v=n(c);if(!1!==v&&e.___cvApplied___.push(n),v instanceof HTMLElement&&(v=new t.Tag(v)),v instanceof t.Tag){if(!v.element.contains(c.element)){for(;c.element.firstChild;)v.element.appendChild(c.element.firstChild);c.remove()}f?l.insertBefore(v.element,f):l.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof r.View&&(v=new v({},o)),v instanceof r.View&&(o&&(o.cleanup.push((s=v,function(){s.remove()})),o.cleanup.push(o.args.bindTo(function(t,e,n){n[e]=t,v.args[e]=t})),o.cleanup.push(v.args.bindTo(function(t,e,n,r){n[e]=t,o.args[e]=t}))),c.clear(),v.render(c.element))}}}],(i=[{key:"add",value:function(t,e){return this.rules=this.rules||{},this.rules[t]=this.rules[t]||[],this.rules[t].push(e),this}},{key:"apply",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in e.apply(t,n),this.rules)for(var i in this.rules[r]){var a,u=this.rules[r][i],s=e.wrap(t,u,n),c=o(t.querySelectorAll(r));try{for(c.s();!(a=c.n()).done;){s(a.value)}}catch(t){c.e(t)}finally{c.f()}}}}])&&a(n.prototype,i),u&&a(n,u),e}();e.RuleSet=u}()}),require.register("curvature/base/Tag.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var t=n("./Bindable");function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function e(n,r,o,i,a){var u,s=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof n){var c=document.createRange().createContextualFragment(n);n=c.firstChild}return this.element=t.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=a,this.ref=o,this.index=i,this.cleanup=[],this[t.Bindable.OnAllGet]=function(t){return"function"==typeof s[t]?s[t]:s.node&&"function"==typeof s.node[t]?function(){var e;return(e=s.node)[t].apply(e,arguments)}:s.node&&t in s.node?s.node[t]:s[t]},this.style=(u=this,t.Bindable.make(function(t){if(u.node){var e=new CustomEvent("cvStyle",{detail:{styles:t}});if(u.node.dispatchEvent(e))for(var n in t)"-"===n[0]&&u.node.style.setProperty(n,t[n]),u.node.style[n]=t[n]}})),this.proxy=t.Bindable.make(this),this.proxy.style.bindTo(function(t,e){s.element.style[e]=t}),this.proxy.bindTo(function(t,e){return e in n&&(n[e]=t),!1}),this.proxy}var n,o,i;return n=e,(o=[{key:"attr",value:function(t){for(var e in t)void 0===t[e]?this.node.removeAttribute(e):null===t[e]?this.node.setAttribute(e,""):this.node.setAttribute(e,t[e])}},{key:"remove",value:function(){var e;for(this.node&&this.node.remove(),t.Bindable.clearBindings(this);e=this.cleanup.shift();)e();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var t=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(t),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(t,e,n){var r=this.node;r.addEventListener(t,e,n);var o=function(){r.removeEventListener(t,e,n)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return i()}),i}}])&&r(n.prototype,o),i&&r(n,i),e}();e.Tag=o}()}),require.register("curvature/base/View.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var t=n("./Bindable"),r=n("./ViewList"),o=n("./Router"),i=n("./Dom"),a=n("./Tag"),u=n("./Bag"),s=n("./RuleSet"),c=n("./Mixin"),l=(n("../mixin/PromiseMixin"),n("../mixin/EventTargetMixin"));function f(t){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function h(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=j(t);if(e){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=Symbol("dontParse"),S=Symbol("expandBind"),R=Symbol("uuid"),P=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(h,c.Mixin["with"](l.EventTargetMixin));var f=w(h);function h(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),e=f.call(this),Object.defineProperty(O(e),"args",{value:t.Bindable.make(n)}),Object.defineProperty(O(e),R,{value:e.uuid()}),Object.defineProperty(O(e),"attach",{value:new u.Bag(function(t,e,n){})}),Object.defineProperty(O(e),"detach",{value:new u.Bag(function(t,e,n){})}),Object.defineProperty(O(e),"_onRemove",{value:new u.Bag(function(t,e,n){})}),Object.defineProperty(O(e),"cleanup",{value:[]}),Object.defineProperty(O(e),"parent",{value:r}),Object.defineProperty(O(e),"views",{value:new Map}),Object.defineProperty(O(e),"viewLists",{value:new Map}),Object.defineProperty(O(e),"withViews",{value:new Map}),Object.defineProperty(O(e),"tags",{value:t.Bindable.make({})}),Object.defineProperty(O(e),"nodes",{value:t.Bindable.make([])}),Object.defineProperty(O(e),"intervals",{value:[]}),Object.defineProperty(O(e),"timeouts",{value:[]}),Object.defineProperty(O(e),"frames",{value:[]}),Object.defineProperty(O(e),"ruleSet",{value:new s.RuleSet}),Object.defineProperty(O(e),"preRuleSet",{value:new s.RuleSet}),Object.defineProperty(O(e),"subBindings",{value:{}}),Object.defineProperty(O(e),"templates",{value:{}}),Object.defineProperty(O(e),"eventCleanup",{value:[]}),Object.defineProperty(O(e),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(O(e),"rendered",{value:new Promise(function(t,n){return Object.defineProperty(O(e),"renderComplete",{value:t})})}),e.template="",e.firstNode=null,e.lastNode=null,e.viewList=null,e.mainView=null,e.preserve=!1,e.removed=!1,_(e,t.Bindable.make(O(e)))}return g(h,[{key:"_id",get:function(){return this[R]}}],[{key:"from",value:function(t){var e=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return e.template=t,e}}]),g(h,[{key:"onFrame",value:function(t){var e=this,n=!1,r=function(){n=!0};return requestAnimationFrame(function(){return function r(o){e.removed||n||(e.paused||t(Date.now()),requestAnimationFrame(r))}(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(t){return requestAnimationFrame(function(){return t(Date.now())})}},{key:"onIdle",value:function(t){return requestIdleCallback(function(){return t(Date.now())})}},{key:"onTimeout",value:function(t,e){var n=this,r=function(){n.timeouts[i].fired=!0,n.timeouts[i].callback=null,e()},o=setTimeout(r,t),i=this.timeouts.length;return this.timeouts.push({timeout:o,callback:r,time:t,fired:!1,created:(new Date).getTime(),paused:!1}),o}},{key:"clearTimeout",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){for(var e in this.timeouts)t===this.timeouts[e].timeout&&(clearTimeout(this.timeouts[e].timeout),delete this.timeouts[e])})},{key:"onInterval",value:function(t,e){var n=setInterval(e,t);return this.intervals.push({timeout:n,callback:e,time:t,paused:!1}),n}},{key:"clearInterval",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){for(var e in this.intervals)t===this.intervals[e].timeout&&(clearInterval(this.intervals[e].timeout),delete this.intervals[e])})},{key:"pause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===t&&(this.paused=!this.paused),this.paused=t,this.paused){for(var e in this.timeouts)this.timeouts[e].fired?delete this.timeouts[e]:clearTimeout(this.timeouts[e].timeout);for(var n in this.intervals)clearInterval(this.intervals[n].timeout)}else{for(var r in this.timeouts)this.timeouts[r].timeout.paused&&(this.timeouts[r].fired?delete this.timeouts[r]:this.timeouts[r].timeout=setTimeout(this.timeouts[r].callback,this.timeouts[r].time));for(var o in this.intervals)this.intervals[o].timeout.paused&&(this.intervals[o].timeout.paused=!1,this.intervals[o].timeout=setInterval(this.intervals[o].callback,this.intervals[o].time))}var i,a=p(this.viewLists);try{for(a.s();!(i=a.n()).done;){var u=d(i.value,2);u[0];u[1].pause(!!t)}}catch(t){a.e(t)}finally{a.f()}for(var s in this.tags)if(Array.isArray(this.tags[s]))for(var c in this.tags[s])this.tags[s][c].pause(!!t);else this.tags[s].pause(!!t)}},{key:"render",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof h&&(n=n.firstNode.parentNode),r instanceof h&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);this.dispatchEvent(new CustomEvent("render"));var o=this.template instanceof DocumentFragment?this.template.cloneNode(!0):h.templates.has(this.template),i=o?this.template instanceof DocumentFragment?o:h.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(o||this.template instanceof DocumentFragment||h.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(t=this.nodes).push.apply(t,[this.firstNode].concat(v(Array.from(i.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var a=n.getRootNode(),u=!1;a.isConnected&&(u=!0,"external"),r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(i,this.lastNode),0,u?(this.attached(a,n),this.dispatchAttached(a,n)):n.addEventListener("cvDomAttached",function(){e.attached(a,n),e.dispatchAttached(a,n)},{once:!0})}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(t,e){this.dispatchEvent(new CustomEvent("attached",{target:this}));var n=this.attach.items();for(var r in n)n[r](t,e);this.nodes.filter(function(t){return t.nodeType!==Node.COMMENT_NODE}).map(function(t){t.matches&&(i.Dom.mapTags(t,!1,function(t,e){t.matches&&t.dispatchEvent(new Event("cvDomAttached",{target:t}))}),t.dispatchEvent(new Event("cvDomAttached",{target:t})))})}},{key:"reRender",value:function(t,e){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.detach.items();for(var o in r)r[o]()}if(n.append.apply(n,v(this.nodes)),t){e?(t.insertBefore(this.firstNode,e),t.insertBefore(this.lastNode,e)):(t.appendChild(this.firstNode),t.appendChild(this.lastNode)),t.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=t.getRootNode();i.isConnected&&(this.attached(i,t),this.dispatchAttached(i,t))}return this.nodes}}},{key:"mapTags",value:function(t){var e=this;i.Dom.mapTags(t,!1,function(t,n){t[k]||(t=t.matches?(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=e.mapInterpolatableTag(t)).matches("[cv-template]")&&e.mapTemplateTag(t)||t).matches("[cv-slot]")&&e.mapSlotTag(t)||t).matches("[cv-prerender]")&&e.mapPrendererTag(t)||t).matches("[cv-link]")&&e.mapLinkTag(t)||t).matches("[cv-attr]")&&e.mapAttrTag(t)||t).matches("[cv-expand]")&&e.mapExpandableTag(t)||t).matches("[cv-ref]")&&e.mapRefTag(t)||t).matches("[cv-on]")&&e.mapOnTag(t)||t).matches("[cv-each]")&&e.mapEachTag(t)||t).matches("[cv-bind]")&&e.mapBindTag(t)||t).matches("[cv-with]")&&e.mapWithTag(t)||t).matches("[cv-if]")&&e.mapIfTag(t)||t).matches("[cv-view]")&&e.mapViewTag(t)||t:e.mapInterpolatableTag(t))!==n.currentNode&&(n.currentNode=t)})}},{key:"mapExpandableTag",value:function(e){var n=e[S];n&&(n(),e[S]=!1);var r=d(t.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),o=r[0],i=r[1];return e.removeAttribute("cv-expand"),o[i]||(o[i]={}),this.onRemove(e[S]=o[i].bindTo(function(t,n,r,o,i){o||void 0===t?e.removeAttribute(n,t):null!==t?e.setAttribute(n,t):e.setAttribute(n,"")})),e}},{key:"compileExpandableTag",value:function(e){return function(n){var r=e.cloneNode(!0),o=r.getAttribute("cv-expand"),i=t.Bindable.make(n.args[o]||{});r.removeAttribute("cv-expand");var a=function(e){if("name"===e||"type"===e)return"continue";var o=i.bindTo(e,function(t,e){return function(n){t.setAttribute(e,n)}}(r,e));n.onRemove(function(){o(),i.isBound()&&t.Bindable.clearBindings(i)})};for(var u in i)a(u);return r}}},{key:"mapAttrTag",value:function(t){var e=this.compileAttrTag(t)(this);return t.replaceWith(e),e}},{key:"compileAttrTag",value:function(e){var n=e.getAttribute("cv-attr").split(",").map(function(t){return t.split(":")});return e.removeAttribute("cv-attr"),function(r){var o=e.cloneNode(!0),i=function(e){var i=n[e][1]||n[e][0],a=d(t.Bindable.resolve(r.args,i,!0),2),u=a[0],s=a[1],c=n[e][0];r.onRemove(u.bindTo(s,function(t,e,n,r){r||void 0===t?o.removeAttribute(c,t):null!==t?o.setAttribute(c,t):o.setAttribute(c,"")}))};for(var a in n)i(a);return o}}},{key:"mapInterpolatableTag",value:function(e){var n=this,r=this.interpolateRegex;if(e.nodeType===Node.TEXT_NODE){var o=e.nodeValue;if(!this.interpolatable(o))return e;for(var i,u=0,s=function(){var r=i[2],s=!1,c=!1,l=r.split("|"),f=!1;if(l.length>1&&(f=n.stringTransformer(l.slice(1)),r=l[0]),"$$"===r.substr(0,2)&&(s=!0,c=!0,r=r.substr(2)),"$"===r.substr(0,1)&&(s=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var v=o.substring(u,i.index);u=i.index+i[1].length;var p=document.createTextNode(v);p[k]=!0,e.parentNode.insertBefore(p,e);var y=void 0;(y=s?document.createElement("div"):document.createTextNode(""))[k]=!0;var b=n.args,g=r;if(r.match(/\./)){var m=d(t.Bindable.resolve(n.args,r,!0),2);b=m[0],g=m[1]}e.parentNode.insertBefore(y,e);var w=b.bindTo(g,function(t,r,o){if(o[r]!==t&&(o[r]instanceof h||o[r]instanceof Node||o[r]instanceof a.Tag)&&(o[r].preserve||o[r].remove()),y.nodeValue="",c&&!(t instanceof h)){var i=t;(t=new h(n.args,n)).template=i}if(f&&(t=f(t)),t instanceof h){var u=function(e){t.dispatchAttach()&&(t.attached(e),t.dispatchAttached())};n.attach.add(u),t.render(e.parentNode,y);var l=function(){t.preserve||t.remove()};n.onRemove(l),t.onRemove(function(){n.attach.remove(u),n._onRemove.remove(l)})}else t instanceof Node?(e.parentNode.insertBefore(t,y),n.onRemove(function(){return t.remove()})):t instanceof a.Tag?(e.parentNode.insertBefore(t.node,y),n.onRemove(function(){return t.remove()})):(t instanceof Object&&t.__toString instanceof Function&&(t=t.__toString()),s?y.innerHTML=t:y.nodeValue=t);y[k]=!0});n.onRemove(w)};i=r.exec(o);)s();var c=o.substring(u),l=document.createTextNode(c);l[k]=!0,e.parentNode.insertBefore(l,e),e.nodeValue=""}if(e.nodeType===Node.ELEMENT_NODE)for(var f=function(o){if(!n.interpolatable(e.attributes[o].value))return"continue";for(var i=0,a=void 0,u=e.attributes[o].value,s=e.attributes[o],c={},l=[];a=r.exec(u);)l.push(u.substring(i,a.index)),c[a[2]]||(c[a[2]]=[]),c[a[2]].push(l.length),l.push(a[1]),i=a.index+a[1].length;l.push(u.substring(i));var f=function(r){var o=n.args,i=r,a=r.split("|"),u=!1,f=r;if(a.length>1&&(u=n.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var v=d(t.Bindable.resolve(n.args,i,!0),2);o=v[0],i=v[1]}c[f];n.onRemove(o.bindTo(i,function(t,n,r,o){for(var a in u&&(t=u(t)),c)for(var v in c[f])l[c[f][v]]=r[a],n===i&&(l[c[f][v]]=t);e.setAttribute(s.name,l.join(""))})),n.onRemove(function(){o.isBound()||t.Bindable.clearBindings(o)})};for(var v in c)f(v)},v=0;v<e.attributes.length;v++)f(v);return e}},{key:"mapRefTag",value:function(t){var e=d(t.getAttribute("cv-ref").split(":"),3),n=e[0],r=e[1],o=void 0===r?null:r,i=e[2],u=void 0===i?null:i,s=a.Tag;o&&(s=this.stringToClass(o)),t.removeAttribute("cv-ref"),Object.defineProperty(t,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){t.___tag___=null,t.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var l=new s(t,this,n,void 0,this);for(t.___tag___=l,this.tags[n]=l;c;){c.parent;var f=this.args[u];void 0!==f?(c.tags[n]||(c.tags[n]=[]),c.tags[n][f]=l):c.tags[n]=l,c=c.parent}return t}},{key:"mapBindTag",value:function(e){var n=this,r=e.getAttribute("cv-bind"),o=this.args,u=r,s=null;if(r.match(/\./)){var c=d(t.Bindable.resolve(this.args,r,!0),3);o=c[0],u=c[1],s=c[2]}o!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(s,function(){for(;n.subBindings.length;)n.subBindings.shift()()})));var l=!1;"$"===u.substr(0,1)&&(u=u.substr(1),l=!0);var f=o.bindTo(u,function(t,r,o,u,s){(s instanceof h||s instanceof Node||s instanceof a.Tag)&&s!==t&&s.remove();var c=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var f=e.getAttribute("type");if(f&&"checkbox"===f.toLowerCase())e.checked=!!t,e.dispatchEvent(c);else if(f&&"radio"===f.toLowerCase())e.checked=t==e.value,e.dispatchEvent(c);else if("file"!==f){if("SELECT"===e.tagName){var v=function(n){for(var r=0;r<e.options.length;r++){e.options[r].value==t&&(e.selectedIndex=r)}};v(),n.attach.add(v)}else e.value=null==t?"":t;e.dispatchEvent(c)}}else if(t instanceof h){var d,y=p(e.childNodes);try{for(y.s();!(d=y.n()).done;){d.value.remove()}}catch(t){y.e(t)}finally{y.f()}var b=function(e){t.dispatchAttach()&&(t.attached(e),t.dispatchAttached())};n.attach.add(b),t.render(e),t.onRemove(function(){return n.attach.remove(b)})}else if(t instanceof Node)e.insert(t);else if(t instanceof a.Tag)e.append(t.node);else if(l){if(e.innerHTML!==t){if(t=String(t),e.innerHTML===t.substring(0,e.innerHTML.length))e.innerHTML+=t.substring(e.innerHTML.length);else{var g,m=p(e.childNodes);try{for(m.s();!(g=m.n()).done;){g.value.remove()}}catch(t){m.e(t)}finally{m.f()}e.innerHTML=t}i.Dom.mapTags(e,!1,function(t){return t[k]=!0})}}else if(e.textContent!==t){var w,_=p(e.childNodes);try{for(_.s();!(w=_.n()).done;){w.value.remove()}}catch(t){_.e(t)}finally{_.f()}e.textContent=t}});o!==this.args&&this.subBindings[r].push(f),this.onRemove(f);var v=e.getAttribute("type"),y=e.getAttribute("multiple"),b=function(n){if(n.target===e)if(v&&"checkbox"===v.toLowerCase())e.checked?o[u]=n.target.getAttribute("value"):o[u]=!1;else if(n.target.matches("[contenteditable=true]"))o[u]=n.target.innerHTML;else if("file"===v&&y){var r=Array.from(n.target.files),i=o[u]||t.Bindable.onDeck(o,u);if(i&&r.length){var a=function(t){if(r[t]!==i[t])return r[t].toJSON=function(){return{name:file[t].name,size:file[t].size,type:file[t].type,date:file[t].lastModified}},i[t]=r[t],"break"};for(var s in r){if("break"===a(s))break}}else o[u]=r}else if("file"!==v||y)o[u]=n.target.value;else{var c=n.target.files.item(0);c.toJSON=function(){return{name:c.name,size:c.size,type:c.type,date:c.lastModified}},o[u]=c}};return"file"===v||"radio"===v?e.addEventListener("change",b):(e.addEventListener("input",b),e.addEventListener("change",b),e.addEventListener("value-changed",b)),this.onRemove(function(){"file"===v||"radio"===v?e.removeEventListener("change",b):(e.removeEventListener("input",b),e.removeEventListener("change",b),e.removeEventListener("value-changed",b))}),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(t){var e=this;return String(t.getAttribute("cv-on")).split(";").map(function(t){return t.split(":")}).map(function(n){var r,o=(n=n.map(function(t){return t.trim()})).length,i=String(n.shift()).trim(),a=String(n.shift()||i).trim(),u=String(n.shift()||"").trim(),s=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);c?(a=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(s=c[2].split(",").map(function(t){return t.trim()})),c.length):s.push("$event"),i&&1!==o||(i=a);for(var l=e;l;){if("function"==typeof l[a])if("break"===function(){var t=l,e=a;return r=function(){t[e].apply(t,arguments)},"break"}())break;if(!l.parent)break;l=l.parent}var f=function(n){var o=s.map(function(r){var o;return parseInt(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$tag"===r?t:"$parent"===r?e.parent:"$subview"===r?e:r in e.args?e.args[r]:(o=/^['"]([\w-]+?)["']$/.exec(r))?o[1]:void 0});if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(t.outerHTML));r.apply(void 0,v(o))},d={};switch(u.includes("p")?d.passive=!0:u.includes("P")&&(d.passive=!1),u.includes("c")?d.capture=!0:u.includes("C")&&(d.capture=!1),u.includes("o")?d.once=!0:u.includes("O")&&(d.once=!1),i){case"_init":f();break;case"_attach":e.attach.add(f);break;case"_detach":e.detach.add(f);break;default:t.addEventListener(i,f,d),e.onRemove(function(){t.removeEventListener(i,f,d)})}return[i,a,s]}),t.removeAttribute("cv-on"),t}},{key:"mapLinkTag",value:function(t){var e=t.getAttribute("cv-link");t.setAttribute("href",e);var n=function(n){n.preventDefault(),"http"!==e.substring(0,4)&&"//"!==e.substring(0,2)?o.Router.go(t.getAttribute("href")):window.open(t.getAttribute("href",e))};return t.addEventListener("click",n),this.onRemove(function(t,e){return function(){t.removeEventListener("click",e),t=void 0,e=void 0}}(t,n)),t.removeAttribute("cv-link"),t}},{key:"compileLinkTag",value:function(t){var e=t.getAttribute("cv-link");return t.removeAttribute("cv-link"),function(n){var r=t.cloneNode(!0);return r.setAttribute("href",e),r}}},{key:"mapPrendererTag",value:function(t){var e=t.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===e&&n||"only"===e&&!n)&&t.parentNode.removeChild(t),t}},{key:"mapWithTag",value:function(e){var n=this,r=e.getAttribute("cv-with"),o=e.getAttribute("cv-carry"),i=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var a=i?this.stringToClass(i):h,u=new DocumentFragment;v(e.childNodes).map(function(t){return u.appendChild(t)});var s=[];o&&(s=o.split(",").map(function(t){return t.trim()}));var c=this.args.bindTo(r,function(r,o,i,c){for(n.withViews.has(e)&&n.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var l=new a({},n);n.onRemove(function(t){return function(){t.remove()}}(l)),l.template=u;var f=function(t){var e=n.args.bindTo(s[t],function(t,e){l.args[e]=t});l.onRemove(e),n.onRemove(function(){e(),l.remove()})};for(var v in s)f(v);var d=function(e){var o=r.bindTo(e,function(t,e){l.args[e]=t});l.args.bindTo(e,function(t,e){r[e]=t});n.onRemove(function(){o(),r.isBound()||t.Bindable.clearBindings(r),l.remove()}),l.onRemove(function(){o(),r.isBound()||t.Bindable.clearBindings(r)})};for(var p in r)d(p);l.render(e),n.withViews.set(e,l)});return this.onRemove(function(){n.withViews.delete(e),c()}),e}},{key:"mapViewTag",value:function(t){var e=this,n=t.getAttribute("cv-view");t.removeAttribute("cv-view");var r=new DocumentFragment;v(t.childNodes).map(function(t){return r.appendChild(t)});var o=n.split(":"),i=o.pop()?this.stringToClass(n):h,a=o.shift(),u=new i(this.args,this);return this.views.set(t,u),a&&this.views.set(a,u),this.onRemove(function(n){return function(){n.remove(),e.views.delete(t),e.views.delete(a)}}(u)),u.template=r,u.render(t),t}},{key:"mapEachTag",value:function(t){var e=this,n=t.getAttribute("cv-each"),o=t.getAttribute("cv-view");t.removeAttribute("cv-each"),t.removeAttribute("cv-view");var i=o?this.stringToClass(o):h,a=new DocumentFragment;Array.from(t.childNodes).map(function(t){return a.appendChild(t)});var u=d(n.split(":"),3),s=u[0],c=u[1],l=u[2],f=this.args.bindTo(s,function(n,o,u,s,f){e.viewLists.has(t)&&e.viewLists.get(t).remove();var v=new r.ViewList(a,c,n,e,l,i),d=function(){return v.remove()};e.onRemove(d),v.onRemove(function(){return e._onRemove.remove(d)});var p=e.args.bindTo(function(t,e,n,r){"_id"!==e&&(r&&delete v.subArgs[e],v.subArgs[e]=t)}),h=v.args.bindTo(function(t,n,r,o,i){"_id"!==n&&"value"!==n&&"___"!==n.substring(0,3)&&(o&&delete e.args[n],n in e.args&&(e.args[n]=t))});for(v.onRemove(p),v.onRemove(h),e.onRemove(p),e.onRemove(h);t.firstChild;)t.removeChild(t.firstChild);e.viewLists.set(t,v),v.render(t)});return this.onRemove(f),t}},{key:"mapIfTag",value:function(e){var n=this,r=e,o=r.getAttribute("cv-if"),i=!1,a=!1;r.removeAttribute("cv-if"),"!"===o.substr(0,1)&&(o=o.substr(1),i=!0),"?"===o.substr(0,1)&&(o=o.substr(1),a=!0);var u=new DocumentFragment;Array.from(r.childNodes).map(function(t){return u.appendChild(t)});var s=this,c=new DocumentFragment,l=new h(this.args,s);l.template=u;var f=s.args,v=o;if(o.match(/\./)){var p=d(t.Bindable.resolve(s.args,o,!0),2);f=p[0],v=p[1]}var y=!1,b=f.bindTo(v,function(t,n){a&&(t=null!==t&&void 0!==t),Array.isArray(t)&&(t=!!t.length),i&&(t=!t),y||(l.render(c),y=!0),t?e.appendChild(c):l.nodes.map(function(t){return c.appendChild(t)})},{wait:0,children:Array.isArray(f[v])});s.onRemove(b);var g=function(){f.isBound()||t.Bindable.clearBindings(f)};return s.onRemove(function(){b(),g(),s._onRemove.remove(b),s._onRemove.remove(g)}),this.onRemove(function(){l.remove(),s!==n&&s.remove()}),e}},{key:"compileIfTag",value:function(e){var n=e.getAttribute("cv-if"),r=!1;e.removeAttribute("cv-if"),"!"===n.substr(0,1)&&(n=n.substr(1),r=!0);var o=new DocumentFragment;return Array.from(e.childNodes).map(function(t){return o.appendChild(t.cloneNode(!0))}),function(i){var a=e.cloneNode(),u=new DocumentFragment,s=new h({},i);s.template=o,i.syncBind(s);var c=i.args,l=n;if(n.match(/\./)){var f=d(t.Bindable.resolve(i.args,n,!0),2);c=f[0],l=f[1]}var v=!1,p=c.bindTo(l,function(t,e){if(!v){var n=i.args[l]||r?a:u;return s.render(n),void(v=!0)}Array.isArray(t)&&(t=!!t.length),r&&(t=!t),t?a.appendChild(u):s.nodes.map(function(t){return u.appendChild(t)})});i.onRemove(p);var y=function(){c.isBound()||t.Bindable.clearBindings(c)};return s.onRemove(function(){p(),y(),i._onRemove.remove(p),i._onRemove.remove(y)}),a}}},{key:"mapTemplateTag",value:function(t){var e=t.getAttribute("cv-template");return t.removeAttribute("cv-template"),this.templates[e]=function(){return"TEMPLATE"===t.tagName?t.content.cloneNode(!0):new DocumentFragment(t.innerHTML)},this.rendered.then(function(){return t.remove()}),t}},{key:"mapSlotTag",value:function(t){var e=t.getAttribute("cv-slot"),n=this.templates[e];if(!n){for(var r=this;r&&!(n=r.templates[e]);)r=this.parent;if(!n)return void console.error("Template ".concat(e," not found."))}var o=n();for(t.removeAttribute("cv-slot");t.firstChild;)t.firstChild.remove();return t.appendChild(o),t}},{key:"syncBind",value:function(t){var e=this,n=this.args.bindTo(function(e,n,r,o){"_id"!==n&&t.args[n]!==e&&(t.args[n]=e)}),r=t.args.bindTo(function(t,n,r,o,i){if("_id"!==n){var a=t,u=i;a instanceof h&&(a=a.___ref___),u instanceof h&&(u=u.___ref___),a!==u&&u instanceof h&&i.remove(),n in e.args&&(e.args[n]=t)}});this.onRemove(n),this.onRemove(r),t.onRemove(function(){e._onRemove.remove(n),e._onRemove.remove(r)})}},{key:"postRender",value:function(t){}},{key:"attached",value:function(t){}},{key:"interpolatable",value:function(t){return!!String(t).match(this.interpolateRegex)}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}},{key:"remove",value:function(){var t=this,e=function(){for(var e in t.tags)Array.isArray(t.tags[e])?(t.tags[e]&&t.tags[e].map(function(t){return t.remove()}),t.tags[e].splice(0)):(t.tags[e]&&t.tags[e].remove(),t.tags[e]=void 0);for(var n in t.nodes)t.nodes[n]&&t.nodes[n].dispatchEvent(new Event("cvDomDetached")),t.nodes[n]&&t.nodes[n].remove(),t.nodes[n]=void 0;t.nodes.splice(0),t.firstNode=t.lastNode=void 0};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?e():requestAnimationFrame(e);var n,r,o=p(this._onRemove.items());try{for(o.s();!(n=o.n()).done;){var i=n.value;this._onRemove.remove(i),i()}}catch(t){o.e(t)}finally{o.f()}for(;r=this.cleanup.shift();)r&&r();var a,u=p(this.viewLists);try{for(u.s();!(a=u.n()).done;){var s=d(a.value,2);s[0];s[1].remove()}}catch(t){u.e(t)}finally{u.f()}for(var c in this.viewLists.clear(),this.timeouts)clearTimeout(this.timeouts[c].timeout),delete this.timeouts[c];for(var l in this.intervals)clearInterval(this.intervals[l].timeout),delete this.intervals[l];for(var l in this.frames)this.frames[l](),delete this.frames[l];this.removed=!0}},{key:"findTag",value:function(t){for(var e in this.nodes){var n;if(this.nodes[e].querySelector){if(this.nodes[e].matches(t))return new a.Tag(this.nodes[e],this,void 0,void 0,this);if(n=this.nodes[e].querySelector(t))return new a.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(t){var e=this;return this.nodes.filter(function(t){return t.querySelectorAll}).map(function(e){return v(e.querySelectorAll(t))}).flat().map(function(t){return new a.Tag(t,e,void 0,void 0,e)})}},{key:"onRemove",value:function(t){this._onRemove.add(t)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(t){}},{key:"afterUpdate",value:function(t){}},{key:"stringTransformer",value:function(t){var e=this;return function(n){for(var r in t){for(var o=e,i=t[r];o&&!o[i];)o=o.parent;if(!o)return;n=o[t[r]](n)}return n}}},{key:"stringToClass",value:function(t){if(h.refClasses.has(t))return h.refClasses.get(t);var e=t.split("/"),r=e[e.length-1],o=n(t);return h.refClasses.set(t,o[r]),o[r]}},{key:"preventParsing",value:function(t){t[k]=!0}},{key:"toString",value:function(){return this.nodes.map(function(t){return t.outerHTML}).join(" ")}},{key:"listen",value:function(t,e,n,r){var o=this;if("string"==typeof t&&(r=n,n=e,e=t,t=this),t instanceof h)return this.listen(t.nodes,e,n,r);if(Array.isArray(t)){var i=t.map(function(t){return o.listen(t,e,n,r)});return function(){return i.map(function(t){return t()})}}if(t instanceof a.Tag)return this.listen(t.element,e,n,r);t.addEventListener(e,n,r);var u=function(){t.removeEventListener(e,n,r)},s=function(){u(),u=function(){}};return this.onRemove(function(){return s()}),s}}],[{key:"isView",value:function(){return h}}]),h}();e.View=P,Object.defineProperty(P,"templates",{value:new Map}),Object.defineProperty(P,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewList=void 0;var t=n("./Bindable"),r=n("./View"),o=n("./Bag");function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function e(n,i,a,s){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.removed=!1,this.args=t.Bindable.makeBindable({}),this.args.value=t.Bindable.makeBindable(a||{}),this.subArgs=t.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f||r.View,this._onRemove=new o.Bag,this.template=n,this.subProperty=i,this.keyProperty=l,this.tag=null,this.paused=!1,this.parent=s,this.rendered=new Promise(function(t,e){Object.defineProperty(c,"renderComplete",{configurable:!1,writable:!0,value:t})}),this.willReRender=!1,this.args.___before(function(t,e,n,r,o){"bindTo"!=e&&(c.paused=!0)}),this.args.___after(function(t,e,n,r,o){"bindTo"!=e&&(c.paused=n.length>1,c.reRender())});var v=this.args.value.bindTo(function(t,e,n,r){if(!c.paused){var o=e;if("symbol"!==u(e))if(isNaN(e)&&(o="_"+e),r)for(var i in c.views[o]&&c.views[o].remove(),delete c.views[o],c.views)c.views[i].args[c.keyProperty]="string"!=typeof i?i:i.substr(1);else c.views[o]||c.willReRender?c.views[o]&&c.views[o].args&&(c.views[o].args[c.keyProperty]=e,c.views[o].args[c.subProperty]=t):c.willReRender=requestAnimationFrame(function(){c.reRender()})}});this._onRemove.add(v)}var n,a,c;return n=e,(a=[{key:"render",value:function(t){var e,n=this,r=[],o=i(this.views);try{var a=function(){var n=e.value;n.render(t),r.push(n.rendered.then(function(){return n}))};for(o.s();!(e=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}this.tag=t,Promise.all(r).then(function(t){return n.renderComplete(t)})}},{key:"reRender",value:function(){var t=this;if(!this.paused&&this.tag){var e=[];for(var n in this.views)e[n]=this.views[n];var r=[];this.upDebind&&this.upDebind.map(function(t){return t&&t()}),this.downDebind&&this.downDebind.map(function(t){return t&&t()}),this.upDebind=[],this.downDebind=[];var o=1/0,i=1/0,a=function(n){var a=!1,u=n;isNaN(u)?u="_"+n:String(u).length&&(u=Number(u));for(var s=e.length-1;s>=0;s--)if(e[s]&&void 0!==t.args.value[n]&&t.args.value[n]===e[s].args[t.subProperty]){a=!0,r[u]=e[s],isNaN(u)||(o=Math.min(o,u),u>0&&(i=Math.min(i,u))),r[u].args[t.keyProperty]=n,delete e[s];break}if(!a){var c={},l=r[u]=new t.viewClass(c,t.parent);isNaN(u)||(o=Math.min(o,u),u>0&&(i=Math.min(i,u))),r[u].template=(t.template,Object,t.template),r[u].viewList=t,r[u].args[t.keyProperty]=n,r[u].args[t.subProperty]=t.args.value[n],t.upDebind[u]=c.bindTo(t.subProperty,function(e,n,r,o){var i=c[t.keyProperty];o?delete t.args.value[i]:t.args.value[i]=e}),t.downDebind[u]=t.subArgs.bindTo(function(t,e,n,r){r?delete c[e]:c[e]=t}),l.onRemove(function(){t.upDebind[u]&&t.upDebind[u](),t.downDebind[u]&&t.downDebind[u](),delete t.downDebind[u],delete t.upDebind[u]}),t._onRemove.add(function(){t.upDebind.filter(function(t){return t}).map(function(t){return t()}),t.upDebind.splice(0)}),t._onRemove.add(function(){t.downDebind.filter(function(t){return t}).map(function(t){return t()}),t.downDebind.splice(0)}),c[t.subProperty]=t.args.value[n]}};for(var u in this.args.value)a(u);for(var s in e){var c=!1;for(var l in r)if(e[s]===r[l]){c=!0;break}c||e[s].remove()}if(Array.isArray(this.args.value)){var f=0===o&&void 0!==r[1]&&r.length>1||i===1/0?o:i;this.rendered=function e(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=r.length-n-1;o>f&&void 0===r[o];)o--;return o<f?Promise.resolve():r[o]===t.views[o]?r[o].firstNode?e(Number(n)+1):(r[o].render(t.tag,r[o+1]),r[o].rendered.then(function(){return e(Number(n)+1)})):(r[o].render(t.tag,r[o+1]),t.views.splice(o,0,r[o]),r[o].rendered.then(function(){return e(Number(n)+1)}))}()}else{var v=[],d=Object.assign({},r),p=function(e){if(delete d[e],r[e].firstNode&&r[e]===t.views[e])return"continue";r[e].render(t.tag),v.push(r[e].rendered.then(function(){return r[e]}))};for(var h in r)p(h);for(var y in d)delete this.args.views[y],d.remove();this.rendered=Promise.all(v)}for(var b in this.views=r,r)isNaN(b)?r[b].args[this.keyProperty]=b.substr(1):r[b].args[this.keyProperty]=b;this.willReRender=!1}}},{key:"pause",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var e in this.views)this.views[e].pause(t)}},{key:"onRemove",value:function(t){this._onRemove.add(t)}},{key:"remove",value:function(){for(var e in this.views)this.views[e].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&t.Bindable.clearBindings(this.subArgs),t.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&t.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&s(n.prototype,a),c&&s(n,c),e}();e.ViewList=c}()}),require.register("curvature/form/ButtonField.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonField=void 0;var t=n("./Field");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(c,t.Field);var n,r,u,s=a(c);function c(t,e,n,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=s.call(this,t,e,n,r)).args.title=o.args.title||o.args.value,o._onClick=[];var i=o.args.attrs||{};return i.type=i.type||o.args.type,o.args.name=i.name=o.args.name||r,o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\ttype      = "').concat(i.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),o}return n=c,(r=[{key:"clicked",value:function(t){this._onClick.map(function(e){return!1===e(t)}).filter(function(t){return t}).length?"submit"==this.args.attrs.type&&(t.preventDefault(),t.stopPropagation()):"submit"==this.args.attrs.type&&(t.preventDefault(),t.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})))}},{key:"onClick",value:function(t){this._onClick.push(t)}}])&&o(n.prototype,r),u&&o(n,u),c}();e.ButtonField=s}()}),require.register("curvature/form/Field.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Field=void 0;var t=n("../base/View");n("../base/Bindable");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(c,t.View);var n,r,u,s=a(c);function c(t,e,n,r){var o,i,a,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var l=Object.assign({},t);(u=s.call(this,l,n)).args.title=null!==(o=u.args.title)&&void 0!==o?o:r,u.args.value=null!==(i=u.args.value)&&void 0!==i?i:"",u.value=null!==(a=u.args.value)&&void 0!==a?a:"",u.skeleton=l,u.disabled=null,u.args.valueString="",u.form=e,u.key=r,u.ignore=u.args.attrs&&u.args.attrs["data-cv-ignore"]||!1;var f="",v=u.args.attrs||{};v.type=v.type||l.type||null,u.args.name=v.name=v.name||u.args.name||r,"checkbox"==v.type&&(f='value = "1"'),u.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(u.getName(),'"\n\t\t\t\tdata-type     = "').concat(v.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(u.getName(),'"\n\t\t\t\t\ttype      = "').concat(v.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(f,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var d=null;return u.args.bindTo("value",function(t,e){if(!isNaN(t)&&t.length&&t==Number(t)&&t.length===String(Number(t)).length&&(t=Number(t)),u.value=t,d!=e){if(d=r,u.args.valueString=JSON.stringify(t||"",null,4),u.valueString=u.args.valueString,"file"==v.type&&u.tags.input&&u.tags.input.element.files&&u.tags.input.element.length)if(v.multiple){var n=Array.from(u.tags.input.element.files);if(u.parent.args.value[e]&&n.length){for(var o in n)n[o]!==u.parent.args.value[r][o]&&(u.parent.args.value[r]=n);u.parent.args.value.splice(n.length)}else u.parent.args.value[r]=n}else u.parent.args.value[r]=u.tags.input.element.files[0];else u.parent.args.value||(u.parent.args.value={}),u.parent.args.value[r]=t;u.args.errors=[],d=null}}),u.parent.args.value[u.key]=u.args.value,u.parent.args.value.bindTo(r,function(t,e){if(d!=e){if(d=e,"file"==v.type)if(u.tags.input&&u.tags.input.element.files&&u.tags.input.element.files.length)if(v.multiple){var n=Array.from(u.tags.input.element.files);if(u.parent.args.value[r]&&n.length){for(var o in n)n[o]!==u.parent.args.value[r][o]&&(u.parent.args.value[r]=n);u.parent.args.value[r].splice(n.length)}else u.parent.args.value[r]=n}else u.parent.args.value[r]=u.tags.input.element.files[0];else u.args.value=t;else u.args.value=t;d=null}}),u}return n=c,(r=[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.tags.input)return this.tags.input.element.getAttribute("name");var e=this.key;if(t){for(var n=this.parent,r=[e];n&&n.array&&void 0!==n.key;)r.unshift(n.key),n=n.parent;e=r.shift(),r.length&&(e+="[".concat(r.join("]["),"]"))}return e}}])&&o(n.prototype,r),u&&o(n,u),c}();e.Field=s}()}),require.register("curvature/form/FieldSet.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldSet=void 0;var t=n("./Field"),r=n("./Form");function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;return s(t)}(this,n)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(f,t.Field);var n,o,c,l=u(f);function f(t,e,n,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var a=(i=l.call(this,t,e,n,o)).args.attrs||{};return a.type=a.type||"fieldset",i.array=!1,(t.array||a["data-array"]||a["data-multi"])&&(i.array=a["data-array"]=!0),i.args.value={},i.args.fields=r.Form.renderFields(t.children,s(i)),i.fields=i.args.fields,i.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(i.getName(),'"\n\t\t\t\tdata-type  = "').concat(a.type,'"\n\t\t\t\tdata-multi = "').concat(a["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(i.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),i}return n=f,(o=[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(t){return t}}])&&i(n.prototype,o),c&&i(n,c),f}();e.FieldSet=l}()}),require.register("curvature/form/Form.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Form=void 0;var t=n("../base/View"),r=n("./Field"),o=n("./FieldSet"),i=n("./SelectField"),a=n("./RadioField"),u=n("./HtmlField"),s=n("./HiddenField"),c=n("./ButtonField"),l=n("./TextareaField"),f=n("./multiField/View"),v=n("../base/Bindable");function d(t){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(_,t.View);var n,d,m,w=y(_);function _(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),(e=w.call(this,{})).args.flatValue=e.args.flatValue||{},e.args.value=e.args.value||{},e.args.method=t._method||"GET",e.args.classes=e.args.classes||[],e.skeleton=t,e.args.bindTo("classes",function(t){e.args._classes=t.join(" ")}),e.action="",e.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',e.args.fields=_.renderFields(t,g(e),n),e.fields=e.args.fields;var r=v.Bindable.makeBindable(g(e));return e.args.bindTo("value",function(t){r.value=t}),e.args.bindTo("valueString",function(t){r.json=t}),b(e,r)}return n=_,m=[{key:"renderFields",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v={},d=function(d){if(v[d])return"continue";if("_"==d.substr(0,1))return"continue";var p=null,h=null;if(e&&(h=e instanceof _?e:e.form),n&&t[d].name in n)p=new n[t[d].name](t[d],h,e,d);else switch(t[d].type){case"fieldset":p=t[d].attrs&&t[d].attrs["data-multi"]?new f.View(t[d],h,e,d):new o.FieldSet(t[d],h,e,d);break;case"select":p=new i.SelectField(t[d],h,e,d);break;case"radios":p=new a.RadioField(t[d],h,e,d);break;case"html":p=new u.HtmlField(t[d],h,e,d);break;case"submit":case"button":p=new c.ButtonField(t[d],h,e,d);break;case"hidden":p=new s.HiddenField(t[d],h,e,d);break;case"textarea":p=new l.TextareaField(t[d],h,e,d);break;default:p=new r.Field(t[d],h,e,d)}v[d]=p;var y=p.key;p.args.bindTo("value",function(t,n,r,o){if(!isNaN(t)&&t.length&&t==Number(t)&&t.length===String(Number(t)).length&&(t=Number(t)),("html"!=r.type||r.contentEditable)&&"fieldset"!=r.type)if(r.disabled)delete h.args.flatValue[y];else{r.attrs=r.attrs||{};r.attrs.multiple;var i=Array.isArray(t),a=e.args.value[y];if(r.attrs.multiple&&i&&Array.isArray(a))for(var u in t)t[u]!==e.args.value[y][u]&&(e.args.value[y][u]=t[u]),e.args.value[y].splice(t.length);else e.args.value[y]=t;h.args.flatValue[y]=t,h.args.valueString=JSON.stringify(h.args.value,null,4),console.log()}})};for(var p in t)d(p);return v}},{key:"_updateFields",value:function(t,e){for(var n in t.args.fields){var r=t.args.fields[n];e[n]&&(e[n].value&&(r.args.value=e[n].value),e[n].errors&&(r.args.errors=e[n].errors),e[n].title&&(r.args.title=e[n].title),e[n].options&&(r.args.options=e[n].options),e[n].attrs&&(r.args.attrs=e[n].attrs),r.children&&e[n].children&&this._updateFields(r,e[n].children))}}}],(d=[{key:"submit",value:function(t){this.args.valueString=JSON.stringify(this.args.value,null,4),this.dispatchEvent(new CustomEvent("submit",{details:{view:this}}))||(t.preventDefault(),t.stopPropagation())}},{key:"buttonClick",value:function(t){}},{key:"formData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t||(t=new FormData),e||(e=this);for(var r in e.args.fields)if(!e.args.fields[r]||!e.args.fields[r].disabled){var o=n.slice(0);if(o.push(r),e.args.fields[r]&&e.args.fields[r].hasChildren())this.formData(t,e.args.fields[r],o);else if(e.args.fields[r]){var i=e.args.fields[r].getName();if("file"==e.args.fields[r].args.type&&e.args.fields[r].tags.input.element.files&&e.args.fields[r].tags.input.element.files.length)if(e.args.fields[r].args.attrs.multiple)for(var a=e.args.fields[r].tags.input.element.files,u=0;u<a.length;u++)a[u]&&t.append(i+"[]",a[u]);else e.args.fields[r].tags.input.element.files[0]&&t.append(i,e.args.fields[r].tags.input.element.files[0]);else("file"!==e.args.fields[r].args.type||e.args.fields[r].args.value)&&t.append(i,void 0===e.args.fields[r].args.value?"":e.args.fields[r].args.value)}}return t}},{key:"queryString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[];for(var n in this.args.flatValue)t[n]=t[n]||this.args.flatValue[n];for(var r in t)e.push(r+"="+encodeURIComponent(t[r]));return e.join("&")}},{key:"populate",value:function(t){for(var e in t)this.args.value[e]=t[e]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}])&&p(n.prototype,d),m&&p(n,m),_}();e.Form=w}()}),require.register("curvature/form/HiddenField.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HiddenField=void 0;var t=n("./Field");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(r,t.Field);var n=i(r);function r(t,e,o,i){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t.type="hidden";var u=(a=n.call(this,t,e,o,i)).args.attrs||{};return a.args.type=u.type="hidden",a.args.name=u.name=u.name||a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}return r}();e.HiddenField=u}()}),require.register("curvature/form/HtmlField.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlField=void 0;var t=n("./Field");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(c,t.Field);var n,r,u,s=a(c);function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=s.call(this,t,e,n,r)).key=r,o.args.tagName=o.args.tagName||"div",o.args.displayValue=o.args.value,o.args.attrs=o.args.attrs||{},o.ignore=o.args.attrs["data-cv-ignore"]||!1,o.args.contentEditable=o.args.attrs.contenteditable||!1,o.args.bindTo("value",function(t){o.tags.input&&o.tags.input.element!==document.activeElement&&(o.args.displayValue=t)}),o.template="<".concat(o.args.tagName,'\n\t\t\tname            = "').concat(o.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(o.args.tagName,">"),o}return n=c,(r=[{key:"inputProvided",value:function(t){this.args.value=t.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}])&&o(n.prototype,r),u&&o(n,u),c}();e.HtmlField=s}()}),require.register("curvature/form/RadioField.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RadioField=void 0;var t=n("./Field");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(c,t.Field);var n,r,u,s=a(c);function c(t,e,n,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var i=(o=s.call(this,t,e,n,r)).args.attrs||{};return o.args.name=i.name=i.name||o.args.name||r,o.args.value=o.args.value||"",o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(o.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),o}return n=c,(r=[{key:"getLabel",value:function(){for(var t in this.args.options)if(this.args.options[t]==this.args.value)return t}},{key:"changed",value:function(t){this.args.value=t.target.value}}])&&o(n.prototype,r),u&&o(n,u),c}();e.RadioField=s}()}),require.register("curvature/form/SelectField.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectField=void 0;var t=n("./Field");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(l,t.Field);var n,r,i,c=s(l);function l(t,e,n,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var i=(o=c.call(this,t,e,n,r)).args.attrs||{};return o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),o}return n=l,(r=[{key:"postRender",value:function(){var t=this;this.args.bindTo("value",function(e){return t.selectOptionByValue(e)}),this.args.options.bindTo(function(e){return t.selectOptionByValue(t.args.value)},{frame:1})}},{key:"selectOptionByValue",value:function(t){var e,n=this.tags.input.element,r=o(n.options);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.value==t&&(n.selectedIndex=i.index)}}catch(t){r.e(t)}finally{r.f()}}},{key:"getLabel",value:function(){for(var t in this.args.options)if(this.args.options[t]==this.args.value)return t}}])&&a(n.prototype,r),i&&a(n,i),l}();e.SelectField=l}()}),require.register("curvature/form/TextareaField.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextareaField=void 0;var t=n("./Field");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(r,t.Field);var n=i(r);function r(t,e,o,i){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var u=(a=n.call(this,t,e,o,i)).args.attrs||{};return u.type=u.type||"textarea",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}return r}();e.TextareaField=u}()}),require.register("curvature/form/multiField/CreateForm.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateForm=void 0;var t=n("./FormWrapper");n("../../form/HiddenField");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(f,t.FormWrapper);var n,r,c,l=u(f);function f(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(n=l.call(this,t,e,"POST",r||{})).creating=!!t.publicId,n}return n=f,(r=[{key:"onLoad",value:function(t){for(var e in t.args.fields)if(t.args.fields[e].tags.input&&"hidden"!=t.args.fields[e].args.attrs.type){t.args.fields[e].tags.input.element.focus();break}i(s(f.prototype),"onLoad",this).call(this,t)}},{key:"onRequest",value:function(){return this.args.view.args.loading=!0,this.args.view.args.classes+=" loading",i(s(f.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(t){this.args.view.args.loading=!1,this.args.view.args.classes="",t.body?(this.args.wrapper?this.args.wrapper.refresh(t.body):this.args.view.addRecord(t.body),this.args.view.args.creating="",i(s(f.prototype),"onResponse",this).call(this,t)):i(s(f.prototype),"onResponse",this).call(this,t)}}])&&o(n.prototype,r),c&&o(n,c),f}();e.CreateForm=c}()}),require.register("curvature/form/multiField/FormWrapper.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormWrapper=void 0;var t=n("../../base/Repository"),r=n("../../form/Form"),o=n("../../toast/Toast"),i=(n("../../toast/ToastAlert"),n("../../base/View")),a=n("../../base/Router");function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,i.View);var n,u,c,d=v(p);function p(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(o=d.call(this,e)).path=n,o.args.method=i,o.args.action=o.args.action||null,o.args.form=null,o.args.title=null,o.args.class="",o.template='\n\t\t\t<div class = "form constrict [[class]]">\n\t\t\t\t<div cv-if = "title"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t',o._onLoad=[],o._onSubmit=[],o._onRender=[],o._onRequest=[],o._onError=[],o._onResponse=[],n instanceof r.Form?o.loadForm(form,a):t.Repository.request(n).then(function(t){t&&t.meta&&t.meta.form&&t.meta.form instanceof Object?(o.loadForm(new r.Form(t.meta.form,a)),o.onLoad(o.args.form,t.body)):console.error("Cannot render form with ",t)}),o}return n=p,(u=[{key:"loadForm",value:function(e){var n=this;this.args.form=e,this.args.form.addEventListener("submit",function(r){r&&(r.preventDefault(),r.stopPropagation());var o=e.tags.formTag.element,i=o.getAttribute("action")||n.args.action||n.path,u=o.getAttribute("method")||n.args.method,c=e.args.flatValue;if("GET"==(u=u.toUpperCase())){var l={};for(var f in n.args.content&&n.args.content.args&&(n.args.content.args.page=0),l.page=0,c)"api"!==f&&(l[f]=c[f]);n.onRequest(l).then(function(){n.onResponse({}),a.Router.go(i+"?"+a.Router.queryToString(l)),n.update(l)}).catch(function(t){n.onRequestError(t)})}else if("POST"==u){var v,d=e.formData(),p=s(d.entries());try{for(p.s();!(v=p.n()).done;)v.value}catch(t){p.e(t)}finally{p.f()}var h=n.onRequest(d);h&&h.then(function(){t.Repository.request(i,{api:"json"},d,!1,{progressDown:function(t){n.progressDown(t)},progressUp:function(t){n.progressUp(t)}}).then(function(t){n.onResponse(t)}).catch(function(t){n.onRequestError(t)})})}})}},{key:"onRequest",value:function(t){var e=[];for(var n in this._onRequest){var r=this._onRequest[n](t,this);r&&e.push(r)}return 0==e.length?Promise.resolve():Promise.all(e)}},{key:"onRequestError",value:function(t){for(var e in this._onError)this._onError[e](t,this);if(t.messages)for(var n in t.messages)o.Toast.instance().alert(t.body&&t.body.id?"Success!":"Error!",t.messages[n],3500)}},{key:"onResponse",value:function(t){for(var e in this._onResponse)this._onResponse[e](t,this);if(t.messages)for(var n in t.messages)o.Toast.instance().alert(t.body&&t.body.id?"Success!":"Error!",t.messages[n],3500)}},{key:"onLoad",value:function(t,e){for(var n in this._onLoad)this._onLoad[n](this,t,e)}},{key:"customFields",value:function(){return{}}},{key:"submit",value:function(){}},{key:"progressUp",value:function(t){console.log(t.loaded,t.total,t.loaded/t.total)}},{key:"progressDown",value:function(t){console.log(t.loaded,t.total,t.loaded/t.total)}}])&&l(n.prototype,u),c&&l(n,c),p}();e.FormWrapper=p}()}),require.register("curvature/form/multiField/SearchForm.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchForm=void 0;var t=n("../../base/Config"),r=n("./FormWrapper"),o=n("../../form/HiddenField"),i=n("../../base/Repository");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.Config.get("backend")||"//",d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,r.FormWrapper);var e,n,a,d=l(p);function p(t,e){var n;arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(n=d.call(this,t,e,"POST",{search:o.HiddenField})).superTemplate=n.template,n.args.records=[],n.selected=null,n.template="\n\t\t\t".concat(n.superTemplate,'\n\t\t\t<div cv-each = "records:record:r" class = "dropdown-results">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = "click:select(event)"\n\t\t\t\t\tdata-index    = "[[r]]"\n\t\t\t\t\tdata-publicId = "[[record.publicId]]"\n\t\t\t\t\tclass         = "[[record.classes]]"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),n}return e=p,(n=[{key:"onLoad",value:function(t){var e=this;for(var n in t.args.fields)if(t.args.fields[n].tags.input&&"hidden"!=t.args.fields[n].args.attrs.type){t.args.fields[n].tags.input.element.focus();break}t.args.flatValue.bindTo("keyword",function(t){e.args.records=[],e.selected=null,t&&(console.log(e.path,t),i.Repository.request(v+e.path,{keyword:t}).then(function(n){console.log(n.body),n.body&&(e.args.records=n.body.map(function(n){return n.classes="",n.title==t&&(n.classes="selected",e.selected=n),n}))}))}),s(f(p.prototype),"onLoad",this).call(this,t)}},{key:"onRequest",value:function(){return s(f(p.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(t){s(f(p.prototype),"onResponse",this).call(this,t)}},{key:"select",value:function(t){var e=t.target.getAttribute("data-index"),n=(t.target.getAttribute("data-publicId"),this.args.records[e]);console.log(n),this.args.view.addRecord(n),this.args.view.addButtonClicked()}},{key:"onSubmit",value:function(t,e){return e.preventDefault(),e.stopPropagation(),this.selected&&(this.args.view.addRecord(this.selected),this.args.view.addButtonClicked()),!1}}])&&u(e.prototype,n),a&&u(e,a),p}();e.SearchForm=d}()}),require.register("curvature/form/multiField/View.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var t=n("../../base/Config"),r=n("../../form/Form"),o=n("../../form/FieldSet"),i=n("./CreateForm"),a=n("./SearchForm"),u=(n("./FormWrapper"),n("./Wrapper"));function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;return v(t)}(this,n)}}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(y,o.FieldSet);var n,d,p,h=f(y);function y(t,e,n,r){var o;for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(o=h.call(this,t,e,n,r)).args._fields=[],o.dragging=!1,o.dropping=!1,o.args.fields)o.args._fields[Number(i)+1]=o.wrapSubfield(o.args.fields[i]);return o.args.fields[-1].disable(),o.args._fields[0].addEventListener("attach",function(t){return t.preventDefault()}),o.args.creating="",o.args.fieldType="",o.args.createForm=o.args.createForm||"",o.args.searchForm=o.args.searchForm||"",o.args.createFormReady=!1,o.setCreateForm({view:v(o)}),o.args.loader="...",o.args.addIcon="&#215;",o.args.addIcon="a",o.args.addIcon="+",o.args.draggable="true",o.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(o.args.name,'"\n\t\t\t\tdata-type  = "').concat(o.args.attrs.type,'"\n\t\t\t\tdata-multi = "').concat(o.args.attrs["data-multi"]?"true":"false",'"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = "').concat(o.args.name,'"\n\t\t\t\t\tclass = "multi-field [[creating]] [[fieldType]]"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = "record-list" cv-each = "_fields:field:f">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = "single-record"\n\t\t\t\t\t\t\tdata-for  = "[[f]]"\n\t\t\t\t\t\t>[[field]]</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay create">\n\t\t\t\t\t\t<div class = "form constrict">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\t\tclass = "bubble bottom left-margin close"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay loading">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = "createFormReady" class="add-button-holder">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\tclass = "bubble bottom left-margin add"\n\t\t\t\t\t\t\ttab-index = "0"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t'),o}return n=y,(d=[{key:"setCreateForm",value:function(e){var n=this,r="";t.Config.get("backend")&&(r=t.Config.get("backend")),!1!==this.args.attrs["data-create-endpoint"]&&void 0!==this.args.attrs["data-create-endpoint"]?(this.args.createForm=new i.CreateForm(Object.assign({},e),this.args.attrs["data-create-endpoint"]?r+this.args.attrs["data-create-endpoint"]:e.publicId?r+"".concat(this.args.attrs["data-endpoint"],"/").concat(e.publicId,"/edit"):r+"".concat(this.args.attrs["data-endpoint"],"/create")),this.args.createForm._onLoad.push(function(t,e){n.args.createFormReady=!0})):this.args.createFormReady=!0,this.args.attrs["data-endpoint"]&&(this.args.searchForm=new a.SearchForm(Object.assign({},e),r+this.args.attrs["data-endpoint"]))}},{key:"wrapSubfield",value:function(t){return new u.Wrapper({field:t,parent:this})}},{key:"addButtonClicked",value:function(){this.args.creating||(this.args.creating="creating")}},{key:"addRecord",value:function(t){for(var e in this.args.creating="",Array.isArray(t)||(t=[t]),t){this.args.fields[-1].constructor;var n,o=Object.assign({},this.args.fields[-1].skeleton),i=Object.values(this.args.fields).length-1;o=this.cloneSkeleton(o),(o=this.correctNames(o,i)).attrs=null!==(n=o.attrs)&&void 0!==n?n:{},o.attrs["data-array"]=!0;var a={};a[i]=o;var u=r.Form.renderFields(a,this)[i];this.args.fields[i]=u;var s=this.wrapSubfield(u);u.args.value.id=t[e].id||"",u.args.value.class=t[e].class||"",u.args.value.title=t[e].title||"",u.args.value.key=this.args._fields.length,console.log(this.args._fields),this.args._fields.push(s),s.refresh(t[e])}}},{key:"editRecord",value:function(t,e){this.setCreateForm({view:this,publicId:t.publicId,wrapper:e}),this.args.creating=this.args.creating?"":"creating"}},{key:"deleteImage",value:function(t){console.log(t,this.args.fields),this.args.fields[t].disable(),this.args._fields[t].args.classes="deleted"}},{key:"undeleteImage",value:function(t){this.args.fields[t].enable(),this.args._fields[t].args.classes=""}},{key:"cloneSkeleton",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};for(var r in Array.isArray(t)&&(n=[]),t)"fields"!=r&&(t[r]&&"object"===s(t[r])?n[r]=Object.assign({},this.cloneSkeleton(t[r],e+1)):n[r]=t[r]);return n}},{key:"correctNames",value:function(t,e){if(t.name=t.name.replace(/\[-1\]/,"[".concat(e,"]")),t.attrs.name=t.name,"children"in t)for(var n in t.children)t.children[n]=this.correctNames(t.children[n],e);return t}},{key:"drag",value:function(t){this.dragging=t.target}},{key:"dragOver",value:function(t){if(!this.dragging)return!1;for(var e=t.target;e&&!e.matches('[draggable="true"]');)e=e.parentNode;e&&(this.dropping=e,t.preventDefault())}},{key:"drop",value:function(t){t.stopPropagation();var e=this.dragging.querySelector("label"),n=this.dropping.querySelector("label"),r=e.getAttribute("for"),o=n.getAttribute("for"),i=this.extractIndex(r),a=this.extractIndex(o);if(i==a||i==a-1)return this.dragging=!1,void(this.dropping=!1);var u,s,c=e.querySelectorAll('[name^="'+r+'"]'),l=e.querySelectorAll('[for^="'+r+'"]'),f=n.querySelectorAll('[name^="'+o+'"]'),v=n.querySelectorAll('[for^="'+o+'"]'),d=this.dropping,p=0;for(var h in this.args.fields){var y=this.args.fields[h].tags.input.element,b=this.args.fields[h].tags.label.element,g=y.getAttribute("name");e==b&&(u=this.args.fields[h]),n==b&&(s=this.args.fields[h]);var m=this.extractIndex(g),w=!1;if(!(m<0)&&(i>a&&m>=a&&m<=i?(w=this.changeIndex(g,m+1),p=-1):i<a&&m<=a&&m>=i&&(w=this.changeIndex(g,m-1),p=0),!1!==w)){this.changeAttributePrefix(b,"for",g,w),this.args.fields[h].args.fieldName=w,this.changeAttributePrefix(y,"name",g,w);for(var _=y.parentNode.querySelectorAll('[name^="'+g+'"]'),O=0;O<_.length;O++)this.changeAttributePrefix(_[O],"name",g,w);for(var j=y.parentNode.querySelectorAll('[for^="'+g+'"]'),k=0;k<j.length;k++)this.changeAttributePrefix(j[k],"for",g,w)}}r=e.getAttribute("for"),o=n.getAttribute("for"),i=this.extractIndex(r),a=this.extractIndex(o),this.changeAttributePrefix(e,"for",r,this.changeIndex(r,a+p));for(var S=0;S<c.length;S++)this.changeAttributePrefix(c[S],"name",r,this.changeIndex(r,a+p));for(var R=0;R<l.length;R++)this.changeAttributePrefix(l[R],"for",r,this.changeIndex(r,a+p));u.args.fieldName=e.getAttribute("for"),this.changeAttributePrefix(n,"for",o,this.changeIndex(o,a+p+1));for(var P=0;P<f.length;P++)this.changeAttributePrefix(f[P],"name",o,this.changeIndex(o,a+p+1));for(var T=0;T<v.length;T++)this.changeAttributePrefix(v[T],"for",o,this.changeIndex(o,a+p+1));s.args.fieldName=n.getAttribute("for"),this.dragging.parentNode.insertBefore(this.dragging,d),this.dragging=!1,this.dropping=!1}},{key:"dragStop",value:function(){this.dragging=!1,this.dropping=!1}},{key:"changeAttributePrefix",value:function(t,e,n,r){t.getAttribute(e);var o=r+t.getAttribute(e).substring(n.length);t.setAttribute(e,o)}},{key:"extractIndex",value:function(t){var e;return!!(e=/\[(-?\d+)\]$/.exec(t))&&parseInt(e[1])}},{key:"changeIndex",value:function(t,e){return t.replace(/\[(-?\d+)\]$/,"["+e+"]")}},{key:"cancel",value:function(t){t.stopPropagation()}}])&&c(n.prototype,d),p&&c(n,p),y}();e.View=p}()}),require.register("curvature/form/multiField/Wrapper.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Wrapper=void 0;var t=n("../../base/Config"),r=n("../../base/View"),o=n("../../base/Repository");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(f,r.View);var n,i,c,l=s(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=l.call(this,t)).template='\n\t\t\t<div\n\t\t\t\tclass = "wrapped-field [[classes]]"\n\t\t\t\tcv-on = "click:editRecord(event, key)"\n\t\t\t\ttitle = "[[fieldName]]: [[id]]"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = "click:deleteImage(event, key)"\n\t\t\t\t\tstyle = "display: inline; cursor:pointer;"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = "field-content">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = "display:none">[[field]]</div>\n\t\t',e.args.field=e.args.field||"!",e.args.keyword="",e.args.title="",e.args.record={},e.args.key=e.args.field.key,e.args.classes="",e.args.icon="×",e.deleted=!1,e.args.field.args.bindTo("fieldName",function(t){e.args.fieldName=t}),e.args.fieldName=e.args.field.args.name,e.args.id=e.args.field.args.value.id,e.args.bindTo("id",function(t){e.args.field.args.value.id=t}),e.args.field.args.value.bindTo("id",function(t,n){t&&o.Repository.request(e.backendPath(),{id:t}).then(function(n){e.args.id=t;var r=n.body[0];if(!r)return e.args.publicId=null,void(e.args.title=null);e.refresh(r)})},{wait:0}),e.args.field.args.value.bindTo("keyword",function(t){e.args.keyword=t}),e}return n=f,(i=[{key:"editRecord",value:function(){this.args.parent.editRecord(this.args.record,this)}},{key:"deleteImage",value:function(t,e){t.stopPropagation(),this.deleted?(this.args.icon="×",this.args.parent.undeleteImage(e),this.deleted=!1):(this.args.icon="↺",this.args.parent.deleteImage(e),this.deleted=!0)}},{key:"backendPath",value:function(){return(t.Config.get("backend")||"//")+this.args.parent.args.attrs["data-endpoint"]}},{key:"getRecordTitle",value:function(t){return t._titleField?t[t._titleField]:t.title||t.publicId||t.id}},{key:"refresh",value:function(t){for(var e in t)this.args[e]=t[e];this.args.record=t,this.args.title=this.getRecordTitle(t)}}])&&a(n.prototype,i),c&&a(n,c),f}();e.Wrapper=l}()}),require.register("curvature/mixin/EventTargetMixin.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetMixin=void 0;var t,r=n("../base/Mixin");function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=Symbol("Target"),a=(o(t={},r.Mixin.Constructor,function(){try{this[i]=new EventTarget}catch(t){this[i]=document.createDocumentFragment()}}),o(t,"dispatchEvent",function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];(t=this[i]).dispatchEvent.apply(t,n);var a="on".concat(o.type[0].toUpperCase()+o.type.slice(1));return"function"==typeof this[a]&&this[a](o),o.returnValue}),o(t,"addEventListener",function(){var t;(t=this[i]).addEventListener.apply(t,arguments)}),o(t,"removeEventListener",function(){var t;(t=this[i]).removeEventListener.apply(t,arguments)}),t);e.EventTargetMixin=a}()}),require.register("curvature/mixin/PromiseMixin.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseMixin=void 0;var t,r=n("../base/Mixin");function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=Symbol("Promise"),a=Symbol("Accept"),u=Symbol("Reject"),s=(o(t={},r.Mixin.Constructor,function(){var t=this;this[i]=new Promise(function(e,n){t[a]=e,t[u]=n})}),o(t,"then",function(){var t;return(t=this[i]).then.apply(t,arguments)}),o(t,"catch",function(){var t;return(t=this[i]).catch.apply(t,arguments)}),o(t,"finally",function(){var t;return(t=this[i]).finally.apply(t,arguments)}),t);e.PromiseMixin=s,Object.defineProperty(s,"Reject",{value:u}),Object.defineProperty(s,"Accept",{value:a})}()}),require.register("curvature/model/Model.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var t=n("../base/Cache"),r=n("../base/Bindable");function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var c=Symbol("Saved"),l=Symbol("Changed"),f=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,l,{value:r.Bindable.make({})}),Object.defineProperty(this,c,{writable:!0,value:!1})}return s(e,null,[{key:"keyProps",value:function(){return["id","class"]}}]),s(e,[{key:"consume",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.__proto__.constructor.keyProps(),i=function(e,r){if(r&&"object"===a(r)&&r.__proto__.constructor.keyProps){var o=r.__proto__.constructor.keyProps().map(function(t){return r[t]}).join("::"),i=t.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(r),r=i)}n[e]=r};for(var u in e)!r&&this[l][u]||o.includes(u)||i(u,e[u])}},{key:"changed",value:function(){this[c]=!1}},{key:"stored",value:function(){for(var t in this[l])this[l][t]=!1;this[c]=!0}},{key:"isSaved",value:function(){return this[c]}}],[{key:"from",value:function(e){var n,i=this,u=this.keyProps(),s=u.map(function(t){return e[t]}).join("::"),f="models-by-type-and-publicId",v=t.Cache.load(s,!1,f),d=v||r.Bindable.makeBindable(new this),p=o(u);try{for(p.s();!(n=p.n()).done;){var h,y,b=n.value;d[b]=null!==(h=null!==(y=d[b])&&void 0!==y?y:e[b])&&void 0!==h?h:null}}catch(t){p.e(t)}finally{p.f()}if(d.consume(e),t.Cache.store(s,d,0,f),!v){var g=!1;d.bindTo(function(t,e,n){"symbol"!==a(e)&&t!==n[e]&&(d[l][e]=g,d[c]=!(g||!i[c]))}),g=!0}return d}}]),e}();e.Model=f,Object.defineProperty(f,"Saved",{value:c}),Object.defineProperty(f,"Changed",{value:l})}()}),require.register("curvature/toast/Toast.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Toast=void 0;var t=n("../base/View"),r=n("../base/Bindable"),o=n("./ToastAlert");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t.View);var n=c(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this)).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',t.args.alerts=[],t}return u(i,null,[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}]),u(i,[{key:"pop",value:function(t){var e=this;this.args.alerts.length;this.args.alerts.push(t),t.decay(function(t){return function(){for(var n in e.args.alerts)if(r.Bindable.ref(e.args.alerts[n])===r.Bindable.ref(t))return t.remove(),void delete e.args.alerts[n]}}(t))}},{key:"alert",value:function(t,e,n){return this.pop(new o.ToastAlert({title:t,body:e,time:n}))}}]),i}();e.Toast=f}()}),require.register("curvature/toast/ToastAlert.js",function(e,n,r){n=t(n,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToastAlert=void 0;var t=n("../base/View");function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(c,t.View);var n,r,u,s=a(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,t)).args.running=!1,e.args.time=e.args.time||16e3,e.init=e.args.time,e.args.title=e.args.title||"Standard alert",e.args.status="new",e.args.body=e.args.body||"This is a standard alert.",e.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',e}return n=c,(r=[{key:"decay",value:function(t){var e=this;this.args.running=!0,this.onTimeout(50,function(){e.args.status=""}),this.onTimeout(300,function(){e.args.status="decaying"}),this.onTimeout(2400,function(){e.args.status="imminent"}),this.onTimeout(3500,function(){e.remove()})}}])&&o(n.prototype,r),u&&o(n,u),c}();e.ToastAlert=s}()}),require.register("___globals___",function(t,e,n){})}(),require("___globals___");
